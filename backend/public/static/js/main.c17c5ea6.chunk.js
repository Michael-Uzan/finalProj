(this["webpackJsonpfinal-proj"]=this["webpackJsonpfinal-proj"]||[]).push([[0],{511:function(e,t,r){},512:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r.n(a),s=r(24),c=r.n(s),o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var d=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,593)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))},l=r(5),u=r(6),b=r(9),j=r(8),h=r(35),p=r(11),f=r.n(p),O=r(19),m=r(25),g=r(13),x=r(4),v=r(138),C=r.n(v),y="/api/",k=C.a.create({withCredentials:!0}),N=function(e,t){return B(e,"GET",t)},I=function(e,t){return B(e,"POST",t)},w=function(e,t){return B(e,"PUT",t)};function B(e){return S.apply(this,arguments)}function S(){return S=Object(O.a)(f.a.mark((function e(t){var r,a,n,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"GET",a=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,k({url:"".concat(y).concat(t),method:r,data:a,params:"GET"===r?a:null});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),S.apply(this,arguments)}var T={query:D,get:function(e,t){return D(e).then((function(e){return e.find((function(e){return e._id===t}))}))},post:function(e,t){return t._id=A(),D(e).then((function(r){return r.push(t),L(e,r),t}))},put:function(e,t){return D(e).then((function(r){var a=r.findIndex((function(e){return e._id===t._id}));return r.splice(a,1,t),L(e,r),t}))},remove:function(e,t){return D(e).then((function(r){var a=r.findIndex((function(e){return e._id===t}));r.splice(a,1),L(e,r)}))},postMany:function(e,t){return D(e).then((function(r){return t=t.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{_id:A()})})),r.push.apply(r,Object(m.a)(t)),L(e,r),r}))},save:L};function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=JSON.parse(localStorage.getItem(e))||[];return new Promise((function(e,a){setTimeout((function(){e(r)}),t)}))}function L(e,t){localStorage.setItem(e,JSON.stringify(t))}function A(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}var M={query:function(e){return N("boards",{userId:e})},remove:function(e){return T.remove("boardsDB",e)},getBoardById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return N("boards/".concat(e),{filterBy:t})},save:function(e){return e._id?w("boards/".concat(e._id),e):I("boards",e)}};var E=r(244),U=r.n(E),F=function(){var e=null,t={setup:function(){e=U()("")},on:function(t,r){e.on(t,r)},off:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(r?e.off(t,r):e.removeAllListeners(t))},emit:function(t,r){e.emit(t,r)},terminate:function(){e=null}};return t}();var _="usersDB",R="loggedinUser",P="615f4586c375bb154681275d",G={login:function(e){return W.apply(this,arguments)},logout:function(){return K.apply(this,arguments)},signup:function(e){return J.apply(this,arguments)},getLoggedinUser:V,getUsers:function(){return N("user")},getById:H,remove:function(e){return T.remove(_,e)},update:function(e){return z.apply(this,arguments)},filterUserBoards:function(e,t,r){return e.filter((function(e){return!!e.createdBy&&("all"===r||("owner"===r?e.createdBy._id===t:"guest"===r?e.createdBy._id!==t:"starred"===r?X(e,t):[]))}))},isBoardStarred:X,toggleStarBoard:function(e,t){var r=e.boardMembers.findIndex((function(e){return e._id===t}));return e.boardMembers[r].isStarred=!e.boardMembers[r].isStarred,e},getGuestUser:function(){return Q.apply(this,arguments)}};function H(e){return q.apply(this,arguments)}function q(){return(q=Object(O.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("user/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(O.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.put(_,t);case 2:return V()._id===t._id&&Y(t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(O.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("auth/login",t);case 2:if(r=e.sent){e.next=5;break}throw new Error("login service error");case 5:return e.abrupt("return",Y(r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(O.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initials=Z(t.fullname),e.next=3,I("auth/signup",t);case 3:return r=e.sent,e.abrupt("return",Y(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.removeItem(R),e.next=3,I("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return JSON.parse(sessionStorage.getItem(R)||"null")}function Q(){return(Q=Object(O.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(P);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){var r=e.boardMembers.findIndex((function(e){return e._id===t}));if(r>-1)return e.boardMembers[r].isStarred}function Y(e){return sessionStorage.setItem(R,JSON.stringify(e)),e}function Z(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()})).join("")}var $={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],r="";for(;e>0;)e--,r+=t[Math.floor(Math.random()*t.length)]+" ";return r},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},getFormattedBgStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small";if("object"===typeof e){var r="small"===t?e.small:e.full;return{background:"url(".concat(r,") center / cover no-repeat")}}return{background:e}}};var ee={on:function(e,t){var r=function(e){var r=e.detail;t(r)};return window.addEventListener(e,r),function(){window.removeEventListener(e,r)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ee.emit("show-user-msg",{txt:e,type:t})}function re(e){te(e,"success")}function ae(e){te(e,"danger")}window.myBus=ee,window.showUserMsg=te;var ne={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}};function se(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.query(e);case 3:a=t.sent,r({type:"SET_BOARDS",boards:a}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),ae("Sorry cannot load boards"),console.log("BoardActions: err in loadBoards",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function ce(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=5;break}t.t0=null,t.next=8;break;case 5:return t.next=7,M.getBoardById(e);case 7:t.t0=t.sent;case 8:a=t.t0,r({type:"SET_BOARD",board:Object(x.a)({},a)}),t.next=16;break;case 12:t.prev=12,t.t1=t.catch(0),ae("Sorry cannot load board"),console.log("BoardActions: err in loadBoards",t.t1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function oe(e,t){return function(){var r=Object(O.a)(f.a.mark((function r(a){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{a({type:"SET_LIST",list:e}),a({type:"SET_CARD",card:t})}catch(n){console.log("BoardActions: err in loadList",n)}case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function ie(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.save(e);case 3:return a=t.sent,r({type:"ADD_BOARD",board:a}),t.abrupt("return",a);case 8:t.prev=8,t.t0=t.catch(0),ae("Sorry cannot add board"),console.log("BoardActions: err in addBoard",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function de(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.remove(e);case 3:r({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),ae("Sorry cannot remove board"),console.log("BoardActions: err in removeBoard",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function le(){return function(e){e({type:"TOGGLE_LABELS"})}}function ue(e,t){return function(){var r=Object(O.a)(f.a.mark((function r(a){var n;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,a({type:"SET_FILTER",filterBy:e}),t){r.next=6;break}r.t0=null,r.next=9;break;case 6:return r.next=8,M.getBoardById(t,e);case 8:r.t0=r.sent;case 9:n=r.t0,a({type:"UPDATE_BOARD",board:Object(x.a)({},n)}),r.next=16;break;case 13:r.prev=13,r.t1=r.catch(0),console.log("Cannot update notification",r.t1);case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(e){return r.apply(this,arguments)}}()}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e.createdBy?function(){var n=Object(O.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t?(c=je(t,r,a),e.activities.unshift(c)):e.activities[0].isNotif="alreday-sent-notif",s({type:"UPDATE_BOARD",board:Object(x.a)({},e)}),console.log("here after store"),n.next=6,M.save(e);case 6:s({type:"UPDATE_LAST_UPDATED_BOARD"}),F.emit("update-board",e),console.log("after board to backend"),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),navigator.onLine?(console.log("im online board action"),s({type:"UNDO_UPDATE_BOARD"}),ae("Sorry cannot update board")):(console.log("im in offline board action"),ne.saveToStorage("BOARD_DB",e)),console.log("BoardActions: err in updateBoard",n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}():function(e){e({type:"UNDO_UPDATE_BOARD"}),ae("Templates cannot be changed")}}function je(e,t,r){return function(e){switch(e.action){case"Added":case"Removed":case"Set due date":case"Removed due date":case"Changed due date":case"Completed checklist":case"Added comment":e.isNotif="new-notif";break;default:e.isNotif=!1}return e}({id:$.makeId(),txt:r,createdAt:Date.now(),byMember:G.getLoggedinUser(),action:e,card:t?{cardId:t.cardId,cardTitle:t.cardTitle}:"",isNotif:!1})}function he(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_NOTIF",isNotif:e}),r(e?{type:"SET_NOTIF_COUNT++"}:{type:"SET_NOTIF_COUNT",count:0})}catch(a){console.log("Cannot update notification",a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function pe(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_LABEL",labelsProps:e})}catch(a){console.log("Cannot set labels props",a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function fe(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_SEARCH_BG",searchStr:e})}catch(a){console.log("Cannot set search background",a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Oe(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.login(e);case 3:return a=t.sent,r({type:"SET_USER",user:a}),t.abrupt("return",a);case 8:throw t.prev=8,t.t0=t.catch(0),console.log("Cannot login",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function me(){try{return Oe({username:"pandaguest",password:"123"})}catch(e){console.log("error login as guest")}}var ge=r(64),xe=r(590),ve=r(583),Ce=r(1);function ye(e){var t=e.list,r=e.board,a=e.onUpdateBoard;return Object(Ce.jsx)("div",{children:Object(Ce.jsx)("p",{className:"pointer",onClick:function(){var e=r.lists.findIndex((function(e){return e.listId===t.listId}));r.lists.splice(e,1),console.log("board from delete",r);var n="Deleted list ".concat(t.listTitle);a(n)},children:"Delete"})})}var ke=r(584),Ne=r(79),Ie=r.n(Ne),we=r(568),Be=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,inputTxt:"",filteredMembers:[]},e.toggleMember=function(t){var r=e.state,a=r.currListIdx,n=r.currCardIdx,s=e.props,c=s.loggedInUser,o=s.board,i=o.lists[a].cards[n];if(e.isMemberOnCard(i,t._id)){var d=i.cardMembers.findIndex((function(e){return e._id===t._id}));i.cardMembers.splice(d,1);var l=c._id===t._id?"Left":"Removed"}else{i.cardMembers.push(t);l=c._id===t._id?"Join":"Added"}e.props.updateBoard(o,l,i,t.username)},e.isMemberOnCard=function(e,t){return e.cardMembers.some((function(e){return e._id===t}))},e.handleChange=function(t){var r=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{inputTxt:r.value}),(function(){var t=new RegExp(e.state.inputTxt,"i");e.setState(Object(x.a)(Object(x.a)({},e.state),{},{filteredMembers:e.props.board.boardMembers.filter((function(e){return t.test(e.fullname)}))}))}))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{board:t,currListIdx:r,currCardIdx:a,filteredMembers:t.boardMembers}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.board,a=t.currListIdx,n=t.currCardIdx,s=t.filteredMembers,c=t.inputTxt;if(!r||null===n||null===a)return Object(Ce.jsx)(Ce.Fragment,{});var o=r.lists[a].cards[n];return Object(Ce.jsxs)("section",{className:"members-popover",children:[Object(Ce.jsx)(we.a,{className:"search-members text-area-auto",placeholder:"Search members",type:"text",onChange:this.handleChange,value:c}),Object(Ce.jsx)("h3",{children:"Board Members"}),s.length?s.map((function(t){if("pandaguest"!==t.username)return Object(Ce.jsxs)("div",{className:"member-preview flex direction-row space-between ",onClick:function(){return e.toggleMember(t)},children:[Object(Ce.jsxs)("div",{className:"flex direction-row ",children:[Object(Ce.jsx)(ke.a,{className:"card-details-avatar",alt:t.fullname,src:t.imgUrl},t._id),Object(Ce.jsxs)("div",{className:"flex align-center",children:[t.fullname," (",t.username,")"]})]}),e.isMemberOnCard(o,t._id)&&Object(Ce.jsx)(Ie.a,{})]})})):Object(Ce.jsxs)(Ce.Fragment,{children:["Looks like that person isn't a member yet. ",Object(Ce.jsx)("br",{}),"Enter their email address to ",Object(Ce.jsx)("br",{}),"add them to the card and board."]})]})}}]),r}(n.a.Component);var Se={updateBoard:be},Te=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Se)(Be),De=r(44),Le=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,currLabel:"",filteredLabels:[],inputTxt:""},e.toggleLabel=function(t){var r=e.state,a=r.currListIdx,n=r.currCardIdx,s=Object(x.a)({},e.state.board),c=s.lists[a].cards[n];if(e.isLabelOnCard(c,t.id)){var o=c.cardLabelIds.findIndex((function(e){return e===t.id}));s.lists[a].cards[n].cardLabelIds.splice(o,1)}else s.lists[a].cards[n].cardLabelIds.push(t.id);e.props.updateBoard(s)},e.isLabelOnCard=function(e,t){return e.cardLabelIds.some((function(e){return e===t}))},e.editLabel=function(t){return function(r){r.stopPropagation();var a=e.props,n=a.changeTitle;(0,a.setUpdateLabel)({label:t,isCreat:!0}),n(!0,"Change label",t)}},e.createLabel=function(){e.props.changeTitle(!0,"Create label")},e.handleChange=function(t){var r=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{inputTxt:r.value}),(function(){var t=new RegExp(e.state.inputTxt,"i");e.setState(Object(x.a)(Object(x.a)({},e.state),{},{filteredLabels:e.props.board.labels.filter((function(e){return t.test(e.title)}))}))}))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{board:t,currListIdx:r,currCardIdx:a,filteredLabels:t.labels}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.board,a=t.currListIdx,n=t.currCardIdx,s=t.filteredLabels,c=t.inputTxt,o=this.props.labelsProps;if(!r||null===n||null===a)return Object(Ce.jsx)(Ce.Fragment,{});var i=r.lists[a].cards[n];return Object(Ce.jsx)("section",{className:"label-popover",children:!o.isCreate&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)(we.a,{className:"search-labels text-area-auto",placeholder:"Search labels...",type:"text",onChange:this.handleChange,value:c}),Object(Ce.jsx)("h4",{children:"Labels"}),s.length?s.map((function(t){return Object(Ce.jsxs)("div",{className:"edit-label-popover flex",onClick:function(){return e.toggleLabel(t)},children:[Object(Ce.jsxs)("div",{className:"edit-label-color "+t.color,children:[Object(Ce.jsx)("span",{children:t.title}),e.isLabelOnCard(i,t.id)&&Object(Ce.jsx)(Ie.a,{})]}),Object(Ce.jsx)("div",{onClick:e.editLabel(t),className:"edit-label-icon pointer",children:Object(Ce.jsx)(De.c,{})})]},t.id)})):Object(Ce.jsxs)(Ce.Fragment,{children:["Sorry no results... ",Object(Ce.jsx)("br",{}),"Maybe try to create a new label"]}),Object(Ce.jsx)("div",{className:"create-label pointer",onClick:this.createLabel,children:"Create a new label"})]})})}}]),r}(n.a.Component);var Ae={loadBoards:se,removeBoard:de,addBoard:ie,updateBoard:be,setUpdateLabel:pe},Me=Object(g.b)((function(e){return{board:e.boardReducer.board,labelsProps:e.boardReducer.labelsProps}}),Ae)(Le),Ee=r(247),Ue=r.n(Ee),Fe=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={date:null},e.handleDateSelect=function(t){var r=t.toString(),a=r.substring(8,10),n=r.substring(4,7),s=r.substring(11,15),c=r.substring(17,28),o="".concat(a," ").concat(n," ").concat(s," ").concat(c);e.setState(Object(x.a)(Object(x.a)({},e.state),{},{date:Date.parse(o)}))},e.onSaveDate=function(t){var r=e.props,a=r.board,n=r.currListIdx,s=r.currCardIdx,c=a.lists[n].cards[s];if(t)if(t&&c.duedate&&!c.duedate.date)o="Set due date";else o="Changed due date";else var o="Removed due date";c.dueDate={date:t,isDone:!1},e.props.updateBoard(a,o,c),e.props.handleClose()},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx,n=t.lists[r].cards[a],s=n.dueDate&&n.dueDate.date?n.dueDate.date:Date.now();this.setState({date:s})}},{key:"render",value:function(){var e=this,t=this.state.date;return t?Object(Ce.jsxs)("div",{className:"dates-popover",children:[Object(Ce.jsx)(Ue.a,{onSelect:this.handleDateSelect,startDate:Date.now(),openToDate:t,inline:!0,formatWeekDay:function(e){return e.substr(0,3)}}),Object(Ce.jsxs)("div",{className:" flex direction-col",children:[Object(Ce.jsx)("button",{className:"btn-date-save",onClick:function(){return e.onSaveDate(e.state.date)},children:"Save"}),Object(Ce.jsx)("button",{className:"btn-date-remove",onClick:function(){return e.onSaveDate(null)},children:"Remove"})]})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),r}(n.a.Component);var _e={loadBoards:se,removeBoard:de,addBoard:ie,updateBoard:be},Re=Object(g.b)((function(e){return{boards:e.boardReducer.boards}}),_e)(Fe),Pe=r(586),Ge=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,title:"Checklist"},e.handleChange=function(t){var r=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{title:r.value}))},e.onAddChecklist=function(t){t.preventDefault();var r=e.state,a=r.currListIdx,n=r.currCardIdx,s=r.title,c=r.board.lists[a].cards[n],o='Added checklist "'.concat(s,'"'),i=Object(x.a)({},e.state.board);i.lists[a].cards[n].checklists.push({checklistId:$.makeId(),title:s,tasks:[]}),e.props.updateBoard(i,o,c),e.props.handleClose()},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{board:t,currListIdx:r,currCardIdx:a}))}},{key:"render",value:function(){var e=this.state,t=e.board,r=e.currListIdx,a=e.currCardIdx,n=e.title;return t&&null!==a&&null!==r?Object(Ce.jsxs)("section",{className:"popover-checklist",children:[Object(Ce.jsx)("label",{children:"Title"}),Object(Ce.jsxs)("form",{onSubmit:this.onAddChecklist,children:[Object(Ce.jsx)("input",{className:"popover-checklist-input",name:"cardTitle",type:"text",onChange:this.handleChange,value:n}),Object(Ce.jsx)(Pe.a,{onClick:this.onAddChecklist,variant:"contained",className:"add-btn",children:"Add"})]})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),r}(n.a.Component);var He={updateBoard:be},qe=Object(g.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),He)(Ge),ze="dXZ90rFg6fkomwI0ttsljiR3C_o35DBKwIhHcoX6oow",We={getImgs:function(e){return Je.apply(this,arguments)}};function Je(){return Je=Object(O.a)(f.a.mark((function e(t){var r,a,n,s=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:10,t||(t="scenery",r++),e.next=4,C.a.get("https://api.unsplash.com/search/photos?query=".concat(t,"&per_page=").concat(r,"&orientation=landscape&client_id=").concat(ze));case 4:return a=e.sent,n=a.data.results.map((function(e){return{id:e.id,small:e.urls.small,full:"".concat(e.urls.full,"&auto=format&fit=crop&w=1920"),link:e.links.html,name:e.user.name}})),"scenery"===t&&n.shift(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}var Ke=r(101),Ve=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.props.getImgForCover(9)}},{key:"render",value:function(){var e=this.props,t=e.handleChange,r=e.searchCover,a=e.getImgForCover;return Object(Ce.jsxs)("div",{className:"search-cover",children:[Object(Ce.jsx)("div",{className:"search-cover-input",children:Object(Ce.jsx)(Ke.DebounceInput,{minLength:2,debounceTimeout:400,className:"search-cover-img text-area-auto",placeholder:"Search unsplash photo...",type:"text",onChange:t,value:r})}),Object(Ce.jsx)("h4",{children:"Suggested searches"}),Object(Ce.jsx)("div",{className:"suggested-keywords",children:["Animals","Business","Architect","Construction","Organization","Foundation","Minimal","Space","Perspective"].map((function(e,t){return Object(Ce.jsx)("button",{className:"suggested-search-btn",onClick:function(){a(12,e)},children:e},t)}))})]})}}]),r}(n.a.Component),Qe={uploadFile:function(e){var t="https://api.cloudinary.com/v1_1/".concat("looply","/image/upload"),r=new FormData;return r.append("file",e.target.files[0]),r.append("upload_preset","oxageyls"),fetch(t,{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){return{id:$.makeId(),fileName:e.original_filename,url:e.secure_url,createdAt:Date.now()}})).catch((function(e){return console.error(e)}))}};var Xe=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isCoverSelected:"selected",coverImgs:[],isSearch:!1,searchCover:""},e.onToggleCover=function(){var t=Object(O.a)(f.a.mark((function t(r){var a,n,s,c,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.currListIdx,s=a.currCardIdx,c=Object(x.a)({},e.state.board),o=c.lists[n].cards[s],e.isCoverOnCard(o,r.id)?c.lists[n].cards[s].cardStyle={}:c.lists[n].cards[s].cardStyle={id:r.id,color:r.color,isCover:!1},t.next=6,e.props.updateBoard(c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isCoverOnCard=function(e,t){return e.cardStyle.id===t},e.handelSize=function(t,r){var a=e.props.board;t.cardStyle.isCover=r,e.props.updateBoard(a)},e.onRemoveCover=function(t){var r=e.props.board;t.cardStyle={},e.props.updateBoard(r)},e.handleChange=function(t){var r=t.target.value;e.setState({searchCover:r},(function(){e.getImgForCover(12)}))},e.getImgForCover=function(){var t=Object(O.a)(f.a.mark((function t(r){var a,n,s,c=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",n=e.state.searchCover,a&&(n=a),t.next=5,We.getImgs(n,r);case 5:s=t.sent,e.setState(Object(x.a)(Object(x.a)({},e.state),{},{coverImgs:s}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleImgCover=function(t,r){var a=e.props.board;e.isCoverOnCard(t,r.id)?t.cardStyle={}:t.cardStyle={id:r.id,img:r.small,isCover:!1},e.props.updateBoard(a)},e.onAddImage=function(){var t=Object(O.a)(f.a.mark((function t(r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ae("Uploading..."),t.next=3,Qe.uploadFile(r);case 3:a=t.sent,e.onSaveCover(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveCover=function(t){var r=e.props,a=r.board,n=r.currListIdx,s=r.currCardIdx,c=a.lists[n].cards[s];e.isCoverOnCard(c,t.id)?c.cardStyle={}:c.cardStyle={id:t.id,img:t.url,isCover:!1},c.attachments.unshift(t),e.props.updateBoard(a),re("Uploading Photo")},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx;this.setState({board:t,currListIdx:r,currCardIdx:a}),this.getImgForCover(6)}},{key:"render",value:function(){var e=this,t=this.state,r=t.board,a=t.currListIdx,n=t.currCardIdx,s=t.coverImgs,c=t.searchCover,o=this.props,i=o.changeTitle,d=o.isSearch;if(!r||null===n||null===a)return Object(Ce.jsx)(Ce.Fragment,{});var l=r.lists[a].cards[n],u=l.cardStyle.isCover?"":"selected",b=l.cardStyle.isCover?"selected":"";return Object(Ce.jsxs)("section",{className:"popover-cover",children:[d&&Object(Ce.jsx)(Ve,{searchCover:c,getImgForCover:this.getImgForCover,handleChange:this.handleChange}),!d&&Object(Ce.jsx)("h4",{children:"Size"}),!d&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("div",{className:"header-cover",children:[Object(Ce.jsxs)("div",{onClick:function(){e.handelSize(l,!1)},className:"header-half-cover pointer  ".concat(u),children:[Object(Ce.jsx)("div",{className:"paragraph"}),Object(Ce.jsx)("div",{className:"row"}),Object(Ce.jsx)("div",{className:"row second"})]}),Object(Ce.jsxs)("div",{onClick:function(){e.handelSize(l,!0)},className:"header-full-cover pointer ".concat(b),children:[Object(Ce.jsx)("div",{className:"row full"}),Object(Ce.jsx)("div",{className:"row second full"})]})]}),l.cardStyle.id&&Object(Ce.jsx)("div",{className:"remove-cover btn",onClick:function(){e.onRemoveCover(l)},children:"Remove cover"})]}),!d&&Object(Ce.jsx)("h4",{className:"color-title",children:"Colors"}),!d&&Object(Ce.jsx)("div",{className:"color-plate",children:r.covers.length&&r.covers.map((function(t){return Object(Ce.jsx)("div",{onClick:function(){return e.onToggleCover(t)},className:"color-sqr pointer ".concat(t.color," \n                             ").concat(e.isCoverOnCard(l,t.id)?"color-selected":""," ")},t.id)}))}),!d&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h4",{children:"Attachment"}),Object(Ce.jsx)("label",{htmlFor:"file-input",children:Object(Ce.jsx)("div",{className:"uplaod-img btn pointer",children:"Upload a cover image"})}),Object(Ce.jsx)("input",{type:"file",className:"file-input",id:"file-input",onChange:this.onAddImage})]}),Object(Ce.jsxs)("div",{children:[!d&&Object(Ce.jsx)("h4",{children:"Unsplash"}),d&&Object(Ce.jsx)("h4",{children:"Top photos"}),Object(Ce.jsx)("div",{className:"cover-img-plate pointer",children:s.map((function(t){return Object(Ce.jsx)("div",{onClick:function(){return e.onToggleImgCover(l,t)},className:"img-cover ".concat(e.isCoverOnCard(l,t.id)?"cover-selected":""," "),style:{backgroundImage:"url(".concat(t.small,")")}},t.id)}))})]}),Object(Ce.jsx)("div",{className:"search-cover btn pointer",children:!d&&Object(Ce.jsx)("span",{onClick:function(){i(!0,"change cover")},children:"Search for photos"})})]})}}]),r}(n.a.Component);var Ye={loadBoards:se,removeBoard:de,addBoard:ie,updateBoard:be},Ze=Object(g.b)((function(e){return{boards:e.boardReducer.boards}}),Ye)(Xe),$e=r(102),et=r.n($e),tt=r(252),rt=r.n(tt),at=r(144),nt=r.n(at),st=r(253),ct=r.n(st),ot=r(254),it=r.n(ot),dt=r(251),lt=r.n(dt),ut=r(145),bt=r.n(ut),jt=r(256),ht=r.n(jt),pt=r(257),ft=r.n(pt),Ot=r(255),mt=r.n(Ot),gt=r.p+"static/media/menu-arrow-icon.4d02ed18.svg";function xt(e){var t=e.labelId,r=e.boardLabels,a=(e.type,r.find((function(e){return e.id===t})));return Object(Ce.jsx)("div",{className:"".concat(a.color," label pointer"),children:a.title})}var vt=r(579),Ct=r(250),yt=r.n(Ct),kt=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleDone=function(t){t.stopPropagation(),e.props.onToggleDone()},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.dueDate;return Object(Ce.jsxs)("div",{className:"due-date-preview",children:[Object(Ce.jsx)("h3",{children:"Due Date"}),Object(Ce.jsxs)("div",{className:"date-display flex direction-row",children:[Object(Ce.jsx)(vt.a,{checked:e.isDone,onClick:this.onToggleDone}),Object(Ce.jsxs)("div",{className:" gray hover flex direction-row align-center",children:[Object(Ce.jsx)("div",{className:"date",children:new Date(e.date).toString().substring(0,16)}),e.isDone&&Object(Ce.jsx)("div",{className:"status done",children:"COMPLETE"}),!e.isDone&&e.date<Date.now()&&Object(Ce.jsx)("div",{className:"status overdue",children:"OVERDUE"}),Object(Ce.jsx)(yt.a,{})]})]})]})}}]),r}(n.a.Component),Nt=r(258),It=r.n(Nt),wt=r(259),Bt=r.n(wt),St=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.type,a=t.loggedInUser,n=function(t){switch(t.type){case"members":case"change members":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(et.a,{}),t.title]});case"add-members":case"add-labels":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(lt.a,{})});case"list actions":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(De.d,{})});case"labels":case"edit labels":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(rt.a,{})," ",t.title]});case"labels-preview":return Object(Ce.jsx)(xt,Object(x.a)({},t));case"checklist":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(nt.a,{})," Checklist"]});case"dates":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(ct.a,{}),t.title]});case"dates-edit":case"edit-dates":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(kt,Object(x.a)({},t))," "]});case"attachments":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(bt.a,{className:"attachment-icon"})," Attachments"]});case"add-attachments":return Object(Ce.jsx)(Ce.Fragment,{children:"Add an attachment"});case"cover":case"change cover":return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(it.a,{})," ",Object(Ce.jsx)("span",{children:t.title})]});case"delete-card":return Object(Ce.jsxs)(Ce.Fragment,{children:[" ",Object(Ce.jsx)(mt.a,{})," Delete"]});case"move-card":return Object(Ce.jsxs)(Ce.Fragment,{children:[" ",Object(Ce.jsx)(ht.a,{}),"  Move"]});case"copy-card":return Object(Ce.jsxs)(Ce.Fragment,{children:[" ",Object(Ce.jsx)(ft.a,{})," Copy"]});case"userMenu":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(ke.a,{alt:"",src:a.imgUrl,className:"logged-in-avatar",children:Object(Ce.jsx)("p",{children:a.initials})})});case"boardMember":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)("span",{className:"board-member-btn"})});case"userBoards":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("span",{onClick:function(){return t.onToggle()},children:[Object(Ce.jsx)("span",{children:"Boards"}),Object(Ce.jsx)("img",{src:gt,alt:""})]})});case"starredBoards":return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("span",{onClick:function(){return t.onToggle()},children:[Object(Ce.jsx)("span",{children:"Starred"}),Object(Ce.jsx)("img",{src:gt,alt:""})]})});case"newNotif":return Object(Ce.jsxs)("div",{className:"unread-notif flex",children:[" ",Object(Ce.jsx)(It.a,{})," ",Object(Ce.jsx)("div",{className:"notif-background",children:Object(Ce.jsx)("span",{className:"notif-count",children:e.props.notifCount})})]});case"noNotif":return Object(Ce.jsx)(Bt.a,{});case"invite":return Object(Ce.jsxs)(Ce.Fragment,{children:[" ",Object(Ce.jsx)("span",{className:"invite",children:"Invite"})]});default:return t.type}};return Object(Ce.jsx)(n,Object(x.a)({type:r},this.props))}}]),r}(n.a.Component);var Tt=Object(g.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount}}))(St);var Dt=Object(g.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}))((function(e){var t=e.user;return Object(Ce.jsxs)("div",{className:"user-info flex",children:[Object(Ce.jsx)(ke.a,{alt:"",src:t.imgUrl,className:"user-avatar",children:Object(Ce.jsx)("p",{children:t.initials})}),Object(Ce.jsxs)("div",{className:"user-name-info",children:[Object(Ce.jsx)("p",{className:"fullname",children:t.fullname}),Object(Ce.jsx)("p",{className:"username",children:t.username})]})]})})),Lt=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onLogout=Object(O.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onLogout();case 2:e.props.history.push("/");case 3:case"end":return t.stop()}}),t)}))),e.onRemoveFromBoard=function(t){var r=e.props.board.boardMembers.findIndex((function(e){return e._id===t})),a=Object(x.a)({},e.props.board);a.boardMembers.splice(r,1),e.props.updateBoard(a,"removed ".concat(e.props.user.fullname," from the board")),e.props.handleClose()},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.user,a=t.from;return r?Object(Ce.jsxs)("div",{className:"user-menu popover-content",children:[Object(Ce.jsx)(Dt,{user:r,handleClose:this.props.handleClose}),"AppHeader"===a&&Object(Ce.jsx)("div",{children:Object(Ce.jsx)("button",{onClick:this.onLogout,children:"Logout"})}),"BoardHeader"===a&&Object(Ce.jsx)("button",{className:"remove-member-btn",onClick:function(){return e.onRemoveFromBoard(r._id)},children:"Remove from board"})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),r}(n.a.Component);var At={onLogout:function(){return function(e){G.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){console.log("Cannot logout",e)}))}},updateBoard:be},Mt=Object(h.f)(Lt),Et=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),At)(Mt),Ut=r(585),Ft=r(587),_t=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props,t=e.activity,r=e.display;return Object(Ce.jsxs)("div",{className:"activity-preview flex direction-row",children:[Object(Ce.jsx)(ke.a,{className:"card-details-avatar",alt:t.byMember.fullname,src:t.byMember.imgUrl},t.byMember._id),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("h4",{children:[t.byMember.fullname," ",t.action," ",t.txt,"menu"===r&&t.card.cardTitle&&'on card: "'.concat(t.card.cardTitle,'"')]}),Object(Ce.jsxs)("small",{children:[" ",new Date(t.createdAt).toString().substring(0,16)]})]})]})}}]),r}(n.a.Component);function Rt(e){var t=e.board;return Object(Ce.jsx)(Ce.Fragment,{children:t.activities.length&&t.activities.map((function(e){return Object(Ce.jsx)(_t,{activity:e,display:"menu"},e.id)}))})}var Pt=r.p+"static/media/close.e9203ba4.svg";function Gt(e){var t=e.board,r=e.toggleMenu,n=e.isMenuOpen,s=function(e,t){return function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&(r(),console.log("toggle menu"))}},c="right";return Object(Ce.jsx)("div",{className:"menu-visible",children:Object(Ce.jsxs)(a.Fragment,{children:[Object(Ce.jsx)(Pe.a,{onClick:s(),children:c}),Object(Ce.jsx)(Ut.a,{anchor:c,open:n,hideBackdrop:!0,children:Object(Ce.jsxs)("div",{className:"menu-wrapper",children:[Object(Ce.jsx)("div",{className:"menu-screen",onClick:s()}),Object(Ce.jsxs)("div",{className:"board-menu-content",children:[Object(Ce.jsxs)("div",{className:"board-menu-content-header flex",children:[Object(Ce.jsx)("div",{className:"title",children:Object(Ce.jsx)("h3",{children:"Menu"})}),Object(Ce.jsx)("span",{className:"exit-icon",onClick:s(),children:Object(Ce.jsx)("img",{src:Pt,alt:"Close"})})]}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsxs)("div",{className:"menu-content fancy-scrollbar",children:[Object(Ce.jsx)("div",{className:"board-actions",children:Object(Ce.jsx)("button",{className:"menu-action-btn",children:"Change background"})}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsx)("div",{className:"activities",children:Object(Ce.jsx)(Rt,{board:t})})]})]})]})})]},c)})}var Ht=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,urlLink:""},e.onAddAttach=function(){var t=Object(O.a)(f.a.mark((function t(r){var a,n,s,c,o,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ae("Uploading..."),t.next=3,Qe.uploadFile(r);case 3:a=t.sent,n=e.props,s=n.board,c=n.currListIdx,o=n.currCardIdx,(i=s.lists[c].cards[o]).attachments.unshift(a),e.props.updateBoard(s,"Attached",i),e.props.handleClose(),re("Uploading Complete");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx;this.setState({board:t,currListIdx:r,currCardIdx:a})}},{key:"render",value:function(){var e=this.state,t=e.board,r=e.currListIdx,a=e.currCardIdx;e.urlLink;return t&&null!==a&&null!==r?Object(Ce.jsxs)("section",{className:"popover-attachment flex direction-col",children:[Object(Ce.jsx)("label",{htmlFor:"file-upload",children:"Computer"}),Object(Ce.jsx)("input",{id:"file-upload",type:"file",onChange:this.onAddAttach})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),r}(n.a.Component);var qt={loadBoards:se,removeBoard:de,addBoard:ie,updateBoard:be},zt=Object(g.b)((function(e){return{board:e.boardReducer.board}}),qt)(Ht);function Wt(e){var t=e.onDeleteCard;return Object(Ce.jsxs)("section",{className:"delete-card-popover",children:[Object(Ce.jsxs)("p",{children:["All actions will be removed from the activity ",Object(Ce.jsx)("br",{}),"feed and you won\u2019t be able to re-open the ",Object(Ce.jsx)("br",{}),"card. There is no undo."]}),Object(Ce.jsx)("button",{onClick:t,children:"Delete"})]})}var Jt=r(20),Kt=r(577),Vt=r(588),Qt=r(573),Xt=r(580),Yt=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={listIdx:0,cardIdx:0,title:""},e.handleChange=function(t){var r=t.target,a=r.name,n=r.value;e.setState(Object(Jt.a)({},a,n))},e.onMoveCard=function(t){var r,a=e.props.board,n=e.state,s=n.listIdx,c=n.cardIdx,o=n.title,i=a.lists[s].listId;a.lists.forEach((function(e){e.cards.forEach((function(r,a){r.cardId===t.cardId&&e.cards.splice(a,1)})),e.listId===i?(e.cards.splice(c,0,t),r="Moved card ".concat(o)):r="copied card ".concat(o)})),e.props.history.push("/boards/".concat(a._id)),e.props.updateBoard(a,r,t)},e.onCopyCard=function(){var t=e.props.currCard;if(e.state.title){var r=JSON.parse(JSON.stringify(t));r.cardId=$.makeId(),r.cardTitle=e.state.title,e.onMoveCard(r)}},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currListIdx,r=e.currCardIdx,a=e.currCard;this.setState({listIdx:t,cardIdx:r,title:a.cardTitle})}},{key:"render",value:function(){var e=this,t=this.props,r=t.board,a=t.isCopy,n=this.state,s=n.listIdx,c=n.cardIdx,o=n.title,i=r.lists[s].cards;return Object(Ce.jsxs)("section",{className:"move-copy-card-popover flex direction-col",children:[Object(Ce.jsxs)("div",{className:"board-title",children:[Object(Ce.jsx)("h4",{children:"Board:"}),Object(Ce.jsx)("h4",{children:r.boardTitle})]}),a&&Object(Ce.jsxs)("div",{className:"card-title flex direction-col",children:[Object(Ce.jsx)("label",{htmlFor:"title",children:Object(Ce.jsx)("h4",{children:"Title:"})}),Object(Ce.jsx)(we.a,{id:"title",name:"title",className:"text-area-auto",type:"text",placeholder:"Title",onChange:this.handleChange,value:o,autoFocus:!0})]}),Object(Ce.jsx)("h4",{className:"copy-to",children:"copy to..."}),Object(Ce.jsxs)("div",{className:"list-position flex diirection-row space-between",children:[Object(Ce.jsxs)(Qt.a,{variant:"standard",children:[Object(Ce.jsx)(Vt.a,{id:"list",children:"List"}),Object(Ce.jsx)(Kt.a,{label:"List",labelId:"list",id:"select-list",value:s,name:"listIdx",onChange:this.handleChange,children:r.lists.map((function(e,t){return Object(Ce.jsx)(Xt.a,{value:t,children:e.listTitle})}))})]}),Object(Ce.jsxs)(Qt.a,{variant:"standard",children:[Object(Ce.jsx)(Vt.a,{id:"position",children:"Position"}),Object(Ce.jsx)(Kt.a,{labelId:"position",id:"select-position",value:c,name:"cardIdx",onChange:this.handleChange,children:i.length?i.map((function(e,t){return Object(Ce.jsx)(Xt.a,{value:t,children:t?t+1:1})})):Object(Ce.jsx)(Xt.a,{value:0,children:"1"})})]})]}),!a&&Object(Ce.jsx)("button",{onClick:function(){return e.onMoveCard(e.props.currCard)},children:"Move"}),a&&Object(Ce.jsx)("button",{onClick:this.onCopyCard,children:"Create card"})]})}}]),r}(n.a.Component);var Zt={updateBoard:be},$t=Object(h.f)(Yt),er=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Zt)($t),tr=r(36),rr=r(81),ar=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).toggleStar=function(t,r){t.stopPropagation();var a=e.props,n=a.loggedInUser;(0,a.updateBoard)(G.toggleStarBoard(r,n._id)),console.log("updated star board")},e.getBoardBtns=function(t){return console.log("this.props:",e.props),t.map((function(t){var r=$.getFormattedBgStyle(t.boardStyle);return Object(Ce.jsxs)("div",{className:"board-menu-btn flex align-center",children:[Object(Ce.jsxs)(tr.b,{className:"flex align-center",to:"/boards/".concat(t._id),onClick:function(){return e.props.handleClose()},children:[Object(Ce.jsx)("span",{className:"board-bg",style:r}),Object(Ce.jsx)("p",{children:t.boardTitle})]},t._id),"starredBoards"===e.props.type?Object(Ce.jsx)("button",{className:"star-board",onClick:function(r){return e.toggleStar(r,t)},children:Object(Ce.jsx)(rr.a,{})}):Object(Ce.jsx)(Ce.Fragment,{})]},t._id)}))},e.getfilteredBoards=function(t){var r=e.props,a=r.boards,n=r.loggedInUser;return G.filterUserBoards(a,n._id,t)},e.goToBoard=function(t){e.props.handleClose(),e.props.history.push("/boards/".concat(t))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.loggedInUser,a=t.boards,!r||a.length){e.next=4;break}return e.next=4,this.props.loadBoards(r._id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.type,t="userBoards"===e?this.getfilteredBoards("owner"):this.getfilteredBoards("starred"),r="userBoards"===e?this.getfilteredBoards("guest"):[];return t.length||r.length?Object(Ce.jsxs)("div",{className:"user-boards-popover",children:["userBoards"===e&&Object(Ce.jsxs)(Ce.Fragment,{children:[t.length?Object(Ce.jsxs)("div",{className:"owner-section",children:[Object(Ce.jsx)("h4",{children:"Your Boards"}),Object(Ce.jsx)("div",{className:"owned-boards",children:this.getBoardBtns(t)})]}):Object(Ce.jsx)(Ce.Fragment,{}),r.length?Object(Ce.jsxs)("div",{className:"guest-section",children:[Object(Ce.jsx)("h4",{children:"Guest Boards"}),Object(Ce.jsx)("div",{className:"guest-boards",children:this.getBoardBtns(r)})]}):Object(Ce.jsx)(Ce.Fragment,{})]}),"starredBoards"===e?Object(Ce.jsx)("div",{className:"starred-section",children:Object(Ce.jsx)("div",{className:"starred-boards",children:this.getBoardBtns(t)})}):Object(Ce.jsx)(Ce.Fragment,{})]}):Object(Ce.jsx)("div",{className:"no-boards",children:"No".concat("starredBoards"===e?" starred":""," boards yet...")})}}]),r}(n.a.Component);var nr={loadBoards:se,updateBoard:be},sr=Object(g.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),nr)(ar),cr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onNotifClick=function(t){var r=e.props.board,a=r.lists.find((function(e){return e.cards.find((function(e){return e.cardId===t}))}));a?e.props.history.push("/boards/".concat(r._id,"/").concat(a.listId,"/").concat(t)):e.props.history.push("/cardNotFound"),e.props.handleClose()},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.board,a=t.notifCount,n=t.loggedInUser;if(!r._id)return Object(Ce.jsx)("div",{children:"Enter a board to see your notifications"});var s=r.activities.filter((function(e){return e.isNotif&&e.byMember._id!==n._id}));return Object(Ce.jsx)("div",{className:"notif-popover fancy-scrollbar flex align-center direction-col",children:s.length?s.map((function(t,s){return Object(Ce.jsx)("div",{onClick:function(){return e.onNotifClick(t.card.cardId)},className:"notif-allert ".concat(s<a?"unread":""),children:Object(Ce.jsx)("div",{className:"notif pointer",children:Object(Ce.jsxs)("div",{className:"notif-content",children:[Object(Ce.jsxs)("div",{className:"notif-card-titles flex direction-col",style:{backgroundImage:"url(".concat(r.boardStyle.small,")")},children:[Object(Ce.jsx)("span",{className:"notif-card-title",children:Object(Ce.jsx)("span",{className:"notif-card-txt",children:t.card.cardTitle})}),Object(Ce.jsx)("span",{className:"notif-card-board-title",children:r.boardTitle})]}),Object(Ce.jsxs)("div",{className:"notif-member-section flex",children:[Object(Ce.jsx)(ke.a,{className:"notif-avatar flex align-center",alt:t.byMember.fullname,src:t.byMember.imgUrl},t.byMember._id),Object(Ce.jsx)("span",{className:"notif-member-name",children:t.byMember.fullname})]}),Object(Ce.jsx)("div",{className:"notif-action-section flex",children:Object(Ce.jsxs)("div",{className:"notif-action",children:[Object(Ce.jsxs)("span",{children:[t.action,"Added"===t.action?n.username===t.txt?Object(Ce.jsx)("span",{children:" you"}):Object(Ce.jsxs)("span",{children:[" ","  ".concat(t.txt)," "]}):"Removed"===t.action&&n.username===t.txt?Object(Ce.jsx)("span",{children:" you"}):Object(Ce.jsxs)("span",{children:[" ","  ".concat(t.txt)," "]})]}),Object(Ce.jsxs)("small",{className:"notif-date",children:[" ",new Date(t.createdAt).toString().substring(0,16)]})]})})]})})})})):Object(Ce.jsx)("div",{children:"Sorry... no new notifications to show"})})}}]),r}(n.a.Component);var or={setNotif:he,setNotifCount:function(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_NOTIF_COUNT",count:e})}catch(a){console.log("Cannot update notification",a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ir=Object(h.f)(cr),dr=Object(g.b)((function(e){return{board:e.boardReducer.board,isNotif:e.boardReducer.isNotif,loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount}}),or)(ir),lr=r(148),ur=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={labelName:"",labelColor:"",isDelete:!1,labelsColor:[]},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onSaveLabel();var r=t.target.value;e.setState({labelName:r})},e.onSaveLabel=function(){var t=e.state,r=t.labelName,a=t.labelColor,n=e.props,s=n.labelsProps,c=n.board,o=s.label;o.title||o.color?(o.title=r||o.title,o.color=a||o.color):c.labels.push({id:$.makeId(),title:r,color:a}),s.label={},e.props.setUpdateLabel(s),e.props.updateBoard(c),e.props.changeTitle(!1,"labels-preview")},e.labelChoose=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{labelColor:t}))},e.deleteLabel=function(){var t=e.props,r=t.labelsProps,a=t.board,n=r.label,s=a.labels.findIndex((function(e){return e.id===n.id}));a.labels.splice(s,1),e.props.updateBoard(a),e.props.changeTitle(!1,"labels-preview")},e.confirmDeleteLabel=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isDelete:!e.state.isDelete}))},e.createLabelsArr=function(){for(var t=[],r=1,a=0;a<11;a++)t.push("clr"+r++);e.setState(Object(x.a)(Object(x.a)({},e.state),{},{labelsColor:t}))},e.isLabelChoosen=function(t){return t===e.state.labelColor},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.labelsProps.label;this.createLabelsArr(),e&&this.setState({labelName:e.title})}},{key:"render",value:function(){var e=this,t=this.state,r=t.isDelete,a=t.labelsColor,n=t.labelName,s=this.props.labelsProps;return Object(Ce.jsxs)("div",{className:"labels-board",children:[!r&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("label",{className:"edit-labels-label",children:"Name"}),Object(Ce.jsx)(we.a,{className:"text-area-auto label-input",value:n,"aria-label":"empty textarea",onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(Ce.jsx)("label",{className:"edit-labels-label",children:"Select a color"}),Object(Ce.jsxs)("div",{className:"color-plate",children:[a.map((function(t){return Object(Ce.jsx)("div",{className:"color-sqr pointer + ".concat(t),onClick:function(){return e.labelChoose(t)},children:e.isLabelChoosen(t)&&Object(Ce.jsx)(Ie.a,{})},t.id)})),Object(Ce.jsx)("p",{className:"label-no-color",children:"No color"})]}),Object(Ce.jsxs)("div",{className:"edit-labels-actions flex space-between",children:[Object(Ce.jsx)("div",{className:"edit-labels-btn save pointer",onClick:this.onSaveLabel,children:"Save"}),s.label&&Object(Ce.jsx)("div",{className:"edit-labels-btn delete pointer",onClick:this.confirmDeleteLabel,children:"Delete"})]})]}),r&&Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("p",{className:"edit-label-delete",children:"There is no undo. This will remove this label from all cards and destroy its history."}),Object(Ce.jsx)("div",{className:"edit-labels-btn delete deleted pointer",onClick:this.deleteLabel,children:"Delete"})]})]})}}]),r}(n.a.Component);var br={updateBoard:be,setUpdateLabel:pe},jr=Object(g.b)((function(e){return{boards:e.boardReducer.boards,labelsProps:e.boardReducer.labelsProps}}),br)(ur),hr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={users:[],inputTxt:"",filteredUsers:[]},e.handleChange=function(t){var r=t.target,a=new RegExp(e.state.inputTxt,"i"),n=e.state.users.filter((function(e){return a.test(e.fullname)}));e.setState(Object(x.a)(Object(x.a)({},e.state),{},{inputTxt:r.value,filteredUsers:n}))},e.isMemberInBoard=function(t){return e.props.board.boardMembers.some((function(e){return e._id===t}))},e.addUser=function(t){if(!e.isMemberInBoard(t._id)){var r=Object(x.a)({},e.props.board);r.boardMembers.push(t),e.props.updateBoard(r,"invited ".concat(t.fullname," to the board")),e.props.handleClose()}},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getUsers();case 2:t=e.sent,r=this.props.loggedInUser,t.sort((function(e,t){return e.fullname.localeCompare(t.fullname)})),a=t.filter((function(e){return e._id!==r._id})),this.setState({users:t,filteredUsers:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.users,a=t.inputTxt,n=t.filteredUsers;return r.length?Object(Ce.jsxs)("div",{className:"invite-users",children:[Object(Ce.jsx)(we.a,{className:"search-users text-area-auto",placeholder:"Search users",type:"text",onChange:this.handleChange,value:a}),n.map((function(t){return Object(Ce.jsxs)("button",{className:"user-preview flex align-center space-between ",onClick:function(){return e.addUser(t)},children:[Object(Ce.jsxs)("span",{className:"flex direction-row ",children:[Object(Ce.jsx)(ke.a,{className:"avatar",src:t.imgUrl,children:Object(Ce.jsx)("p",{children:t.initials})}),Object(Ce.jsx)("span",{className:"name flex align-center",children:t.fullname})]}),e.isMemberInBoard(t._id)&&Object(Ce.jsx)("span",{children:Object(Ce.jsx)(Ie.a,{})})]},t._id)}))]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),r}(n.a.Component);var pr={updateBoard:be},fr=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),pr)(hr),Or=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={anchorEl:null,isEditLabel:!1,newTitle:"",isChangeTitle:!1,currLabel:"",isSearch:!1},e.handleClick=function(t){t.preventDefault(),e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){"userBoards"!==e.props.type&&"starredBoards"!==e.props.type||e.props.onToggle(),e.setState({anchorEl:null}),e.props.markReadNotif&&e.props.markReadNotif()},e.handleDateChange=function(){console.log("im in DynamicPopover.handleDateChange")},e.changeTitle=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("change cover"===r)var n=!0;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{newTitle:r,isChangeTitle:t,currLabel:a,isSearch:n}))},e.handleBack=function(){if("cover"===e.props.titleModal)var t=!0;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isChangeTitle:!e.state.isChangeTitle,newTitle:e.props.titleModal,isSearch:t}))},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.type,a=t.titleModal,s=this.state,c=s.anchorEl,o=s.isChangeTitle,i=s.newTitle,d=s.currLabel,l=s.isSearch,u=Boolean(c),b=o?i:a,j=u?"simple-popover":void 0,h=function(t){switch(t.type){case"members":case"add-members":case"change members":return Object(Ce.jsx)(Te,Object(x.a)({},t));case"list actions":return Object(Ce.jsx)(ye,Object(x.a)({},t));case"labels":case"edit labels":if(o)return Object(Ce.jsx)(jr,Object(x.a)({},t));case"add-labels":case"labels-preview":return o?Object(Ce.jsx)(jr,Object(x.a)({},t)):Object(Ce.jsx)(Me,Object(x.a)({},t));case"dates-edit":case"edit-dates":case"dates":return Object(Ce.jsx)(Re,Object(x.a)({},t));case"attachments":case"add-attachments":return Object(Ce.jsx)(zt,Object(x.a)({},t));case"cover":case"change cover":return Object(Ce.jsx)(Ze,Object(x.a)({},t));case"checklist":return Object(Ce.jsx)(qe,Object(x.a)({},t));case"boardMember":case"userMenu":return Object(Ce.jsx)(Et,Object(x.a)({},t));case"userBoards":case"starredBoards":return Object(Ce.jsx)(sr,Object(x.a)(Object(x.a)({},t),{},{handleClose:e.handleClose}));case"boardMenu":return Object(Ce.jsx)(Gt,Object(x.a)({},t));case"delete-card":return Object(Ce.jsx)(Wt,Object(x.a)({},t));case"move-card":return Object(Ce.jsx)(er,Object(x.a)({},t));case"copy-card":return Object(Ce.jsx)(er,Object(x.a)(Object(x.a)({},t),{},{isCopy:!0}));case"newNotif":case"noNotif":return Object(Ce.jsx)(dr,Object(x.a)({},t));case"invite":return Object(Ce.jsx)(fr,Object(x.a)({},t))}};return Object(Ce.jsxs)(n.a.Fragment,{children:[Object(Ce.jsx)("button",{onClick:this.handleClick,children:Object(Ce.jsx)(Tt,Object(x.a)({type:r},this.props))}),Object(Ce.jsxs)(ve.a,{className:r,id:j,open:u,anchorEl:c,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[Object(Ce.jsxs)("div",{className:"popover-header-title flex",children:[o&&Object(Ce.jsx)("span",{onClick:this.handleBack,className:"back-icon pointer",children:Object(Ce.jsx)(lr.a,{})}),Object(Ce.jsx)("span",{children:b}),Object(Ce.jsx)("button",{className:"close-popover",onClick:this.handleClose})]}),Object(Ce.jsx)("div",{className:"popover-content-container",children:Object(Ce.jsx)(h,Object(x.a)(Object(x.a)({type:r,currLabel:d,isSearch:l,changeTitle:this.changeTitle},this.props),{},{handleClose:this.handleClose}))})]})]})}}]),r}(n.a.Component),mr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={anchorEl:null,currListIdx:null,currCardIdx:null},e.handleClick=function(t){t.preventDefault(),t.stopPropagation(),e.setState({anchorEl:t.currentTarget})},e.handleClose=function(t){e.setState({anchorEl:null}),t.stopPropagation()},e.removeMember=function(t){return function(r){r.stopPropagation();var a=e.props.board,n=e.props,s=n.currCard,c=n.loggedInUser,o=s.cardMembers.findIndex((function(e){return e._id===t._id}));s.cardMembers.splice(o,1);var i=c._id===t._id?"Left":"Removed";e.props.updateBoard(a,i,s,t.username)}},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currListIdx,r=e.currCardIdx;this.setState({currListIdx:t,currCardIdx:r})}},{key:"render",value:function(){var e=this.props.member,t=this.state.anchorEl,r=Boolean(t),a=r?"simple-popover":void 0;return Object(Ce.jsxs)("div",{className:"single-member-popover",children:[Object(Ce.jsx)("span",{className:"btn-photo-member",onClick:this.handleClick,children:Object(Ce.jsx)(ke.a,{className:"card-details-avatar hover",src:e.imgUrl,children:Object(Ce.jsx)("p",{children:e.initials})})}),Object(Ce.jsxs)(ve.a,{id:a,open:r,anchorEl:t,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[Object(Ce.jsxs)("div",{className:"single-member-popover-header-title flex direction-row",children:[Object(Ce.jsxs)("div",{className:"single-member-title flex direction-row",children:[Object(Ce.jsx)(ke.a,{src:e.imgUrl,className:"avatar",children:Object(Ce.jsx)("p",{children:e.initials})}),Object(Ce.jsxs)("div",{className:"user-name-info",children:[Object(Ce.jsx)("h4",{className:"fullname",children:e.fullname}),Object(Ce.jsxs)("p",{className:"username",children:["@",e.username]})]})]}),Object(Ce.jsx)("button",{className:"close-popover",onClick:this.handleClose,children:"X"})]}),Object(Ce.jsx)("div",{className:"popover-content-container",children:Object(Ce.jsx)("div",{className:"remove-from-card pointer",onClick:this.removeMember(e),children:"Remove from card"})})]})]})}}]),r}(a.Component);var gr={updateBoard:be},xr=Object(g.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,board:e.boardReducer.board}}),gr)(mr);function vr(e){var t=e.members,r=e.board,a=e.currListIdx,n=e.currCardIdx,s=e.isCardOpen,c=e.currCard;return Object(Ce.jsxs)("div",{className:"members-list flex direction-row",children:[Object(Ce.jsx)(xe.a,{max:15,className:"members-group",children:t.map((function(e){if("pandaguest"!==e.username)return Object(Ce.jsx)(xr,{member:e,currListIdx:a,currCardIdx:n,currCard:c},e._id)}))}),s&&Object(Ce.jsx)(Or,{type:"add-members",titleModal:"Members",board:r,currListIdx:a,currCardIdx:n})]})}function Cr(e){var t=e.checklists.reduce((function(e,t){return e.taskCount+=t.tasks.length,t.tasks.forEach((function(t){t.isDone&&e.taskCountDone++})),e}),{taskCount:0,taskCountDone:0}),r=t.taskCount,a=t.taskCountDone,n=r===a?"done":"";return Object(Ce.jsxs)("div",{className:"badge flex align-center ".concat(n),children:[Object(Ce.jsx)("span",{className:"badge-icon checkbox flex align-center  ".concat(n),children:Object(Ce.jsx)(De.b,{className:"card-icon"})}),Object(Ce.jsxs)("span",{className:"card-txt",children:[" ",a+"/"+r," "]})]})}var yr=r(266),kr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleLabel=function(t){t.preventDefault(),t.stopPropagation(),e.props.toggleLabels()},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props,t=e.labelId,r=e.boardLabels,a=this.props.isLabelOpen?" label-preview-open":"",n=r.find((function(e){return e.id===t}));return"clr11"===n.color?Object(Ce.jsx)(Ce.Fragment,{children:" "}):Object(Ce.jsx)("div",{onClick:this.onToggleLabel,className:"".concat(n.color," label-card").concat(a),children:a&&n.title})}}]),r}(n.a.Component);var Nr={toggleLabels:le},Ir=Object(g.b)((function(e){return{isLabelOpen:e.boardReducer.isLabelOpen}}),Nr)(kr),wr=r(263),Br=r.n(wr),Sr=r(261),Tr=r(262),Dr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleDone=function(t){t.stopPropagation(),t.preventDefault();var r=e.props.card;r.dueDate.isDone=!r.dueDate.isDone,e.props.updateBoard(e.props.board)},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.dueDate,t=e.isDone?"done":"",r=!e.isDone&&e.date<Date.now()?"overdue":"";return Object(Ce.jsxs)("div",{className:"badge due-date flex align-center ".concat(t," ").concat(r),onClick:this.onToggleDone,children:[!e.isDone&&Object(Ce.jsx)("span",{className:"check",children:Object(Ce.jsx)(Sr.a,{})}),e.isDone&&Object(Ce.jsxs)("span",{className:"check",children:[" ",Object(Ce.jsx)(Tr.a,{})," "]}),Object(Ce.jsxs)("span",{className:"clock",children:[Object(Ce.jsx)(Br.a,{})," "]}),Object(Ce.jsx)("span",{className:"date",children:new Date(e.date).toString().substring(3,10)})]})}}]),r}(n.a.Component);function Lr(e){var t=e.board,r=e.currListIdx,a=e.currCardIdx,n=e.currCard,s=(e.OnUpdateBoard,e.onArchive);return Object(Ce.jsxs)("div",{className:"quick-card-actions fade-in",children:[Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsx)(Or,{type:"edit labels",title:"Edit labels",titleModal:"Labels",board:t,currListIdx:r,currCardIdx:a})]}),Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsx)(Or,{type:"change members",title:"Change members",titleModal:"Members",board:t,currListIdx:r,currCardIdx:a})]}),Object(Ce.jsx)("span",{className:"quick-card-actions-btn",children:Object(Ce.jsx)(Or,{type:"change cover",title:"Change cover",titleModal:"Cover",board:t,currListIdx:r,currCardIdx:a})}),Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsx)(Or,{type:"move-card",titleModal:"Move Card",board:t,currListIdx:r,currCardIdx:a,currCard:n})]}),Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsx)(Or,{type:"copy-card",titleModal:"Copy Card",board:t,currListIdx:r,currCardIdx:a,currCard:n})]}),Object(Ce.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(Ce.jsxs)("button",{onClick:s,children:[Object(Ce.jsx)(De.a,{})," Archive"]})]})]})}var Ar=r.p+"static/media/close-edit-card.56748bb7.svg",Mr=r(264),Er=r(265);function Ur(e){var t=e.type,r=e.cardCommAttach;return Object(Ce.jsxs)("div",{className:"badge flex align-center",children:[Object(Ce.jsxs)("span",{className:"badge-icon flex align-center",children:["comment"===t&&Object(Ce.jsx)(Mr.a,{}),"attachment"===t&&Object(Ce.jsx)(Er.a,{})]}),Object(Ce.jsx)("span",{className:"card-txt",children:r.reduce((function(e,t){return++e}),0)})]})}var Fr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cardTitle:"",isEditTitle:!1,isEditMode:!1,rect:null},e.toggleEditTitle=function(t){if(t){t.stopPropagation(),t.preventDefault();var r=t.target.getBoundingClientRect();r.x=r.x-256}e.props.onEditMode();var a=e.props.card;e.setState({isEditMode:!e.state.isEditMode,cardTitle:a.cardTitle,rect:r})},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onSaveCardTitle(e.state.cardTitle);var r=t.target.value;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{cardTitle:r}))},e.onSaveCardTitle=function(){var t=e.state.cardTitle;if(t){var r=e.props,a=r.board,n=r.card,s=r.updateBoard;n.cardTitle=t,s(a),e.toggleEditTitle(),e.props.onEditMode()}},e.handleClose=function(t){t.stopPropagation(),t.preventDefault(),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEditTitle:!e.state.isEditTitle}))},e.onArchive=function(){var t=e.props,r=t.card,a=t.board,n=t.updateBoard;r.isArchived=!0;n(Object(x.a)({},a),"Archived card",r),e.toggleEditTitle()},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props,t=e.card,r=e.board,a=e.isDragging,s=e.currListIdx,c=e.currCardIdx,o=e.updateBoard,i=this.state,d=i.isEditMode,l=i.cardTitle,u=i.rect,b=a?"dragged":"not-dragged",j=t.cardStyle.img?"img-cover":t.cardStyle.color,h=d?"quick-card-edit-preview":"",p=t.cardLabelIds?"show-labels":"",f=t.cardStyle.isCover?{fullCover:"full "+j,fullTitle:"full"}:{fullTitle:"half"};return Object(Ce.jsxs)(n.a.Fragment,{children:[d&&Object(Ce.jsx)("div",{className:"screen-quick-card-edit",onClick:this.toggleEditTitle,children:Object(Ce.jsx)("img",{src:Ar,alt:"close"})}),Object(Ce.jsxs)("div",{className:h,style:d?{left:"".concat(u.x),top:"".concat(u.y)}:{},children:[Object(Ce.jsxs)("div",{className:"card-preview-content pointer ".concat(b),children:[t.cardStyle.id&&Object(Ce.jsx)("div",{className:"card-preview-header "+j,style:{backgroundImage:"url(".concat(t.cardStyle.img,")")}}),Object(Ce.jsxs)("div",{className:"card-preview-main-content "+f.fullCover,children:["half"===f.fullTitle&&Object(Ce.jsxs)("div",{className:"list-card-labels  ".concat(p," flex"),children:[" ",t.cardLabelIds&&t.cardLabelIds.map((function(e){return Object(Ce.jsx)(Ir,{labelId:e,boardLabels:r.labels},e)}))]}),!d&&Object(Ce.jsx)("span",{className:"card-preview-title  ".concat(f.fullCover),children:t.cardTitle}),d&&Object(Ce.jsx)(we.a,{className:"quick-card-input",value:l,"aria-label":"card title",onChange:this.handleChange,onKeyPress:this.handleChange,style:{height:"90px"},onFocus:function(e){return e.target.select()},autoFocus:!0}),"half"===f.fullTitle&&Object(Ce.jsxs)("span",{className:"card-preview-icon flex",children:[Object(Ce.jsxs)("div",{className:"icons-preview flex wrap",children:[t.dueDate.date&&Object(Ce.jsx)(Dr,{dueDate:t.dueDate,board:r,card:t,updateBoard:o}),t.description&&Object(Ce.jsx)("div",{className:"badge flex align-center",children:Object(Ce.jsx)(yr.a,{})}),t.comments.length?Object(Ce.jsx)(Ur,{type:"comment",cardCommAttach:t.comments}):Object(Ce.jsx)(Ce.Fragment,{children:" "}),t.attachments.length?Object(Ce.jsx)(Ur,{type:"attachment",cardCommAttach:t.attachments}):Object(Ce.jsx)(Ce.Fragment,{children:" "}),Object(Ce.jsx)("div",{title:"checklist",children:t.checklists.length?Object(Ce.jsx)(Cr,{checklists:t.checklists}):Object(Ce.jsx)(Ce.Fragment,{children:" "})})]}),Object(Ce.jsx)("div",{className:"badge-icon members flex",children:t.cardMembers&&Object(Ce.jsx)(vr,{members:t.cardMembers,currCard:t,isCardOpen:!1})})]}),!d&&!t.isArchived&&Object(Ce.jsx)("button",{className:"quick-card-edit-btn",onClick:this.toggleEditTitle,children:Object(Ce.jsx)(De.c,{})})]})]}),d&&Object(Ce.jsx)("button",{className:"save-quick-card-btn",onClick:this.onSaveCardTitle,children:"Save"}),d&&Object(Ce.jsx)("div",{children:Object(Ce.jsx)(Lr,{board:r,currListIdx:s,currCardIdx:c,currCard:t,onArchive:this.onArchive})})]})]})}}]),r}(n.a.Component);var _r={updateBoard:be,loadListAndCard:oe,loadBoard:ce},Rr=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),_r)(Fr),Pr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEditMode:!1},e.handleDnd=function(){console.log("is dragging",e.props.draggingOver)},e.onEditMode=function(){e.setState({isEditMode:!e.state.isEditMode})},e.onSelectedCard=function(){var t=e.props,r=t.list,a=t.board,n=t.card;e.props.loadListAndCard(r,n),e.state.isEditMode||e.props.history.push("/boards/".concat(a._id,"/").concat(r.listId,"/").concat(n.cardId))},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.card,a=t.currCardIdx,n=t.currListIdx,s=t.list;return r.isArchived?Object(Ce.jsx)(Ce.Fragment,{}):Object(Ce.jsx)(ge.b,{draggableId:r.cardId,index:a,children:function(t,c){return Object(Ce.jsx)("div",Object(x.a)(Object(x.a)(Object(x.a)({onClick:e.onSelectedCard},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(Ce.jsx)(Rr,{list:s,card:r,currListIdx:n,currCardIdx:a,onEditMode:e.onEditMode,isDragging:c.isDragging})}))}})}}]),r}(n.a.Component);var Gr={updateBoard:be,loadListAndCard:oe},Hr=Object(h.f)(Pr),qr=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Gr)(Hr);function zr(e){var t=e.cards,r=e.list,a=e.onUpdateBoard,n=e.board,s=e.currListIdx;return t?Object(Ce.jsx)(ge.c,{droppableId:r.listId,type:"card",children:function(e,c){return Object(Ce.jsxs)("section",Object(x.a)(Object(x.a)({className:"all-cards",ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){return Object(Ce.jsx)(qr,{board:n,currListIdx:s,list:r,currCardIdx:t,card:e,onUpdateBoard:a},e.cardId)})),e.placeholder]}))}}):Object(Ce.jsx)(Ce.Fragment,{children:" "})}var Wr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cardTitle:""},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onAddCard();var r=t.target.value;e.setState({cardTitle:r})},e.onAddCard=function(){var t=e.state.cardTitle;if(t){var r={cardId:$.makeId(),cardTitle:t,isArchived:!1,description:"",comments:[],cardMembers:[],cardLabelIds:[],checklists:[],createdAt:new Date,dueDate:{},attachments:[],cardStyle:{}},a=e.props,n=a.list,s=a.board;n.cards.push(r),e.setState({cardTitle:""});e.props.updateBoard(s,"Added card",r)}else e.props.onCloseAdding()},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.state.cardTitle;return Object(Ce.jsxs)("div",{className:"all-cards card-previre-content",children:[Object(Ce.jsx)(we.a,{className:"text-area-auto card-input",value:e,placeholder:"Enter a title for this card...","aria-label":"empty textarea",onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(Ce.jsxs)("div",{className:"add-card-actions flex align-center",children:[Object(Ce.jsx)("button",{onClick:this.onAddCard,className:"add-card-btn",children:"Add card"}),Object(Ce.jsx)("button",{className:"flex",onClick:this.props.onCloseAdding,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})})]})]})}}]),r}(n.a.Component);var Jr={updateBoard:be},Kr=Object(g.b)((function(e){return{board:e.boardReducer.board}}),Jr)(Wr),Vr=r.p+"static/media/plus.57788bd4.svg",Qr=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAdding:!1,listTitle:"",isEditTitle:!1},e.toggleOnAdd=function(){e.setState({isAdding:!e.state.isAdding})},e.onCloseAdding=function(){e.toggleOnAdd()},e.toggleEditTitle=function(){var t=e.props.list;e.setState({isEditTitle:!e.state.isEditTitle,listTitle:t.listTitle})},e.handleChange=function(t){"Enter"===t.key&&(t.preventDefault(),e.onSaveListTitle());var r=t.target.value;e.setState({listTitle:r})},e.onSaveListTitle=function(){var t=e.state.listTitle;if(t){var r=e.props,a=r.onUpdateBoard,n=r.board,s=r.currListIdx;n.lists[s].listTitle=t,a(n),e.toggleEditTitle()}},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.list,a=t.onUpdateBoard,n=t.currListIdx,s=t.board,c=this.state,o=c.isAdding,i=c.isEditTitle,d=c.listTitle;return Object(Ce.jsx)(ge.b,{draggableId:r.listId,index:n,children:function(t){return Object(Ce.jsx)("section",Object(x.a)(Object(x.a)(Object(x.a)({className:"list-wrapper"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(Ce.jsxs)("div",{className:"list-content flex direction-col",children:[Object(Ce.jsxs)("div",{className:"list-header flex",children:[!i&&Object(Ce.jsx)("h2",{onClick:e.toggleEditTitle,children:r.listTitle}),i&&Object(Ce.jsx)(we.a,{className:"text-area-auto list-title-input",value:d,"aria-label":"empty textarea",onChange:e.handleChange,onKeyPress:e.handleChange,onBlur:e.onSaveListTitle,onFocus:function(e){e.target.select()},autoFocus:!0}),Object(Ce.jsx)("div",{className:"list-header-menu-btn",children:Object(Ce.jsx)(Or,{type:"list actions",board:s,list:r,onUpdateBoard:a,titleModal:"List actions"})})]}),Object(Ce.jsxs)("div",{className:"list-cards fancy-scrollbar",children:[Object(Ce.jsx)(zr,{cards:r.cards,board:s,currListIdx:n,list:r,onUpdateBoard:a},r.listId),o&&Object(Ce.jsx)(Kr,{list:r,onUpdateBoard:a,onCloseAdding:e.onCloseAdding})]}),!o&&Object(Ce.jsxs)("span",{className:"add-card-container",onClick:function(){e.toggleOnAdd()},children:[Object(Ce.jsx)("img",{src:Vr,alt:""}),"Add a card"]})]})}))}})}}]),r}(n.a.Component);function Xr(e){var t=e.lists,r=e.onUpdateBoard,a=e.board;return Object(Ce.jsx)(ge.c,{droppableId:"all-lists",direction:"horizontal",type:"list",children:function(e){return Object(Ce.jsxs)("div",Object(x.a)(Object(x.a)({className:"all-lists flex"},e.droppableProps),{},{ref:e.innerRef,children:[t.map((function(e,t){return Object(Ce.jsx)(Qr,{board:a,list:e,currListIdx:t,onUpdateBoard:r},e.listId)})),e.placeholder]}))}})}var Yr=r(0),Zr=r(267),$r=r.n(Zr);var ea=Object(g.b)((function(e){return{board:e.boardReducer.board}}))((function(e){var t=e.members,r=e.board;return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsx)(xe.a,{max:5,spacing:-4,children:t.map((function(e){var t;return"pandaguest"===(null===e||void 0===e?void 0:e.username)&&"pandaguest"!==(null===r||void 0===r||null===(t=r.createdBy)||void 0===t?void 0:t.username)?null:Object(Ce.jsxs)("span",{className:"avatar-btn",children:[Object(Ce.jsx)(ke.a,{src:e.imgUrl,children:Object(Ce.jsx)("p",{children:e.initials})},e._id),Object(Ce.jsx)(Or,{type:"boardMember",titleModal:"",user:e,from:"BoardHeader"})]},e._id)}))})})})),ta=r(268),ra=r.n(ta);function aa(e){var t=e.board,r=e.changeMenu,a=$.getFormattedBgStyle(t.boardStyle);return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)("div",{className:"board-actions",children:[Object(Ce.jsxs)("button",{className:"menu-action-btn",onClick:function(){return r("Change Background","select-bg-type")},children:[Object(Ce.jsx)("span",{className:"change-bg-preview",style:a}),"Change background"]}),Object(Ce.jsxs)("button",{className:"menu-action-btn search flex align-center",onClick:function(){return r("Search cards","search")},children:[Object(Ce.jsx)("span",{className:"search-cards-icon",children:Object(Ce.jsx)(ra.a,{})}),Object(Ce.jsx)("span",{className:"search-cards-txt",children:" Search cards "})]}),Object(Ce.jsxs)("button",{className:"menu-action-btn archive",onClick:function(){return r("Archived","archive")},children:[Object(Ce.jsx)("span",{className:"archive-icon",children:Object(Ce.jsx)(De.a,{})}),Object(Ce.jsx)("span",{className:"archive-txt",children:"Archived items"})]})]}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsx)("div",{className:"activities",children:Object(Ce.jsx)(Rt,{board:t})})]})}function na(e){return Object(Ce.jsxs)("div",{className:"select-bg flex",children:[Object(Ce.jsxs)("div",{className:"photos",onClick:function(){e.changeMenu("Photos by Unsplash","photos")},children:[Object(Ce.jsx)("img",{src:"https://a.trellocdn.com/prgb/dist/images/photos-thumbnail@3x.8f9c1323c9c16601a9a4.jpg",alt:"Photos"}),Object(Ce.jsx)("p",{children:"Photos"})]}),Object(Ce.jsxs)("div",{className:"colors",onClick:function(){e.changeMenu("Colors","colors")},children:[Object(Ce.jsx)("img",{src:"https://a.trellocdn.com/prgb/dist/images/colors@2x.ec32a2ed8dd8198b8ef0.jpg",alt:"Colors"}),Object(Ce.jsx)("p",{children:"Colors"})]})]})}var sa={updateBoard:be},ca=Object(g.b)((function(){return{}}),sa)((function(e){return Object(Ce.jsx)("div",{className:"choose-bg-color flex wrap",children:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"].map((function(t,r){return Object(Ce.jsx)("div",{className:"bg-color bgclr".concat(r+1),onClick:function(){!function(t){var r=Object(x.a)({},e.board);r.boardStyle=t,e.updateBoard(r,"changed the board background")}(t)}},t)}))})})),oa=r(269),ia=r.p+"static/media/bars-loader.ef2c6578.svg";function da(){return Object(Ce.jsx)("div",{className:"loader flex align-center justify-center",children:Object(Ce.jsx)("img",{src:ia,alt:"loading..."})})}var la=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={imgs:[]},e.handleChange=function(){var t=Object(O.a)(f.a.mark((function t(r){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.target.value,t.next=3,e.props.setSearchBg(a);case 3:e.getImgs();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getImgs=Object(O.a)(f.a.mark((function t(){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We.getImgs(e.props.searchStr,18);case 2:r=t.sent,e.setState({imgs:r});case 4:case"end":return t.stop()}}),t)}))),e.setBgImg=function(t){var r=e.state.imgs[t],a=Object(x.a)({},e.props.board);a.boardStyle={full:r.full,small:r.small},e.props.updateBoard(a,"changed the board background")},e.openLink=function(e){e.stopPropagation()},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getImgs();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.imgs;return t&&t.length?Object(Ce.jsxs)("div",{className:"choose-bg-img",children:[Object(Ce.jsxs)("div",{className:"search-photos flex align-center",children:[Object(Ce.jsx)(oa.a,{}),Object(Ce.jsx)(Ke.DebounceInput,{value:this.props.searchStr,minLength:2,debounceTimeout:400,onChange:this.handleChange})]}),Object(Ce.jsx)("div",{className:"bg-img-list flex wrap",children:t.map((function(t,r){return Object(Ce.jsx)("div",{className:"bg-img",style:{backgroundImage:"url(".concat(t.small,")")},onClick:function(){return e.setBgImg(r)},children:Object(Ce.jsx)("a",{href:t.link,target:"_blank",onClick:e.openLink,children:t.name})},t.id)}))})]}):Object(Ce.jsx)(da,{className:"menu-load"})}}]),r}(n.a.Component);var ua={updateBoard:be,setSearchBg:fe},ba=Object(g.b)((function(e){return{searchStr:e.boardReducer.searchBg}}),ua)(la),ja=r.p+"static/media/checked.97ec8ba4.svg",ha=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={filterBy:{searchKey:"",labels:[],members:[],dueDate:[],isFilter:!1}},e.handleChange=function(t){var r=t.target.value,a=e.props.filterBy;a.searchKey=r,a.isFilter=!0,e.props.setFilterBy(a,e.props.board._id)},e.onFilterBy=function(t,r){var a,n=e.props.filterBy[t],s=n.findIndex((function(e){return e===r}));-1!==s?n.splice(s,1):n.push(r),e.setState({filterBy:Object(x.a)(Object(x.a)({},e.state.filterBy),{},(a={},Object(Jt.a)(a,t,n),Object(Jt.a)(a,"isFilter",!0),a))},(function(){e.props.setFilterBy(e.state.filterBy,e.props.board._id)}))},e.onToggleSearch=function(t,r){return e.props.filterBy[t].some((function(e){return e===r}))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.setState({filterBy:this.props.filterBy})}},{key:"render",value:function(){var e=this,t=this.props,r=t.board,a=t.filterBy;return Object(Ce.jsxs)("div",{className:"search-cards",children:[Object(Ce.jsx)(Ke.DebounceInput,{minLength:2,debounceTimeout:2e3,className:"search-cards",type:"text",onChange:this.handleChange,forceNotifyByEnter:!1,value:a.searchKey}),Object(Ce.jsx)("p",{children:"Search by term, label or member"}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsxs)("div",{className:"search-types",children:[Object(Ce.jsx)("ul",{className:"clean-list",children:r.labels.map((function(t){return Object(Ce.jsx)("li",{className:"labels pointer",onClick:function(){return e.onFilterBy("labels",t.id)},children:Object(Ce.jsxs)("div",{className:"label-menu",children:[Object(Ce.jsx)("div",{className:"label-list-item",children:Object(Ce.jsx)("div",{className:"label-menu-color pointer ".concat(t.color),children:Object(Ce.jsx)("span",{})})}),Object(Ce.jsx)("span",{children:t.title}),Object(Ce.jsxs)("span",{className:"checked-icon labels",children:[" ",e.onToggleSearch("labels",t.id)&&Object(Ce.jsx)("img",{src:ja,alt:"checked"})]})]})},t.id)}))}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsx)("div",{className:"members-type",children:Object(Ce.jsx)("ul",{className:"members-search clean-list",children:r.boardMembers.map((function(t){return Object(Ce.jsxs)("li",{className:"members-list flex align-center pointer",onClick:function(){return e.onFilterBy("members",t._id)},children:[Object(Ce.jsx)("div",{children:Object(Ce.jsx)(ke.a,{alt:t.username,src:t.imgUrl},t._id)}),Object(Ce.jsx)("span",{children:t.username}),Object(Ce.jsxs)("span",{className:"checked-icon members",children:[" ",e.onToggleSearch("members",t._id)&&Object(Ce.jsx)("img",{src:ja,alt:"checked"})]})]},t._id)}))})})]})]})}}]),r}(n.a.Component);var pa={updateBoard:be,loadListAndCard:oe,loadBoard:ce,setFilterBy:ue},fa=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser,filterBy:e.boardReducer.filterBy}}),pa)(ha),Oa=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchKey:""},e.handleChange=function(t){var r=t.target.value;e.setState({searchKey:r})},e.onFilterCards=function(){var t=e.props.board;new RegExp(e.state.searchKey,"i").test(t)},e.onSelectedCard=function(t,r){var a=e.props,n=a.board;(0,a.toggleMenu)(),e.props.history.push("/boards/".concat(n._id,"/").concat(t.listId,"/").concat(r.cardId))},e.onDeleteCard=function(t,r,a){return function(n){n.stopPropagation(),n.preventDefault();var s=e.props,c=s.board,o=s.updateBoard;(0,s.toggleMenu)(),c.lists[t].cards.splice(r,1),o(Object(x.a)({},c),"Deleted card",a.tilte)}},e.onSendToBoard=function(t){return function(r){r.stopPropagation(),r.preventDefault();var a=e.props,n=a.board,s=a.updateBoard;(0,a.toggleMenu)(),t.isArchived=!1,s(Object(x.a)({},n))}},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props.board;return Object(Ce.jsx)("div",{children:t.lists.map((function(t,r){return t.cards.map((function(a,n){return a.isArchived&&Object(Ce.jsxs)("div",{className:"archived-list",onClick:function(){e.onSelectedCard(t,a)},children:[Object(Ce.jsx)(Rr,{card:a,currListIdx:r,currCardIdx:n}),Object(Ce.jsxs)("div",{className:"archive-actions flex",children:[Object(Ce.jsxs)("p",{className:"send-to-board pointer",onClick:e.onSendToBoard(a),children:["Send to board"," "]}),Object(Ce.jsx)("span",{className:"space",children:"-"}),Object(Ce.jsxs)("p",{className:"delete-card pointer",onClick:e.onDeleteCard(r,n,a),children:[" ","Delete"]})]})]})}))}))})}}]),r}(n.a.Component);var ma={updateBoard:be},ga=Object(h.f)(Oa),xa=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),ma)(ga);function va(e){var t=e.board,r=e.toggleMenu,a=e.isMenuOpen,s=e.target,c=e.title,o=e.changeMenu,i=e.onFilterCards,d=function(e){switch(e.target){case"main":return Object(Ce.jsx)(aa,Object(x.a)({},e));case"select-bg-type":return Object(Ce.jsx)(na,Object(x.a)({},e));case"colors":return Object(Ce.jsx)(ca,Object(x.a)({},e));case"photos":return Object(Ce.jsx)(ba,Object(x.a)({},e));case"search":return Object(Ce.jsx)(fa,Object(x.a)({},e));case"archive":return Object(Ce.jsx)(xa,Object(x.a)({},e));case"notifications":return Object(Ce.jsx)(dr,Object(x.a)({},e))}},l="right";return Object(Ce.jsx)("div",{className:"menu-visible",children:Object(Ce.jsxs)(n.a.Fragment,{children:[Object(Ce.jsx)(Pe.a,{onClick:r,children:l}),Object(Ce.jsx)(Ut.a,{anchor:l,open:a,hideBackdrop:!0,children:Object(Ce.jsxs)("div",{className:"menu-wrapper",children:[Object(Ce.jsx)("div",{className:"menu-screen",onClick:r}),Object(Ce.jsxs)("div",{className:"board-menu-content",children:[Object(Ce.jsxs)("div",{className:"board-menu-content-header flex",children:[Object(Ce.jsx)("div",{className:"title",children:Object(Ce.jsx)("h3",{children:c})}),Object(Ce.jsx)("span",{className:"exit-icon",onClick:r,children:Object(Ce.jsx)("img",{src:Pt,alt:"Close"})}),"main"!==s&&Object(Ce.jsx)("span",{className:"back-icon",onClick:function(){return o("Menu","main")},children:Object(Ce.jsx)(lr.a,{})})]}),Object(Ce.jsx)(Ft.a,{}),Object(Ce.jsx)("div",{className:"menu-content fancy-scrollbar",children:Object(Ce.jsx)(d,{target:s,board:t,changeMenu:o,toggleMenu:r,onFilterCards:i})})]})]})})]},l)})}var Ca=r(270),ya=r.n(Ca),ka=r.p+"static/media/close-filter.aedc814a.svg",Na=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEditTitle:!1,title:"",isMenuOpen:!1,menuTitle:"Menu",menuTarget:"main",cardsCount:0},e.handleChange=function(t){var r=t.target.value;e.setState({title:r})},e.toggleChangeTitle=function(){var t=e.state.isEditTitle;e.setState({isEditTitle:!t})},e.saveBoardTitle=function(t){t.preventDefault();var r=e.state.title,a=e.props,n=a.board,s=a.updateBoard;r||(r="Untitled"),r!==n.boardTitle?(n.boardTitle=r,s(n,"changed board title"),e.toggleChangeTitle()):e.toggleChangeTitle()},e.onToggleStarBoard=function(){var t=e.props,r=t.board,a=t.updateBoard,n=t.loggedInUser;a(G.toggleStarBoard(r,n._id))},e.onFilterCards=function(){var t=e.props,r=t.board,a=t.filterBy;a.members.length||a.labels.length||""!==a.searchKey?e.setState(Object(x.a)(Object(x.a)({},e.state),{},{cardsCount:r.cardsCount})):(e.setState(Object(x.a)(Object(x.a)({},e.state),{},{cardsCount:0})),a.isFilter=!1)},e.resetSearch=function(){e.props.setFilterBy({searchKey:"",labels:[],members:[],isFilter:!1},e.props.board._id),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{cardsCount:0}))},e.toggleMenu=function(){var t=e.state.isMenuOpen;e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isMenuOpen:!t,menuTitle:"Menu",menuTarget:"main"})})),e.props.setSearchBg("")},e.changeMenu=function(t,r){e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{menuTitle:t,menuTarget:r})}))},e.cloneTemplate=Object(O.a)(f.a.mark((function t(){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(r=Object(x.a)({},e.props.board))._id,r.createdBy=e.props.loggedInUser,r.boardMembers.push(e.props.loggedInUser),t.next=6,e.props.addBoard(r);case 6:a=t.sent,e.props.goToTemplateClone(a._id);case 8:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.setState({title:this.props.board.boardTitle})}},{key:"componentDidUpdate",value:function(e,t){this.props.filterBy&&e.filterBy!==this.props.filterBy&&this.onFilterCards()}},{key:"render",value:function(){var e=this.props,t=e.board,r=e.loggedInUser,a=e.filterBy,n=this.state,s=n.title,c=n.isEditTitle,o=n.isMenuOpen,i=n.menuTarget,d=n.menuTitle,l=!!t.createdBy&&G.isBoardStarred(t,r._id);return Object(Ce.jsxs)("div",{className:"board-header flex align-center space-between wrap",children:[Object(Ce.jsxs)("div",{className:"header-left flex align-center",children:[!c&&Object(Ce.jsx)("h1",{className:"board-btn header-title",onClick:this.toggleChangeTitle,children:t.boardTitle}),c&&Object(Ce.jsx)("form",{onSubmit:this.saveBoardTitle,children:Object(Ce.jsx)($r.a,{className:"header-title-input",autoFocus:!0,name:"boardTitle",type:"text",placeholder:"Enter Title",value:s,inputStyle:{fontSize:18,fontWeight:700,color:"#172b4d"},onChange:this.handleChange,onBlur:this.saveBoardTitle})}),Object(Ce.jsx)("button",{className:"board-btn star ".concat(l?" active":""),onClick:this.onToggleStarBoard,children:Object(Ce.jsx)(Yr.b.Provider,{value:{className:"star-icon"},children:Object(Ce.jsx)(rr.a,{})})}),Object(Ce.jsx)("span",{className:"board-header-divider"}),!t.createdBy&&Object(Ce.jsx)("button",{className:"board-btn template",onClick:this.cloneTemplate,children:"Create board from template"}),Object(Ce.jsx)("div",{className:"board-members",children:Object(Ce.jsx)(ea,{members:t.boardMembers})}),Object(Ce.jsx)("span",{className:"board-btn invite",children:Object(Ce.jsx)(Or,{type:"invite",title:"Invite",titleModal:"Invite to board",board:t})})]}),Object(Ce.jsxs)("div",{className:"header-right flex",children:[a.isFilter&&Object(Ce.jsxs)("div",{className:"cards-count pointer flex align-center",children:[Object(Ce.jsxs)("span",{onClick:this.openSearchOnMenu,className:"number-count",children:[t.cardsCount," search results"]}),Object(Ce.jsx)("span",{onClick:this.resetSearch,className:"close-filter-btn",children:Object(Ce.jsx)("img",{src:ka,alt:"close"})})]}),t.createdBy?Object(Ce.jsxs)("button",{className:"board-btn flex align-center",onClick:this.props.onOpenDashboard,children:[Object(Ce.jsx)("span",{className:"icon",children:Object(Ce.jsx)(ya.a,{})}),Object(Ce.jsx)("span",{className:"title",children:"Dashboard"})]}):Object(Ce.jsx)(Ce.Fragment,{}),!o&&Object(Ce.jsxs)("button",{className:"board-btn show-menu flex align-center",onClick:this.toggleMenu,children:[Object(Ce.jsxs)("span",{className:"icon flex justify-center align-center",children:[Object(Ce.jsx)(De.d,{})," "]}),Object(Ce.jsx)("span",{className:"title",children:"Show menu"})]}),o&&Object(Ce.jsx)(va,{board:t,toggleMenu:this.toggleMenu,onFilterCards:this.onFilterCards,isMenuOpen:o,target:i,title:d,changeMenu:this.changeMenu})]})]})}}]),r}(n.a.Component);var Ia={updateBoard:be,setNotif:he,setFilterBy:ue,addBoard:ie,setSearchBg:fe},wa=Object(g.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount,filterBy:e.boardReducer.filterBy}}),Ia)(Na),Ba=r.p+"static/media/plus-white.4649978c.svg",Sa=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={listTitle:"",isAdding:!1},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onAddList();var r=t.target.value;e.setState({listTitle:r})},e.onAddList=function(){var t=e.state.listTitle;if(t){var r={listId:$.makeId(),listTitle:t,cards:[]},a=e.props.board;a.lists.push(r);var n="Added list ".concat(t);e.setState({listTitle:""}),e.props.onUpdateBoard(a,n),e.onCloseAdding()}else e.onCloseAdding()},e.toggleOnAdd=function(){e.setState({isAdding:!e.state.isAdding})},e.onCloseAdding=function(){e.toggleOnAdd()},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.listTitle,a=t.isAdding,n=a?"add-mode":"";return Object(Ce.jsxs)("div",{onClick:this.toggleOnAdd,className:"add-list board-btn flex align-center pointer "+n,children:[a&&Object(Ce.jsxs)("form",{onSubmit:this.onAddList,children:[Object(Ce.jsx)(we.a,{className:"text-area-auto list-input",value:r,"aria-label":"empty textarea",placeholder:"Enter list title",onChange:this.handleChange,onKeyPress:this.handleChange,onBlur:this.onAddList,autoFocus:!0}),Object(Ce.jsxs)("div",{className:"add-list-actions flex align-center",children:[Object(Ce.jsx)(Pe.a,{className:"add-list-btn",children:"Add List"}),Object(Ce.jsx)("span",{className:"close-add-list-btn",onClick:this.onCloseAdding,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})})]})]}),!a&&Object(Ce.jsxs)("span",{className:"plus flex align-center",onClick:function(){e.toggleOnAdd()},children:[" ",Object(Ce.jsx)("img",{src:Ba,alt:"plus"}),Object(Ce.jsx)("span",{className:"add-list-txt",children:"Add another list"})]})]})}}]),r}(n.a.Component),Ta=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onJoinCard=function(t){var r=e.props,a=r.board,n=r.currListIdx,s=r.currCardIdx,c=a.lists[n].cards[s];a.lists[n].cards[s].cardMembers.push(t);var o="".concat(t," Added to ");e.props.updateBoard(a,o,c)},e.isMemberOnCard=function(e,t){return e.cardMembers.some((function(e){return e._id===t}))},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.currListIdx,a=t.currCardIdx,n=t.loggedInUser,s=t.board;if(!s)return Object(Ce.jsx)(Ce.Fragment,{});var c=s.lists[r].cards[a];return this.isMemberOnCard(c,n._id)?Object(Ce.jsx)(Ce.Fragment,{}):Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)("h4",{children:"SUGGESTED"}),Object(Ce.jsx)("div",{className:"btn-container join-to-card",children:Object(Ce.jsxs)("button",{onClick:function(){return e.onJoinCard(n)},children:[Object(Ce.jsx)(et.a,{})," Join"]})})]})}}]),r}(n.a.Component);var Da={updateBoard:be},La=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Da)(Ta),Aa=r(149),Ma=r.n(Aa),Ea=r(271),Ua=r.n(Ea),Fa=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleArchived=function(){var t=e.props,r=t.board,a=t.currCard;a.isArchived=!a.isArchived,e.props.updateBoard(r,"Archived card ".concat(a.title),a)},e.onDeleteCard=function(){var t=e.props,r=t.board,a=t.currListIdx,n=t.currCardIdx,s=t.currCard;r.lists[a].cards.splice(n,1),e.props.updateBoard(r,"Deleted card",s),e.props.handleClose()},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.currCard;return Object(Ce.jsxs)(Ce.Fragment,{children:[!e.isArchived&&Object(Ce.jsxs)("button",{onClick:this.onToggleArchived,children:[Object(Ce.jsx)(Ma.a,{}),"Archive"]}),e.isArchived&&Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsxs)("button",{onClick:this.onToggleArchived,children:[Object(Ce.jsx)(Ua.a,{}),"Send to board"]}),Object(Ce.jsx)(Or,{type:"delete-card",titleModal:"Delete card?",onDeleteCard:this.onDeleteCard})]})]})}}]),r}(n.a.Component);var _a={updateBoard:be},Ra=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),_a)(Fa);function Pa(e){var t=e.board,r=e.currListIdx,a=e.currCardIdx,n=e.handleClose,s=t.lists[r].cards[a];return Object(Ce.jsxs)("div",{className:"add-to-card",children:[Object(Ce.jsx)(La,{board:t,currListIdx:r,currCardIdx:a}),Object(Ce.jsx)("h4",{children:"ADD TO CARD"}),Object(Ce.jsxs)("div",{className:"btn-container",children:[Object(Ce.jsx)(Or,{type:"members",title:"Members",titleModal:"Members",board:t,currListIdx:r,currCardIdx:a}),Object(Ce.jsx)(Or,{type:"labels",title:"Labels",titleModal:"Labels",board:t,currListIdx:r,currCardIdx:a}),Object(Ce.jsx)(Or,{type:"checklist",title:"Checklist",titleModal:"Add checklist",board:t,currListIdx:r,currCardIdx:a}),Object(Ce.jsx)(Or,{type:"dates",title:"Dates",titleModal:"Dates",board:t,currListIdx:r,currCardIdx:a}),Object(Ce.jsx)(Or,{type:"attachments",title:"attachments",titleModal:"Attachments",board:t,currListIdx:r,currCardIdx:a}),!s.cardStyle.id&&Object(Ce.jsx)(Or,{type:"cover",title:"Cover",titleModal:"Cover",board:t,currListIdx:r,currCardIdx:a}),Object(Ce.jsx)("h4",{children:"ACTIONS"}),Object(Ce.jsx)(Or,{type:"move-card",titleModal:"Move Card",board:t,currListIdx:r,currCardIdx:a,currCard:s}),Object(Ce.jsx)(Or,{type:"copy-card",titleModal:"Copy Card",board:t,currListIdx:r,currCardIdx:a,currCard:s}),Object(Ce.jsx)(Ra,{currCard:s,currListIdx:r,currCardIdx:a,handleClose:n})]})]})}function Ga(e){var t=e.cardLabelIds,r=e.boardLabels,a=e.board,n=e.currCardIdx,s=e.currListIdx;e.changeTitle;return Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{children:"Labels"}),Object(Ce.jsxs)("div",{className:"labels-list flex wrap",children:[t.map((function(e){return Object(Ce.jsx)(Or,{labelId:e,boardLabels:r,type:"labels-preview",titleModal:"Labels",board:a,currListIdx:s,currCardIdx:n},e)})),Object(Ce.jsx)(Or,{className:"add-labels",type:"add-labels",titleModal:"Labels",board:a,currListIdx:s,currCardIdx:n})]})]})}var Ha=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.comment;return Object(Ce.jsxs)("div",{className:"card-details-comment flex direction-row",children:[Object(Ce.jsx)(ke.a,{className:"card-details-avatar",alt:e.byMember.fullname,src:e.byMember.imgUrl},e.byMember._id),Object(Ce.jsxs)("div",{className:"comment-content",children:[Object(Ce.jsxs)("div",{className:"flex direction-row",children:[Object(Ce.jsx)("h4",{children:e.byMember.fullname}),Object(Ce.jsxs)("small",{children:[" ",new Date(e.createdAt).toString().substring(0,16)]})]}),Object(Ce.jsx)("div",{className:"comment-txt",children:Object(Ce.jsx)("p",{children:e.txt})})]})]})}}]),r}(n.a.Component);function qa(e){var t=e.comments;return t?Object(Ce.jsx)("div",{children:t.length&&t.map((function(e){return Object(Ce.jsx)(Ha,{comment:e},e.id)}))}):Object(Ce.jsx)(Ce.Fragment,{})}function za(e){var t=e.activities,r=e.currCard;return t?(t=t.filter((function(e){return e.card.cardId===r.cardId})),Object(Ce.jsx)("div",{children:t.length?t.map((function(e){return Object(Ce.jsx)(_t,{activity:e},e.id)})):Object(Ce.jsx)(Ce.Fragment,{})})):Object(Ce.jsx)(Ce.Fragment,{})}var Wa=r(150),Ja=r.n(Wa),Ka=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEditing:!1,isDetails:!1,newActivityTxt:""},e.onToggleDetails=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isDetails:!e.state.isDetails}))},e.onToggleComment=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEditing:!0}))},e.handleChange=function(t){var r=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{newActivityTxt:r.value}))},e.onSaveActivity=function(t){if(t.stopPropagation(),e.state.newActivityTxt){var r=e.state,a=r.currListIdx,n=r.currCardIdx,s=Object(x.a)({},e.state.board);s.lists[a].cards[n].comments.unshift({byMember:e.props.loggedInUser,createdAt:Date.now(),id:$.makeId(),txt:e.state.newActivityTxt});var c=s.lists[a].cards[n],o=e.state.newActivityTxt.substring(0,20);e.props.OnUpdateBoard(s,"Added comment",c,o),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{newActivityTxt:"",isEditing:!1}))}},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{board:t,currListIdx:r,currCardIdx:a})),console.log("loggedin user: ",this.props.loggedInUser)}},{key:"render",value:function(){var e=this,t=this.state,r=t.isEditing,a=t.isDetails,n=t.newActivityTxt,s=t.board,c=t.currListIdx,o=t.currCardIdx,i=this.props.loggedInUser;if(!s||null===o||null===c)return Object(Ce.jsx)(da,{});s.lists[c].cards[o].comments;var d=s.lists[c].cards[o];return Object(Ce.jsxs)("div",{className:"card-activities",children:[Object(Ce.jsxs)("div",{className:"flex direction-row space-between ",children:[Object(Ce.jsxs)("div",{className:"flex direction-row",children:[Object(Ce.jsx)(Ja.a,{className:"card-details-icon"}),Object(Ce.jsx)("h3",{className:"card-subtitle",children:"Activity"})]}),!a&&Object(Ce.jsx)("button",{className:"show-hide hover",onClick:this.onToggleDetails,children:"Show details"}),a&&Object(Ce.jsx)("button",{className:"show-hide hover",onClick:this.onToggleDetails,children:"Hide details"})]}),Object(Ce.jsxs)("div",{className:"add-comment-container flex direction-row ",children:[Object(Ce.jsx)(ke.a,{className:"card-details-avatar",alt:i.username,src:i.imgUrl}),Object(Ce.jsxs)("div",{className:" comment-container flex direction-col",onClick:this.onToggleComment,children:[Object(Ce.jsx)(we.a,{className:"input-comment text-area-auto",name:"description",type:"text",placeholder:"Write a comment...",onChange:this.handleChange,value:n}),r&&Object(Ce.jsx)("button",{className:"comment-save",onClick:function(t){return e.onSaveActivity(t)},children:"Save"})]})]}),d.comments.length?Object(Ce.jsx)(qa,{comments:d.comments}):Object(Ce.jsx)(Ce.Fragment,{}),a&&Object(Ce.jsx)(za,{currCard:d,activities:s.activities})]})}}]),r}(n.a.Component);var Va=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}))(Ka),Qa=r(272),Xa=r.n(Qa),Ya=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEdit:!1},e.handleChange=function(t){if("Enter"===t.key)t.preventDefault(),e.onSaveTitle();else{var r=e.state,a=r.currListIdx,n=r.currCardIdx,s=Object(x.a)({},e.state.board);s.lists[a].cards[n][t.target.name]=t.target.value,e.setState(Object(x.a)(Object(x.a)({},e.state),{},{board:s}))}},e.onSaveTitle=function(){e.props.OnUpdateBoard(Object(x.a)({},e.state.board)),e.onToggleEdit()},e.onToggleEdit=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEdit:!e.state.isEdit}))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx;this.setState({board:t,currListIdx:r,currCardIdx:a})}},{key:"render",value:function(){var e=this.state,t=e.board,r=e.currListIdx,a=e.currCardIdx,n=e.isEdit;if(!t||null===a||null===r)return Object(Ce.jsx)(da,{});var s=t.lists[r].cards[a];return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("div",{className:"card-details-title flex direction-row",children:[Object(Ce.jsx)(Xa.a,{className:"card-details-icon"}),Object(Ce.jsxs)("div",{className:"flex direction-col",children:[n&&Object(Ce.jsx)(we.a,{className:"text-area-auto",name:"cardTitle",type:"text",placeholder:"Enter title",onChange:this.handleChange,onKeyPress:this.handleChange,value:s.cardTitle,onBlur:this.onSaveTitle,onFocus:function(e){return e.target.select()},autoFocus:!0}),!n&&Object(Ce.jsx)("h2",{onClick:this.onToggleEdit,children:s.cardTitle}),Object(Ce.jsxs)("small",{children:["in list ",Object(Ce.jsx)("span",{children:t.lists[r].listTitle})]})]})]})})}}]),r}(n.a.Component),Za=r(273),$a=r.n(Za),en=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEditing:!1},e.onToggleEditing=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEditing:!0}))},e.handleChange=function(t){var r=t.target,a=e.state,n=a.currListIdx,s=a.currCardIdx,c=Object(x.a)({},e.state.board);c.lists[n].cards[s][r.name]=r.value,e.setState(Object(x.a)(Object(x.a)({},e.state),{},{board:c}))},e.onSaveDescription=function(t){t.preventDefault(),t.stopPropagation(),e.props.OnUpdateBoard(Object(x.a)({},e.state.board)),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEditing:!1}))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,r=e.currListIdx,a=e.currCardIdx;this.setState({board:t,currListIdx:r,currCardIdx:a})}},{key:"render",value:function(){var e=this.state,t=e.board,r=e.currListIdx,a=e.currCardIdx,n=e.isEditing;if(!t||null===a||null===r)return Object(Ce.jsx)(da,{});var s=t.lists[r].cards[a];return Object(Ce.jsxs)("div",{className:"card-description",children:[Object(Ce.jsxs)("div",{className:"flex direction-row align-center",children:[Object(Ce.jsx)($a.a,{className:"card-details-icon"}),Object(Ce.jsx)("h3",{className:"card-subtitle",children:"Description"}),!n&&s.description&&Object(Ce.jsx)("button",{className:"hover btn-edit",onClick:this.onToggleEditing,children:"Edit"})]}),n&&Object(Ce.jsx)("div",{className:"edit-container",onClick:this.onToggleEditing,children:Object(Ce.jsxs)("form",{onSubmit:this.onSaveDescription,children:[Object(Ce.jsx)(we.a,{name:"description",className:"text-area-auto desc-edit",type:"text",placeholder:"Add a more detailed description...",onChange:this.handleChange,value:s.description,onBlur:this.onSaveDescription,onFocus:function(e){return e.target.select()},autoFocus:!0}),Object(Ce.jsxs)("div",{className:"flex direction-row align-center",children:[n&&Object(Ce.jsx)("button",{className:"save-desc",onClick:this.onSaveDescription,children:"Save"}),n&&Object(Ce.jsx)("button",{className:"discard-desc",onClick:this.onToggleEditing,children:"X"})]})]})}),!n&&s.description&&Object(Ce.jsx)("div",{className:"desc-txt pointer",onClick:this.onToggleEditing,children:Object(Ce.jsx)("p",{children:s.description})}),!n&&!s.description&&Object(Ce.jsx)("div",{className:"desc-txt-placeholder hover",onClick:this.onToggleEditing,children:Object(Ce.jsx)("p",{children:"Add a more detailed description..."})})]})}}]),r}(n.a.Component);function tn(e){var t=e.currChecklist,r={width:s()},a=s(),n="100%"===a?"progressing bar-done":"progressing";function s(){if(!t.tasks.length)return"0%";var e=0;return t.tasks.forEach((function(t){t.isDone&&e++})),"".concat(Math.floor(e/t.tasks.length*100),"%")}return Object(Ce.jsxs)("div",{className:"progress-bar flex direction-row align-center",children:[Object(Ce.jsx)("p",{children:a}),Object(Ce.jsx)("div",{className:"progress-bar-container",children:Object(Ce.jsx)("div",{className:n,style:r})})]})}var rn=r(274),an=r.n(rn),nn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={newTaskTxt:null,isEdit:!1},e.onToggleEdit=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEdit:!e.state.isEdit})),e.props.onEditMode()},e.onDiscardChanges=function(){e.setState({newTaskTxt:e.props.task.txt,isEdit:!1}),e.props.onEditMode()},e.handleChange=function(t){var r=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{newTaskTxt:r.value}))},e.onSaveTask=function(){var t=e.props,r=t.taskIdx,a=t.task;e.props.onEditTask(r,a.isDone,e.state.newTaskTxt),e.onToggleEdit()},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.task;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{newTaskTxt:e.txt}))}},{key:"render",value:function(){var e=this.state,t=e.newTaskTxt,r=e.isEdit,a=this.props.task,n=a.isDone?"task-done":"";return t?Object(Ce.jsxs)("div",{className:"task-input",children:[!r&&Object(Ce.jsx)("div",{className:n,onClick:this.onToggleEdit,children:a.txt}),r&&Object(Ce.jsxs)("div",{className:"task-update",children:[Object(Ce.jsx)(we.a,{className:"text-area-auto task-edit",type:"text",value:t,onChange:this.handleChange}),Object(Ce.jsxs)("div",{className:"flex direction-row align-center",children:[Object(Ce.jsx)("button",{className:"save-task",onClick:this.onSaveTask,children:"Save"}),Object(Ce.jsx)("button",{className:"discard-task",onClick:this.onDiscardChanges,children:"X"})]})]})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),r}(n.a.Component),sn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEdit:!1},e.onEditMode=function(){e.setState({isEdit:!e.state.isEdit})},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props,t=e.task,r=e.taskIdx,a=e.onDeleteTask,n=e.onEditTask,s=this.state.isEdit;return Object(Ce.jsxs)("div",{className:"task-preview flex direction-row space-between",children:[Object(Ce.jsxs)("div",{className:"width-100 flex direction-row align-center",children:[Object(Ce.jsx)(vt.a,{className:"checkbox ".concat(s?"edit":""),checked:t.isDone,onChange:function(){return n(r,!t.isDone,t.txt)}}),Object(Ce.jsx)(nn,{onEditMode:this.onEditMode,task:t,taskIdx:r,onEditTask:n})]}),!s&&Object(Ce.jsx)(an.a,{className:"delete-task pointer",onClick:function(){return a(r)}})]})}}]),r}(n.a.Component),cn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={txt:""},e.onDiscardChanges=function(){e.setState({txt:""}),e.props.onIsAddItem()},e.handleChange=function(t){"Enter"===t.key?(t.preventDefault(),e.onAddTask()):e.setState({txt:t.target.value})},e.onAddTask=function(){var t=e.state.txt;t&&(e.props.onAddTask(t),e.setState({txt:""}))},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.state.txt;return Object(Ce.jsxs)("div",{className:"add-new-task",children:[Object(Ce.jsx)(we.a,{type:"text",className:"text-area-auto task-edit",value:e,onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("button",{className:"save-task",onClick:this.onAddTask,children:"Add"}),Object(Ce.jsx)("button",{className:"discard-task",onClick:this.onDiscardChanges,children:"X"})]})]})}}]),r}(n.a.Component),on=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAddItem:!1,currChecklist:null,title:null},e.onDeleteChecklist=function(){var t=e.props,r=t.board,a=t.currCard,n=t.checklistIdx;a.checklists.splice(n,1),e.props.updateBoard(r)},e.onDeleteTask=function(t){var r=e.state.currChecklist,a=e.props,n=a.board;a.currCard;r.tasks.splice(t,1),e.props.updateBoard(n)},e.onEditTask=function(t,r,a){var n=e.state,s=n.currChecklist,c=(n.title,e.props),o=c.board,i=c.currCard;if(s.tasks[t].isDone=r,s.tasks[t].txt=a,s.tasks.every((function(e){return e.isDone}))){e.props.updateBoard(o,"Completed checklist",i,s.title)}else e.props.updateBoard(o)},e.onAddTask=function(t){var r=e.state.currChecklist,a=e.props,n=a.board;a.currCard;r.tasks.push({id:$.makeId(),txt:t,isDone:!1}),e.props.updateBoard(n)},e.onIsAddItem=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isAddItem:!e.state.isAddItem}))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currCard,r=e.checklistIdx,a=t.checklists[r],n=a.title;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{currChecklist:a,title:n}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.isAddItem,a=t.currChecklist,n=this.props,s=n.board,c=n.checklistIdx;return s&&null!==c&&a?Object(Ce.jsxs)("div",{className:"checklist-app",children:[Object(Ce.jsxs)("div",{className:"flex direction-row space-between ",children:[Object(Ce.jsxs)("div",{className:"flex direction-row",children:[Object(Ce.jsx)(nt.a,{className:"card-details-icon"}),Object(Ce.jsx)("h3",{className:"card-subtitle",children:a.title})]}),Object(Ce.jsx)("button",{className:"delete-checklist hover",onClick:this.onDeleteChecklist,children:"Delete"})]}),Object(Ce.jsx)(tn,{currChecklist:a}),a.tasks.length?a.tasks.map((function(t,r){return Object(Ce.jsx)(sn,{task:t,taskIdx:r,onEditTask:e.onEditTask,onDeleteTask:e.onDeleteTask},t.id)})):Object(Ce.jsx)(Ce.Fragment,{}),!r&&Object(Ce.jsx)("button",{className:"add-item hover",onClick:this.onIsAddItem,children:"Add an item"}),r&&Object(Ce.jsx)(cn,{onIsAddItem:this.onIsAddItem,onAddTask:this.onAddTask})]}):Object(Ce.jsx)(Ce.Fragment,{})}}]),r}(n.a.Component);var dn={updateBoard:be},ln=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),dn)(on);function un(e){var t=e.currCard,r=t.checklists;return Object(Ce.jsx)(Ce.Fragment,{children:r.map((function(e,r){return Object(Ce.jsx)(ln,{currCard:t,checklistIdx:r},e.checklistId)}))})}function bn(e){var t=e.board,r=e.currListIdx,a=e.currCardIdx,n=e.handleClose,s=t.lists[r].cards[a],c=s.cardStyle.id?"cover-mode "+s.cardStyle.color:"",o=s.cardStyle.img?"img-cover cover-mode":c;return Object(Ce.jsxs)("div",{className:o,style:{backgroundImage:"url(".concat(s.cardStyle.img,")")},children:[Object(Ce.jsx)("div",{className:"close-window-btn pointer flex align-center justify-center",onClick:n,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})}),c&&Object(Ce.jsx)("div",{className:"cover-menu pointer",children:Object(Ce.jsx)(Or,{type:"cover",title:"Cover",titleModal:"Cover",board:t,currListIdx:r,currCardIdx:a})})]})}var jn=r(275),hn=r.n(jn),pn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.cardAttachment;return Object(Ce.jsxs)("a",{href:e.url,target:"_blank",className:"card-attachment-preview flex direction-row",children:[Object(Ce.jsx)("img",{src:e.url}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("div",{className:"flex direction-row",children:[Object(Ce.jsxs)("h4",{children:[e.fileName," "]}),Object(Ce.jsx)(hn.a,{className:"icon"})]}),Object(Ce.jsxs)("div",{children:[Object(Ce.jsxs)("small",{children:["Added on ",new Date(e.createdAt).toString().substring(0,16)," - "]}),Object(Ce.jsx)("small",{className:"delete",onClick:this.props.onDeleteAttach(e.id),children:" Delete "})]})]})]})}}]),r}(n.a.Component);function fn(e){var t=e.board,r=e.currListIdx,a=e.currCardIdx,n=e.OnUpdateBoard,s=t.lists[r].cards[a].attachments,c=function(e){return function(c){c.stopPropagation(),c.preventDefault();var o=s.findIndex((function(t){return t.id===e}));s.splice(o,1);var i=t.lists[r].cards[a];n(t,"Removed attachment",i)}};return s.length?Object(Ce.jsxs)("div",{className:"card-attachments",children:[Object(Ce.jsxs)("div",{className:"title flex direction-row align-center",children:[Object(Ce.jsx)(bt.a,{className:"card-details-icon"}),Object(Ce.jsx)("h3",{className:"card-subtitle",children:"Attachments"})]}),Object(Ce.jsx)("div",{children:s.map((function(e){return Object(Ce.jsx)(pn,{cardAttachment:e,onDeleteAttach:c},e.id)}))}),Object(Ce.jsx)(Or,{type:"add-attachments",title:"attachments",titleModal:"Attachments",board:t,currListIdx:r,currCardIdx:a})]}):Object(Ce.jsx)(Ce.Fragment,{})}function On(){return Object(Ce.jsxs)("div",{className:"display-card-archive flex direction-row align-center",children:[Object(Ce.jsx)(Ma.a,{})," ",Object(Ce.jsx)("h3",{children:"This card is Archived."})]})}var mn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={currListIdx:null,currCardIdx:null},e.getCurrCard=function(t){var r=e.props.match.params.listId,a=e.props.match.params.cardId,n=t.lists.findIndex((function(e){return e.listId===r})),s=t.lists[n].cards.findIndex((function(e){return e.cardId===a}));e.setState(Object(x.a)(Object(x.a)({},e.state),{},{currListIdx:n,currCardIdx:s}))},e.onToggleDone=function(){var t=e.state,r=t.currListIdx,a=t.currCardIdx,n=e.props.board,s=n.lists[r].cards[a];s.dueDate.isDone=!s.dueDate.isDone;var c=s.dueDate.isDone?"Marked the due date complete":"Marked the due date incomplete";e.props.updateBoard(n,c,s)},e.OnUpdateBoard=function(t,r,a,n){e.props.updateBoard(t,r,a,n)},e.handleClose=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.board;this.getCurrCard(e)}},{key:"render",value:function(){var e=this.state,t=e.currListIdx,r=e.currCardIdx,a=this.props.board;if(!a||null===r||null===t)return Object(Ce.jsx)(da,{});var n=a.lists[t].cards[r];return Object(Ce.jsxs)("div",{className:"card-details-wrapper",children:[Object(Ce.jsx)("div",{className:"screen-card-details",onClick:this.handleClose}),Object(Ce.jsxs)("div",{className:"card-details",children:[Object(Ce.jsx)(bn,{board:a,currCard:n,currListIdx:t,currCardIdx:r,handleClose:this.handleClose}),n.isArchived?Object(Ce.jsx)(On,{}):Object(Ce.jsx)(Ce.Fragment,{}),Object(Ce.jsxs)("div",{className:"card-details-main-content",children:[Object(Ce.jsx)(Ya,{board:a,currListIdx:t,currCardIdx:r,OnUpdateBoard:this.OnUpdateBoard}),Object(Ce.jsxs)("div",{className:"card-details-content",children:[Object(Ce.jsxs)("div",{className:"card-details-main",children:[Object(Ce.jsxs)("div",{className:"card-details-items flex direction-row items-flex-start wrap",children:[n.cardMembers.length?Object(Ce.jsxs)("div",{children:[Object(Ce.jsx)("h3",{children:"Members"}),Object(Ce.jsx)(vr,{members:n.cardMembers,board:a,currListIdx:t,currCardIdx:r,currCard:n,isCardOpen:!0})]}):"",n.cardLabelIds.length?Object(Ce.jsx)(Ga,{cardLabelIds:n.cardLabelIds,boardLabels:a.labels,board:a,currListIdx:t,currCardIdx:r,isCardOpen:!0}):"",n.dueDate.date&&Object(Ce.jsx)("div",{id:"due-date-preview-card",children:Object(Ce.jsx)(Or,{type:"dates-edit",title:"Dates",titleModal:"Dates",board:a,currListIdx:t,currCardIdx:r,dueDate:n.dueDate,onToggleDone:this.onToggleDone})})]}),Object(Ce.jsx)(en,{board:a,currListIdx:t,currCardIdx:r,OnUpdateBoard:this.OnUpdateBoard}),Object(Ce.jsx)(fn,{board:a,currListIdx:t,currCardIdx:r,OnUpdateBoard:this.OnUpdateBoard}),Object(Ce.jsx)(un,{currCard:n}),Object(Ce.jsx)(Va,{board:a,currListIdx:t,currCardIdx:r,OnUpdateBoard:this.OnUpdateBoard})]}),Object(Ce.jsx)("div",{className:"card-details-sidebar",children:Object(Ce.jsx)(Pa,{board:a,currListIdx:t,currCardIdx:r,handleClose:this.handleClose})})]})]})]})]})}}]),r}(n.a.Component);var gn={loadBoards:se,removeBoard:de,addBoard:ie,updateBoard:be,loadListAndCard:oe},xn=Object(g.b)((function(e){return{board:e.boardReducer.board,currCard:e.boardReducer.currCard}}),gn)(mn),vn=r(192),Cn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"getTasksCount",get:function(){var e=this.props.board,t=0;return e.lists.forEach((function(e){t+=e.cards.length})),t}},{key:"getOverdueCount",get:function(){var e=this.props.board,t=0,r=0;return e.lists.forEach((function(e){e.cards.forEach((function(e){e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()?t++:e.dueDate&&e.dueDate.isDone&&r++}))})),{overdueCount:t,doneCount:r}}},{key:"percentageDone",get:function(){return this.getOverdueCount.doneCount/this.getTasksCount*100}},{key:"render",value:function(){return Object(Ce.jsxs)("div",{className:"progress-bar-done",children:[Object(Ce.jsx)("h1",{children:"Done Tasks"}),Object(Ce.jsx)("div",{className:"progress-bar",children:Object(Ce.jsx)(vn.a,{className:"circularProgressbar",value:this.percentageDone,styles:Object(vn.b)({pathColor:"#61bd4fb1",trailColor:"#ffffffee"}),children:Object(Ce.jsxs)("div",{className:"text-done",children:[this.percentageDone.toFixed(),"% Done"]})})})]})}}]),r}(n.a.Component),yn=r(48),kn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"mapTasksPerLabel",get:function(){var e=this.props.board,t=e.labels.map((function(e,t){return{label:e.title?e.title:"label".concat(t+1," (no title)"),id:e.id,tasks:0}}));return e.lists.forEach((function(e){t.forEach((function(t){e.cards.forEach((function(e){e.cardLabelIds.some((function(e){return e===t.id}))&&t.tasks++}))}))})),t=t.filter((function(e){return 0!==e.tasks}))}},{key:"getPieData",get:function(){var e=this.mapTasksPerLabel;return{labels:e.map((function(e){return e.label})),datasets:[{label:"# of Votes",data:e.map((function(e){return e.tasks})),backgroundColor:["#61bd4fb1","#f2d600b1","#ff9f1ab1","#eb5a46b1","#c377e0b1","#5ba4cfb1","#51e898b1","#2acce5b1","#ff8ed4b1"],borderColor:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#5ba4cf","#51e898","#2acce5","#ff8ed4"],borderWidth:.5}]}}},{key:"render",value:function(){var e=this.getPieData;return e.datasets[0].data.length?Object(Ce.jsxs)("div",{className:"pie-task-per-label",children:[Object(Ce.jsx)("h1",{children:"Tasks per label"}),Object(Ce.jsx)(yn.b,{data:e,height:10,width:10})]}):Object(Ce.jsxs)("div",{className:"pie-task-per-label no-result",children:[Object(Ce.jsx)("h1",{children:"Tasks per label"}),"Sorry, there is no tasks ",Object(Ce.jsx)("br",{}),"tagged to any labels..."]})}}]),r}(n.a.Component),Nn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"mapTasksPerMember",get:function(){var e=this.props.board,t=e.boardMembers.filter((function(e){return"pandaguest"!==e.username})).map((function(e){return{fullname:e.fullname,tasks:0}}));return e.lists.forEach((function(e){t.forEach((function(t){e.cards.forEach((function(e){e.cardMembers.some((function(e){return e.fullname===t.fullname}))&&t.tasks++}))}))})),t}},{key:"getPieData",get:function(){var e=this.mapTasksPerMember;return{labels:e.map((function(e){return e.fullname})),datasets:[{label:"Tasks",data:e.map((function(e){return e.tasks})),backgroundColor:["#45cbb2","#0079bf"],borderColor:["#45cbb2","#0079bf"],borderWidth:1}]}}},{key:"render",value:function(){var e=this.getPieData;return console.log("data",e),e.datasets[0].data.length<2?Object(Ce.jsxs)("div",{className:"bar-task-per-member no-result",children:[Object(Ce.jsx)("h1",{children:"Tasks per member"}),"Sorry, not enough data",Object(Ce.jsx)("br",{}),"to analyze..."]}):Object(Ce.jsxs)("div",{className:"bar-task-per-member",children:[Object(Ce.jsx)("h1",{children:"Tasks per member"}),Object(Ce.jsx)(yn.a,{height:350,width:200,data:e,options:{indexAxis:"y",maintainAspectRatio:!1,responsive:!0,scales:{x:{ticks:{stepSize:1}}},plugins:{legend:{display:!1}}}})]})}}]),r}(n.a.Component),In=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"getMapTasksPerList",get:function(){var e=this.props.board,t=[];return e.lists.forEach((function(e){t.push({list:e.listTitle,tasks:e.cards.length})})),t}},{key:"getBarData",get:function(){var e=this.getMapTasksPerList;return{labels:e.map((function(e){return e.list})),datasets:[{label:"Tasks",data:e.map((function(e){return e.tasks})),backgroundColor:["#45cbb2","#0079bf"],borderColor:["#45cbb2","#0079bf"],borderWidth:1}]}}},{key:"render",value:function(){var e=this.getBarData;return Object(Ce.jsxs)("div",{className:"bar-task-per-list",children:[Object(Ce.jsx)("h1",{children:"Tasks per list"}),Object(Ce.jsx)(yn.a,{data:e,height:200,width:350,options:{scales:{y:{ticks:{stepSize:1}}},legend:{display:!1},plugins:{legend:{display:!1}}}})]})}}]),r}(n.a.Component),wn=r(278),Bn=r.n(wn),Sn=r(279),Tn=r.n(Sn),Dn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"getTasksCount",get:function(){var e=this.props.board,t=0;return e.lists.forEach((function(e){t+=e.cards.length})),t}},{key:"getOverdueCount",get:function(){var e=this.props.board,t=0;return e.lists.forEach((function(e){e.cards.forEach((function(e){e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()&&t++}))})),t}},{key:"percentage",get:function(){return this.getOverdueCount/this.getTasksCount*100}},{key:"render",value:function(){var e=this.props.board;return Object(Ce.jsxs)("div",{className:"dashboard-title",children:[Object(Ce.jsxs)("h1",{className:"title flex align-center justify-center",children:[Object(Ce.jsx)(Bn.a,{}),e.boardTitle]}),Object(Ce.jsxs)("ul",{className:"dashboard-stats clean-list",children:[Object(Ce.jsx)("li",{children:Object(Ce.jsxs)("h2",{children:[Object(Ce.jsx)(Ja.a,{}),this.getTasksCount," Tasks"]})}),Object(Ce.jsx)("li",{children:Object(Ce.jsxs)("h2",{children:[Object(Ce.jsx)(et.a,{}),e.boardMembers.length," Members"]})}),Object(Ce.jsx)("li",{children:Object(Ce.jsxs)("h2",{children:[Object(Ce.jsx)(Tn.a,{}),this.getOverdueCount," Overdue"]})})]})]})}}]),r}(n.a.Component),Ln=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"getMapTasksOverTime",get:function(){var e=this.props.board,t={};return e.lists.forEach((function(e){e.cards.forEach((function(e){e.dueDate.date&&(t[e.dueDate.date]?t[e.dueDate.date].count++:t[e.dueDate.date]={count:1,color:"#45cbb2"},e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()&&(t[e.dueDate.date].color="#eb5a46"))}))})),{data:(t=Object.entries(t).sort((function(e,t){return e[0].localeCompare(t[0])}))).map((function(e){return{x:e[0],y:e[1].count}})),background:t.map((function(e){return e[1].color}))}}},{key:"render",value:function(){var e=this.getMapTasksOverTime;return e.data.length?Object(Ce.jsxs)("div",{className:"line-tasks-over-time",children:[Object(Ce.jsx)("h1",{children:"Tasks per date"}),Object(Ce.jsx)(yn.c,{height:200,width:300,data:{datasets:[{data:e.data,backgroundColor:e.background,borderColor:"rgb(75, 192, 192)",tension:.5,borderWidth:1.5,showLine:!0,pointRadius:6}]},options:{scales:{x:{ticks:{callback:function(e,t,r){return new Date(e).toString().substring(4,11)}}},y:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{tooltip:{callbacks:{label:function(){return"Task"}}}}}})]}):Object(Ce.jsxs)("div",{className:"line-tasks-over-time no-result",children:[Object(Ce.jsx)("h1",{children:"Tasks over time"}),"Sorry, not enough data to analyze.. ",Object(Ce.jsx)("br",{}),"try add more tasks"]})}}]),r}(n.a.Component),An=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).goBack=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){yn.d.font.size=16,yn.d.color="#fff",yn.d.plugins.legend.display=!1}},{key:"render",value:function(){var e=this.props.board,t=e.lists.filter((function(e){return 0!==e.cards.length}));return e.lists.length&&t.length?Object(Ce.jsxs)("div",{className:"dashboard-wrapper",children:[Object(Ce.jsx)("div",{className:"screen-dashboard"}),Object(Ce.jsxs)("section",{className:"dashboard",children:[Object(Ce.jsx)("div",{className:"close-window-btn pointer flex align-center justify-center",onClick:this.goBack,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})}),Object(Ce.jsx)(Dn,{board:e}),Object(Ce.jsxs)("div",{className:"charts-container",children:[Object(Ce.jsx)(Nn,{board:e}),Object(Ce.jsx)(kn,{board:e}),Object(Ce.jsx)(Cn,{board:e}),Object(Ce.jsx)(Ln,{board:e}),Object(Ce.jsx)(In,{board:e})]})]})]}):Object(Ce.jsxs)("div",{className:"dashboard-wrapper",children:[Object(Ce.jsx)("div",{className:"screen-dashboard"}),Object(Ce.jsxs)("section",{className:"dashboard",children:[Object(Ce.jsx)("div",{className:"close-window-btn pointer flex align-center justify-center",onClick:this.goBack,children:Object(Ce.jsx)("img",{src:Pt,alt:"close"})}),Object(Ce.jsxs)("h1",{className:"no-data",children:["No data to show... ",Object(Ce.jsx)("br",{}),"Try adding tasks to your board"]})]})]})}}]),r}(n.a.Component);var Mn={loadBoard:ce},En=Object(g.b)((function(e){return{board:e.boardReducer.board}}),Mn)(An),Un=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isMenuOpen:!1},e.onUpdateBoard=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";e.props.updateBoard(t,r,a,n)},e.onDragEnd=function(t){var r=t.destination,a=t.source,n=t.type,s=e.props.board;if(r){var c=a.droppableId,o=r.droppableId,i=a.index,d=r.index;if(c!==o||d!==i){if("list"===n){var l,u=s.lists.splice(i,1);return(l=s.lists).splice.apply(l,[d,0].concat(Object(m.a)(u))),void e.props.updateBoard(s)}if(c===o){var b,j=s.lists.find((function(e){return e.listId===c})),h=j.cards.splice(i,1);(b=j.cards).splice.apply(b,[d,0].concat(Object(m.a)(h)))}if(c!==o){var p,f=s.lists.find((function(e){return e.listId===c})),O=f.cards.splice(i,1),g=s.lists.find((function(e){return e.listId===o}));if(!g.cards)return void g.push(O);(p=g.cards).splice.apply(p,[d,0].concat(Object(m.a)(O)))}e.props.updateBoard(s)}}},e.onToggleLabels=function(){e.props.toggleLabels()},e.onOpenDashboard=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id,"/dashboard"))},e.goToTemplateClone=function(t){e.props.history.push("/boards/".concat(t))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,r,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedInUser){e.next=6;break}return e.next=3,this.props.loginAsGuest();case 3:return t=e.sent,e.next=6,this.props.loadBoards(t._id);case 6:r=this.props.match.params.boardId,this.props.loadBoard(r),F.emit("boardId",r),F.on("board updated",(function(e){a.props.loadBoard(e._id)})),F.on("sending notification",(function(e){a.props.setNotif(e)}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){F.off("board updated",this.updateSocket),F.off("boardId"),this.props.setNotif(!1),F.off("sending notification")}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.match.params.boardId;e.board&&r!==this.props.board._id&&this.props.loadBoard(r)}},{key:"render",value:function(){var e=this.props.board;if(!e||!Object.keys(e).length)return Object(Ce.jsx)(da,{});var t=$.getFormattedBgStyle(e.boardStyle,"full");return Object(Ce.jsxs)("section",{className:"board-app flex direction-col",children:[Object(Ce.jsx)(h.a,{exact:!0,component:xn,path:"/boards/:boardId/:listId/:cardId"}),Object(Ce.jsx)(h.a,{exact:!0,component:En,path:"/boards/:boardId/dashboard"}),Object(Ce.jsx)(wa,{board:e,onUpdateBoard:this.onUpdateBoard,onOpenDashboard:this.onOpenDashboard,goToTemplateClone:this.goToTemplateClone}),Object(Ce.jsx)("div",{className:"board-background",style:t}),Object(Ce.jsxs)("div",{className:"board-canvas flex",children:[Object(Ce.jsx)(ge.a,{onDragEnd:this.onDragEnd,children:Object(Ce.jsx)(Xr,{board:e,lists:e.lists,onUpdateBoard:this.onUpdateBoard,className:"board"})}),Object(Ce.jsx)(Sa,{board:e,onUpdateBoard:this.onUpdateBoard})]})]})}}]),r}(n.a.Component);var Fn={removeBoard:de,loadBoards:se,loadBoard:ce,updateBoard:be,toggleLabels:le,setNotif:he,loginAsGuest:me},_n=Object(g.b)((function(e){return{boards:e.boardReducer.boards,board:e.boardReducer.board,isLabelOpen:e.boardReducer.isLabelOpen,loggedInUser:e.userReducer.loggedInUser}}),Fn)(Un),Rn=r.p+"static/media/trackit-logo.eee6b0e1.svg",Pn=r.p+"static/media/trackit-logo-white.83a18cf5.svg";function Gn(e){var t=e.isLoggedIn,r=t?"/boards":"/",a=t?Pn:Rn;return Object(Ce.jsx)(tr.c,{to:r,children:Object(Ce.jsxs)("div",{className:"logo-container flex align-center",children:[Object(Ce.jsx)("span",{className:"icon-span flex align-center justify-center",children:Object(Ce.jsx)("img",{className:"icon",src:a,alt:""})}),Object(Ce.jsx)("h1",{className:"logo-name",children:"TrackIt"})]})})}function Hn(){return Object(Ce.jsx)("header",{className:"home-header flex",children:Object(Ce.jsxs)("nav",{className:"nav-bar flex space-between align-center",children:[Object(Ce.jsx)(Gn,{isLoggedIn:!1}),Object(Ce.jsxs)("div",{className:"login-signup flex align-center",children:[Object(Ce.jsx)(tr.c,{className:"login",to:"/login",children:"Log in"}),Object(Ce.jsx)(tr.c,{className:"signup home-btn",to:"/signup",children:"Sign up"})]})]})})}var qn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onStartAsGuest=Object(O.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loginAsGuest();case 2:e.props.history.push("/boards");case 3:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(r,[{key:"render",value:function(){return Object(Ce.jsx)(Ce.Fragment,{children:Object(Ce.jsxs)("section",{className:"home-page main-container",children:[Object(Ce.jsx)(Hn,{}),Object(Ce.jsxs)("div",{className:"hero flex align-center",children:[Object(Ce.jsxs)("div",{className:"info flex direction-col justify-center align-center",children:[Object(Ce.jsx)("h1",{children:"TrackIt helps teams to stay on track."}),Object(Ce.jsx)("p",{children:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with TrackIt."}),Object(Ce.jsx)("button",{onClick:this.onStartAsGuest,className:"start home-btn",children:"Try as a guest"})]}),Object(Ce.jsx)("img",{src:"https://d2k1ftgv7pobq7.cloudfront.net/meta/p/res/images/spirit/hero/6a3ccd8e5c9a0e8ebea4235d12da6b24/hero.png",alt:""})]})]})})}}]),r}(n.a.Component);var zn={loginAsGuest:me},Wn=Object(g.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),zn)(qn),Jn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={credentials:{username:"",password:""},isLoginFailed:!1,isLoading:!1},e.clearForm=function(){var t={username:"",password:""};e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{credentials:t})}))},e.handleChange=function(t){var r=t.target.name,a=t.target.value;e.setState({credentials:Object(x.a)(Object(x.a)({},e.state.credentials),{},Object(Jt.a)({},r,a))})},e.onLogin=Object(O.a)(f.a.mark((function t(){var r,a=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=a.length>0&&void 0!==a[0]?a[0]:null)&&r.preventDefault(),t.prev=2,e.setState({isLoading:!0}),t.next=6,e.props.onLogin(e.state.credentials);case 6:e.props.history.push("/boards"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1,isLoginFailed:!0})})),e.clearForm(),setTimeout(e.clearErrMsg,5e3);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.clearErrMsg=function(){e.setState({isLoginFailed:!1})},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.credentials,t=e.username,r=e.password,a=this.state,n=a.isLoginFailed,s=a.isLoading;return Object(Ce.jsxs)("div",{className:"login-signup-page",children:[Object(Ce.jsx)(Gn,{isLoggedIn:!1}),Object(Ce.jsxs)("div",{className:"form-container",children:[s&&Object(Ce.jsx)(da,{}),n&&Object(Ce.jsx)("p",{className:"login-signup-error",children:"Login failed, please check your username and password"}),Object(Ce.jsx)("h3",{children:"Log in to TrackIt"}),Object(Ce.jsxs)("form",{className:"login-signup-form flex direction-col align-center justify-center",onSubmit:this.onLogin,children:[Object(Ce.jsx)("input",{type:"text",name:"username",value:t,placeholder:"Username",onChange:this.handleChange,required:!0,autoFocus:!0}),Object(Ce.jsx)("input",{type:"password",name:"password",value:r,placeholder:"Password",onChange:this.handleChange,required:!0}),Object(Ce.jsx)("button",{children:"Log in"})]}),Object(Ce.jsx)(tr.b,{className:"to-login-signup",to:"/signup",children:"Sign up for an account"})]})]})}}]),r}(n.a.Component);var Kn={onLogin:Oe,loadBoards:se},Vn=Object(g.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Kn)(Jn),Qn=r(280),Xn=r.n(Qn),Yn=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={credentials:{username:"",password:"",fullname:"",imgUrl:""},isSignupFailed:!1,isLoading:!1},e.clearForm=function(){var t={username:"",password:"",fullname:"",imgUrl:""};e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{credentials:t})}))},e.handleChange=function(t){var r=t.target.name,a=t.target.value;e.setState({credentials:Object(x.a)(Object(x.a)({},e.state.credentials),{},Object(Jt.a)({},r,a))})},e.onSignup=Object(O.a)(f.a.mark((function t(){var r,a=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=a.length>0&&void 0!==a[0]?a[0]:null)&&r.preventDefault(),t.prev=2,e.setState({isLoading:!0}),t.next=6,e.props.onSignup(e.state.credentials);case 6:e.props.history.push("/boards"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1,isSignupFailed:!0})})),e.clearForm(),setTimeout(e.clearErrMsg,5e3);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.clearErrMsg=function(){e.setState({isSignupFailed:!1})},e.responseGoogle=function(t){console.log(t);var r=t.profileObj.name,a=t.profileObj.givenName,n=t.profileObj.imageUrl;e.setState({credentials:Object(x.a)(Object(x.a)({},e.state.credentials),{},{fullname:r,username:a,imgUrl:n})}),e.onSignup()},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.credentials,t=e.username,r=e.password,a=e.fullname,n=this.state,s=n.isSignupFailed,c=n.isLoading;return Object(Ce.jsxs)("div",{className:"login-signup-page",children:[Object(Ce.jsx)(Gn,{isLoggedIn:!1}),Object(Ce.jsxs)("div",{className:"form-container",children:[c&&Object(Ce.jsx)(da,{}),s&&Object(Ce.jsx)("p",{className:"login-signup-error",children:"Username is already in use"}),Object(Ce.jsx)("h3",{children:"Sign up for your account"}),Object(Ce.jsxs)("form",{className:"login-signup-form flex direction-col align-center justify-center",onSubmit:this.onSignup,children:[Object(Ce.jsx)("input",{type:"text",name:"fullname",value:a,placeholder:"Full Name",onChange:this.handleChange,required:!0,autoFocus:!0}),Object(Ce.jsx)("input",{type:"text",name:"username",value:t,placeholder:"Username",onChange:this.handleChange,required:!0}),Object(Ce.jsx)("input",{type:"password",name:"password",value:r,placeholder:"Password",onChange:this.handleChange,required:!0}),Object(Ce.jsx)(Xn.a,{clientId:"424178974509-9hf317najboqtp0hkg1to5j6ogduo4r6.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"}),Object(Ce.jsx)("button",{children:"Sign up"})]}),Object(Ce.jsx)(tr.b,{className:"to-login-signup",to:"/login",children:"Already have an account? Log In"})]})]})}}]),r}(n.a.Component);var Zn={onSignup:function(e){return console.log("credentials",e),function(t){G.signup(e).then((function(e){t({type:"SET_USER",user:e})})).catch((function(e){console.log("Cannot signup",e)}))}}},$n=Object(g.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Zn)(Yn);function es(e){var t=e.board,r=e.loggedInUser,a=e.toggleStarBoard,n=e.isYellow,s=e.isLarge,c=$.getFormattedBgStyle(t.boardStyle);return Object(Ce.jsx)(tr.b,{to:"/boards/".concat(t._id),children:Object(Ce.jsxs)("div",{className:"board-preview",style:c,children:["object"===typeof t.boardStyle?Object(Ce.jsx)("div",{className:"darken-image"}):Object(Ce.jsx)(Ce.Fragment,{}),Object(Ce.jsxs)("div",{className:"preview-details flex direction-col space-between",children:[Object(Ce.jsx)("h3",{className:"board-title",children:t.boardTitle}),Object(Ce.jsx)("div",{className:"board-preview-bottom",children:t.createdBy?Object(Ce.jsxs)(Ce.Fragment,{children:[t.createdBy._id!==r._id?Object(Ce.jsxs)("p",{className:"board-owner",children:[t.createdBy.fullname,"'s board"]}):Object(Ce.jsx)(Ce.Fragment,{}),Object(Ce.jsx)("button",{className:"star-btn ".concat(t.isStarred?"show":""),onClick:function(e){return a(e,t)},children:Object(Ce.jsx)(Yr.b.Provider,{value:{className:"star-icon ".concat(n?"yellow":""," ").concat(s?"large":"")},children:Object(Ce.jsx)(rr.a,{})})})]}):Object(Ce.jsx)(Ce.Fragment,{})})]})]})})}var ts=r(281);function rs(e){var t=e.path;return Object(Ce.jsx)("section",{className:"side-nav flex direction-col",children:Object(Ce.jsx)(tr.c,{to:"/boards",children:Object(Ce.jsxs)("div",{className:"nav-item flex align-center".concat("boards"===t?" active":""),children:[Object(Ce.jsx)(ts.a,{}),Object(Ce.jsx)("h3",{children:"Boards"})]})})})}var as=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={templateBoards:[]},e.getTemplateBoards=function(){return e.props.boards.filter((function(e){return!e.createdBy}))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.loggedInUser){e.next=5;break}return e.next=4,this.props.loginAsGuest();case 4:t=e.sent;case 5:return e.next=7,this.props.loadBoards(t._id);case 7:r=this.getTemplateBoards(),this.setState({templateBoards:r}),this.props.loadBoard(null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.path.slice(1),t=this.state.templateBoards;return this.props.loggedInUser&&t.length?Object(Ce.jsx)("section",{className:"main-container boards",children:Object(Ce.jsxs)("section",{className:"boards-page flex",children:[Object(Ce.jsx)(rs,{path:e}),Object(Ce.jsx)("section",{className:"boards-section",children:Object(Ce.jsxs)("section",{className:"template-boards",children:[Object(Ce.jsx)("h3",{children:"Templates"}),Object(Ce.jsx)("div",{className:"boards-preview",children:t.map((function(e){return e.isStarred=!1,Object(Ce.jsx)(es,{board:e},e._id)}))})]})})]})}):Object(Ce.jsx)(da,{})}}]),r}(n.a.Component);var ns={loadBoards:se,loadBoard:ce},ss=Object(g.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),ns)(as),cs=r.p+"static/media/close-icon-white.95ac7fd6.svg",os=r.p+"static/media/checked-icon-white.52bf0792.svg",is=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={title:"",backgrounds:[{small:"https://images.unsplash.com/photo-1632813101579-7e7d4dd2c69a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQzNDg&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632813101579-7e7d4dd2c69a?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632714394526-1e87d08d56c4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQzODg&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632714394526-1e87d08d56c4?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632829754530-d94a588e2dde?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQ0MTk&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632829754530-d94a588e2dde?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632918425510-c02e76616549?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQ0NDI&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632918425510-c02e76616549?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1527&q=80"},"linear-gradient(225deg, rgb(255, 60, 172) 0%, rgb(120, 75, 160) 50%, rgb(43, 134, 197) 100%)","#0079bf","#d29034","#519839","#b04632"],selectedBgIdx:0},e.handleChange=function(t){var r=t.target.value;e.setState({title:r})},e.createBoard=function(){var t=Object(O.a)(f.a.mark((function t(r){var a,n,s,c,o,i,d,l,u,b,j;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),a=e.state,n=a.title,s=a.backgrounds,c=a.selectedBgIdx,n){t.next=4;break}return t.abrupt("return");case 4:if(o=e.props.loggedInUser,(i=Object(x.a)({},o)).isStarred=!1,d=[i],"pandaguest"===o.username){t.next=14;break}return t.next=11,G.getGuestUser();case 11:(l=t.sent).isStarred=!1,d.push(l);case 14:return u={boardTitle:n,createdAt:Date.now(),createdBy:o,cardsCount:0,boardStyle:s[c],covers:e.getCovers(),labels:e.getLabels(),boardMembers:d,lists:[],activities:[],archive:[]},t.next=17,e.props.addBoard(u);case 17:b=e.props,j=b.board,(0,b.onToggleCreateBoard)(),e.props.history.push("/boards/".concat(j._id));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getLabels=function(){for(var e=[],t=1;t<=6;t++){var r={id:$.makeId(),title:"",color:"clr".concat(t)};e.push(r)}return e},e.getCovers=function(){for(var e=[],t=1;t<=10;t++){var r={id:$.makeId(),color:"clr".concat(t)};e.push(r)}return e},e.selectBg=function(t){e.setState({selectedBgIdx:t})},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.title,a=t.backgrounds,n=t.selectedBgIdx,s=a[n],c=$.getFormattedBgStyle(s);return Object(Ce.jsxs)("div",{className:"create-board-wrapper",children:[Object(Ce.jsx)("div",{className:"screen",onClick:this.props.onToggleCreateBoard}),Object(Ce.jsxs)("div",{className:"create-board flex direction-col align-center",children:[Object(Ce.jsxs)("div",{className:"board-preview flex",children:[Object(Ce.jsxs)("div",{className:"title-section",style:c,children:[n<4&&Object(Ce.jsx)("span",{className:"bg-overlay"}),Object(Ce.jsx)("button",{className:"close-btn",onClick:this.props.onToggleCreateBoard,children:Object(Ce.jsx)("img",{src:cs,alt:"Close"})}),Object(Ce.jsx)("form",{onSubmit:this.createBoard,children:Object(Ce.jsx)("input",{type:"text",autoComplete:"off",className:"title-input",name:"title",placeholder:"Add board title",value:r,onChange:this.handleChange})}),Object(Ce.jsxs)("p",{className:"user-title",children:[this.props.loggedInUser.fullname,"'s Workspace"]})]}),Object(Ce.jsx)("div",{className:"choose-bg flex wrap space-between",children:a.map((function(t,r){var a=$.getFormattedBgStyle(t,"small");return Object(Ce.jsx)("div",{className:"bg-color",style:a,onClick:function(){return e.selectBg(r)},children:r===n&&Object(Ce.jsx)("span",{className:"selected",children:Object(Ce.jsx)("img",{src:os,alt:"selected"})})},$.makeId())}))})]}),Object(Ce.jsx)("button",{className:"create-btn".concat(r?"":" disabled"),onClick:this.createBoard,children:"Create board"})]})]})}}]),r}(n.a.Component);var ds={addBoard:ie,loadBoard:ce},ls=Object(h.f)(is),us=Object(g.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),ds)(ls),bs=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={userBoards:[],isCreateBoard:!1},e.getBoardsByType=function(t){var r=e.props.loggedInUser;return G.filterUserBoards(e.state.userBoards,r._id,t)},e.toggleStarBoard=function(t,r){t.preventDefault();var a=e.props,n=a.loggedInUser;(0,a.updateBoard)(G.toggleStarBoard(r,n._id))},e.onToggleCreateBoard=function(){var t=e.state.isCreateBoard;e.setState({isCreateBoard:!t})},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.loggedInUser){e.next=5;break}return e.next=4,this.props.loginAsGuest();case 4:t=e.sent;case 5:return e.next=7,this.props.loadBoards(t._id);case 7:r=G.filterUserBoards(this.props.boards,t._id,"all"),console.log("userBoards",r),this.setState({userBoards:r}),this.props.loadBoard(null);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.match.path.slice(1),r=this.state.userBoards,a=this.props.loggedInUser;if(!a)return Object(Ce.jsx)(da,{});var n=r.length?this.getBoardsByType("starred"):[],s=r.length?this.getBoardsByType("owner"):[],c=r.length?this.getBoardsByType("guest"):[];return Object(Ce.jsxs)("section",{className:"main-container boards",children:[Object(Ce.jsxs)("section",{className:"boards-page flex",children:[Object(Ce.jsx)(rs,{path:t}),Object(Ce.jsxs)("section",{className:"boards-section",children:[n.length?Object(Ce.jsxs)("section",{className:"inner-section starred-boards",children:[Object(Ce.jsxs)("div",{className:"star-title flex",children:[Object(Ce.jsx)(Yr.b.Provider,{value:{className:"star-icon"},children:Object(Ce.jsx)(rr.a,{})}),Object(Ce.jsx)("h3",{children:"Starred boards"})]}),Object(Ce.jsx)("div",{className:"boards-preview",children:n.map((function(t){return Object(Ce.jsx)(es,{board:t,loggedInUser:a,toggleStarBoard:e.toggleStarBoard,isYellow:!0},t._id)}))})]}):Object(Ce.jsx)(Ce.Fragment,{}),Object(Ce.jsxs)("section",{className:"inner-section user-boards",children:[Object(Ce.jsx)("h3",{children:"Your Boards"}),Object(Ce.jsxs)("div",{className:"boards-preview",children:[s.map((function(t){return t.isStarred=t.boardMembers.find((function(e){return e._id===a._id})).isStarred,Object(Ce.jsx)(es,{board:t,loggedInUser:a,toggleStarBoard:e.toggleStarBoard,isLarge:t.isStarred},t._id)})),Object(Ce.jsx)("div",{className:"board-preview create-board flex align-center justify-center",onClick:this.onToggleCreateBoard,children:"Create new board"})]})]}),c.length?Object(Ce.jsxs)("section",{className:"inner-section guest-boards user-boards",children:[Object(Ce.jsx)("h3",{children:"Guest Boards"}),Object(Ce.jsx)("div",{className:"boards-preview",children:c.map((function(t){return t.isStarred=t.boardMembers.find((function(e){return e._id===a._id})).isStarred,Object(Ce.jsx)(es,{board:t,loggedInUser:a,toggleStarBoard:e.toggleStarBoard,isLarge:t.isStarred},t._id)}))})]}):Object(Ce.jsx)(Ce.Fragment,{})]})]}),this.state.isCreateBoard&&Object(Ce.jsx)(us,{onToggleCreateBoard:this.onToggleCreateBoard})]})}}]),r}(n.a.Component);var js={loadBoard:ce,loadBoards:se,updateBoard:be,loginAsGuest:me};var hs=[{path:"/boards/:boardId",component:_n},{path:"/boards",component:Object(g.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),js)(bs)},{path:"/cardNotFound",component:function(){return Object(Ce.jsxs)("section",{className:"card-not-found",children:[Object(Ce.jsx)("h1",{children:"Card not found."}),Object(Ce.jsxs)("div",{children:["This card may be deleted or on a private board. ",Object(Ce.jsx)("br",{}),"If someone gave you this link, they may need to invite you to one of their boards or Workspaces."]})]})}},{path:"/templates",component:ss},{path:"/login",component:Vn},{path:"/signup",component:$n},{path:"/",component:Wn}],ps=r(282),fs=r.p+"static/media/menu-plus-icon.7b919228.svg",Os=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isCreateBoard:!1,isUserBoardsOpen:!1,isStarredBoardsOpen:!1,isNotif:!1},e.onToggleCreateBoard=function(){var t=e.state.isCreateBoard;e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isCreateBoard:!t})}))},e.onToggleUserBoards=function(){var t=e.state.isUserBoardsOpen;e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isUserBoardsOpen:!t})}))},e.onToggleStarredBoards=function(){var t=e.state.isStarredBoardsOpen;e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isStarredBoardsOpen:!t})}))},e.markReadNotif=function(){e.props.setNotif(!1)},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){F.setup()}},{key:"render",value:function(){var e=this.props,t=e.loggedInUser,r=e.isNotif;if(Object(ps.a)(this.state),!t)return Object(Ce.jsx)(Ce.Fragment,{});var a=r?"newNotif":"noNotif";return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)("header",{className:"main-header",children:Object(Ce.jsxs)("nav",{className:"nav-bar flex space-between",children:[Object(Ce.jsxs)("div",{className:"main-nav-links flex align-center",children:[Object(Ce.jsx)(Gn,{isLoggedIn:!0}),Object(Ce.jsx)("span",{className:"header-btn".concat(this.state.isUserBoardsOpen?" open":""),children:Object(Ce.jsx)(Or,{type:"userBoards",titleModal:"Boards",onToggle:this.onToggleUserBoards})}),Object(Ce.jsx)("span",{className:"header-btn starred".concat(this.state.isStarredBoardsOpen?" open":""),children:Object(Ce.jsx)(Or,{type:"starredBoards",titleModal:"Starred boards",onToggle:this.onToggleStarredBoards})}),Object(Ce.jsx)("button",{className:"header-btn create",onClick:this.onToggleCreateBoard,children:"Create"}),Object(Ce.jsx)("button",{className:"header-btn create-small flex align-center justify-center",onClick:this.onToggleCreateBoard,children:Object(Ce.jsx)("img",{src:fs,alt:""})})]}),Object(Ce.jsxs)("div",{className:"user-section flex align-center",children:[Object(Ce.jsx)("div",{className:"notifications",children:Object(Ce.jsx)(Or,{type:a,titleModal:"Notifications",markReadNotif:this.markReadNotif})}),Object(Ce.jsx)("div",{className:"user-avatar",children:Object(Ce.jsx)(Or,{type:"userMenu",titleModal:"Account",user:t,from:"AppHeader"})})]})]})}),this.state.isCreateBoard&&Object(Ce.jsx)(us,{onToggleCreateBoard:this.onToggleCreateBoard})]})}}]),r}(n.a.Component);var ms={setNotif:he},gs=Object(g.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser,isNotif:e.boardReducer.isNotif,notifCount:e.boardReducer.notifCount}}),ms)(Os),xs=r(284),vs=r.n(xs),Cs=r(283),ys=r.n(Cs),ks=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={msg:null},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.removeEvent=ee.on("show-user-msg",(function(t){e.setState({msg:t}),setTimeout((function(){e.setState({msg:null})}),4e3)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){var e=this;if(!this.state.msg)return Object(Ce.jsx)("span",{});var t=this.state.msg.type||"";return Object(Ce.jsxs)("section",{className:"user-msg  flex direction-row align-center",children:[Object(Ce.jsxs)("div",{className:" txt-msg flex direction-row align-center",children:["danger"===t&&Object(Ce.jsx)(ys.a,{}),"success"===t&&Object(Ce.jsx)(vs.a,{}),this.state.msg.txt]}),Object(Ce.jsx)("button",{onClick:function(){e.setState({msg:null})},children:"x"})]})}}]),r}(n.a.Component),Ns=function(e){Object(b.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onOnline=function(){if(console.log("online"),ne.loadFromStorage("BOARD_DB")){var t=ne.loadFromStorage("BOARD_DB");ne.saveToStorage("BOARD_DB",null),F.emit("boardId",t._id),e.props.updateBoard(t),re("Back online,all changes updated!")}},e.onOffline=function(){console.log("offline"),e.props.setOffline(!0),ae("offline, changes will sync when back online")},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("offline",this.onOffline),window.addEventListener("online",this.onOnline)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("online",this.onOnline),window.removeEventListener("offline",this.onOffline)}},{key:"render",value:function(){return Object(Ce.jsxs)(Ce.Fragment,{children:[Object(Ce.jsx)(gs,{}),Object(Ce.jsxs)("main",{children:[Object(Ce.jsx)(h.c,{children:hs.map((function(e){return Object(Ce.jsx)(h.a,{component:e.component,path:e.path},e.path)}))}),Object(Ce.jsx)(ks,{})]})]})}}]),r}(n.a.Component);var Is={setOffline:function(e){return function(){var t=Object(O.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r({type:"SET_OFFLINE",isOffline:e})}catch(a){console.log("Cannot set offline",a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateBoard:be},ws=Object(g.b)((function(e){return{board:e.boardReducer.board,isOffline:e.boardReducer.isOffline}}),Is)(Ns),Bs=(r(511),r(54)),Ss=r(285),Ts={boards:[],board:null,lastUpdatedBoard:null,isLabelOpen:!1,currCard:null,currList:null,isNotif:!1,notifCount:0,filterBy:{searchKey:"",labels:[],members:[],isFilter:!1,cardsCount:0},labelsProps:{label:{},isCreate:!1},searchBg:"",isOffline:!1};var Ds={loggedInUser:G.getLoggedinUser()};var Ls=Object(Bs.c)({boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ts,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"SET_BOARDS":return Object(x.a)(Object(x.a)({},e),{},{boards:t.boards});case"SET_BOARD":var r=JSON.parse(JSON.stringify(t.board));return Object(x.a)(Object(x.a)({},e),{},{board:Object(x.a)({},t.board),lastUpdatedBoard:r});case"ADD_BOARD":return Object(x.a)(Object(x.a)({},e),{},{board:t.board,boards:[].concat(Object(m.a)(e.boards),[t.board])});case"REMOVE_BOARD":return Object(x.a)(Object(x.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"UPDATE_BOARD":return Object(x.a)(Object(x.a)({},e),{},{board:t.board,boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"UPDATE_LAST_UPDATED_BOARD":var a=JSON.parse(JSON.stringify(e.board));return Object(x.a)(Object(x.a)({},e),{},{lastUpdatedBoard:a});case"UNDO_UPDATE_BOARD":if(e.lastUpdatedBoard){var n=JSON.parse(JSON.stringify(e.lastUpdatedBoard));return Object(x.a)(Object(x.a)({},e),{},{boards:e.boards.map((function(t){return t._id===e.board._id?e.lastUpdatedBoard:t})),board:n})}return e;case"TOGGLE_LABELS":var s=e.isLabelOpen;return Object(x.a)(Object(x.a)({},e),{},{isLabelOpen:!s});case"SET_LIST":return Object(x.a)(Object(x.a)({},e),{},{currList:t.list});case"SET_CARD":return Object(x.a)(Object(x.a)({},e),{},{currCard:t.card});case"SET_NOTIF":return Object(x.a)(Object(x.a)({},e),{},{isNotif:t.isNotif});case"SET_NOTIF_COUNT":return Object(x.a)(Object(x.a)({},e),{},{notifCount:t.count});case"SET_NOTIF_COUNT++":return Object(x.a)(Object(x.a)({},e),{},{notifCount:e.notifCount+1});case"SET_FILTER":return Object(x.a)(Object(x.a)({},e),{},{filterBy:t.filterBy});case"SET_LABEL":return Object(x.a)(Object(x.a)({},e),{},{labelsProps:t.labelsProps});case"SET_SEARCH_BG":return Object(x.a)(Object(x.a)({},e),{},{searchBg:t.searchStr});case"SET_OFFLINE":return Object(x.a)(Object(x.a)({},e),{},{isOffline:t.isOffline});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ds,t=arguments.length>1?arguments[1]:void 0,r=e;if("SET_USER"===t.type)r=Object(x.a)(Object(x.a)({},e),{},{loggedInUser:t.user});return r}}),As=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Bs.d,Ms=Object(Bs.e)(Ls,As(Object(Bs.a)(Ss.a)));c.a.render(Object(Ce.jsx)(n.a.StrictMode,{children:Object(Ce.jsx)(g.a,{store:Ms,children:Object(Ce.jsx)(tr.a,{children:Object(Ce.jsx)(ws,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");o?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var a=r.headers.get("content-type");404===r.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):i(t,e)}))}}(),d()}},[[512,1,2]]]);
//# sourceMappingURL=main.c17c5ea6.chunk.js.map