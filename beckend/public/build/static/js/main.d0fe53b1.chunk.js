(this["webpackJsonpfinal-proj"]=this["webpackJsonpfinal-proj"]||[]).push([[0],{517:function(e,t,a){},518:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),s=a(24),c=a.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,601)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))},o=a(6),d=a(7),l=a(9),u=a(8),b=a(36),j=a(11),h=a.n(j),p=a(19),O=a(25),f=a(14),x=a(4),m=a(146),g=a.n(m),v="/api/",C=g.a.create({withCredentials:!0}),y=function(e,t){return I(e,"GET",t)},k=function(e,t){return I(e,"POST",t)},N=function(e,t){return I(e,"PUT",t)};function I(e){return B.apply(this,arguments)}function B(){return B=Object(p.a)(h.a.mark((function e(t){var a,r,n,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",r=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,C({url:"".concat(v).concat(t),method:a,data:r,params:"GET"===a?r:null});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),B.apply(this,arguments)}var w={query:T,get:function(e,t){return T(e).then((function(e){return e.find((function(e){return e._id===t}))}))},post:function(e,t){return t._id=D(),T(e).then((function(a){return a.push(t),S(e,a),t}))},put:function(e,t){return T(e).then((function(a){var r=a.findIndex((function(e){return e._id===t._id}));return a.splice(r,1,t),S(e,a),t}))},remove:function(e,t){return T(e).then((function(a){var r=a.findIndex((function(e){return e._id===t}));a.splice(r,1),S(e,a)}))},postMany:function(e,t){return T(e).then((function(a){return t=t.map((function(e){return Object(x.a)(Object(x.a)({},e),{},{_id:D()})})),a.push.apply(a,Object(O.a)(t)),S(e,a),a}))},save:S};function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=JSON.parse(localStorage.getItem(e))||[];return new Promise((function(e,r){setTimeout((function(){e(a)}),t)}))}function S(e,t){localStorage.setItem(e,JSON.stringify(t))}function D(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var L={query:function(e){return y("boards",{userId:e})},remove:function(e){return w.remove("boardsDB",e)},getBoardById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y("boards/".concat(e),{filterBy:t})},save:function(e){return console.log("board",e),e._id?N("boards/".concat(e._id),e):k("boards",e)}};var A=a(271),M=a.n(A),E=function(){var e=null,t={setup:function(){e=M()("")},on:function(t,a){e.on(t,a)},off:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(a?e.off(t,a):e.removeAllListeners(t))},emit:function(t,a){e.emit(t,a)},terminate:function(){e=null}};return t}();var U="usersDB",F="loggedinUser",_={login:function(e){return G.apply(this,arguments)},logout:function(){return H.apply(this,arguments)},signup:function(e){return q.apply(this,arguments)},getLoggedinUser:z,getUsers:function(){return y("user")},getById:function(e){return R.apply(this,arguments)},remove:function(e){return w.remove(U,e)},update:function(e){return P.apply(this,arguments)},filterUserBoards:function(e,t,a){return e.filter((function(e){return!!e.createdBy&&("all"===a||("owner"===a?e.createdBy._id===t:"guest"===a?e.createdBy._id!==t:"starred"===a?K(e,t):[]))}))},isBoardStarred:K,toggleStarBoard:function(e,t){var a=e.boardMembers.findIndex((function(e){return e._id===t}));return e.boardMembers[a].isStarred=!e.boardMembers[a].isStarred,e}};function R(){return(R=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("user/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.put(U,t);case 2:return z()._id===t._id&&W(t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/login",t);case 2:if(a=e.sent){e.next=5;break}throw new Error("login service error");case 5:return e.abrupt("return",W(a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(p.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.initials=J(t.fullname),e.next=3,k("auth/signup",t);case 3:return a=e.sent,e.abrupt("return",W(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.removeItem(F),e.next=3,k("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return JSON.parse(sessionStorage.getItem(F)||"null")}function K(e,t){return e.boardMembers.find((function(e){return e._id===t})).isStarred}function W(e){return sessionStorage.setItem(F,JSON.stringify(e)),e}function J(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()})).join("")}var V={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],a="";for(;e>0;)e--,a+=t[Math.floor(Math.random()*t.length)]+" ";return a},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},getFormattedBgStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small";if("object"===typeof e){var a="small"===t?e.small:e.full;return{background:"url(".concat(a,") center / cover no-repeat")}}return{background:e}}};var X={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";X.emit("show-user-msg",{txt:e,type:t})}function Y(e){Q(e,"success")}function Z(e){Q(e,"danger")}function $(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.query(e);case 3:r=t.sent,a({type:"SET_BOARDS",boards:r}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Z("Sorry cannot load boards"),console.log("BoardActions: err in loadBoards",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function ee(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=5;break}t.t0=null,t.next=8;break;case 5:return t.next=7,L.getBoardById(e);case 7:t.t0=t.sent;case 8:r=t.t0,a({type:"SET_BOARD",board:Object(x.a)({},r)}),t.next=16;break;case 12:t.prev=12,t.t1=t.catch(0),Z("Sorry cannot load board"),console.log("BoardActions: err in loadBoards",t.t1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function te(e,t){return function(){var a=Object(p.a)(h.a.mark((function a(r){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{r({type:"SET_LIST",list:e}),r({type:"SET_CARD",card:t})}catch(n){console.log("BoardActions: err in loadList",n)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function ae(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.save(e);case 3:return r=t.sent,a({type:"ADD_BOARD",board:r}),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),Z("Sorry cannot add board"),console.log("BoardActions: err in addBoard",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function re(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.remove(e);case 3:a({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),Z("Sorry cannot remove board"),console.log("BoardActions: err in removeBoard",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function ne(){return function(e){e({type:"TOGGLE_LABELS"})}}function se(e,t){return function(){var a=Object(p.a)(h.a.mark((function a(r){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r({type:"SET_FILTER",filterBy:e}),t){a.next=6;break}a.t0=null,a.next=9;break;case 6:return a.next=8,L.getBoardById(t,e);case 8:a.t0=a.sent;case 9:n=a.t0,r({type:"UPDATE_BOARD",board:Object(x.a)({},n)}),a.next=16;break;case 13:a.prev=13,a.t1=a.catch(0),console.log("Cannot update notification",a.t1);case 16:case"end":return a.stop()}}),a,null,[[0,13]])})));return function(e){return a.apply(this,arguments)}}()}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e.createdBy?function(){var n=Object(p.a)(h.a.mark((function n(s){var c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t&&(c=ie(t,a,r),e.activities.unshift(c)),s({type:"UPDATE_BOARD",board:Object(x.a)({},e)}),n.next=5,L.save(e);case 5:s({type:"UPDATE_LAST_UPDATED_BOARD"}),E.emit("update-board",e),t&&c.isNotif&&E.emit("received notification"),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),s({type:"UNDO_UPDATE_BOARD"}),Z("Sorry cannot update board"),console.log("BoardActions: err in updateBoard",n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}():function(e){e({type:"UNDO_UPDATE_BOARD"}),Z("Templates cannot be changed")}}function ie(e,t,a){return function(e){switch(e.action){case"Added":case"Removed":case"Set due date":case"Removed due date":case"Changed due date":case"Completed checklist":case"Added comment":e.isNotif=!0;break;default:e.isNotif=!1}return e}({id:V.makeId(),txt:a,createdAt:Date.now(),byMember:_.getLoggedinUser(),action:e,card:t?{cardId:t.cardId,cardTitle:t.cardTitle}:"",isNotif:!1})}function oe(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_NOTIF",isNotif:e}),a(e?{type:"SET_NOTIF_COUNT++"}:{type:"SET_NOTIF_COUNT",count:0})}catch(r){console.log("Cannot update notification",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function de(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_LABEL",labelsProps:e})}catch(r){console.log("Cannot set labels props",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function le(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.login(e);case 3:return r=t.sent,a({type:"SET_USER",user:r}),t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(0),console.log("Cannot login",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function ue(){try{return le({username:"pandaguest",password:"123"})}catch(e){console.log("error login as guest")}}window.myBus=X,window.showUserMsg=Q;var be=a(66),je=a(595),he=a(593),pe=a(576),Oe=a.p+"static/media/close.e9203ba4.svg",fe=a(1),xe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cardTitle:""},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onAddCard();var a=t.target.value;e.setState({cardTitle:a})},e.onAddCard=function(){var t=e.state.cardTitle;if(t){var a={cardId:V.makeId(),cardTitle:t,isArchived:!1,description:"",comments:[],cardMembers:[],cardLabelIds:[],checklists:[],createdAt:new Date,dueDate:{},attachments:[],cardStyle:{}},r=e.props,n=r.list,s=r.board;n.cards.push(a),e.setState({cardTitle:""});e.props.updateBoard(s,"Added card",a),e.props.onCloseAdding()}else e.props.onCloseAdding()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.cardTitle;return Object(fe.jsxs)("div",{className:"all-cards card-previre-content",children:[Object(fe.jsx)(pe.a,{className:"text-area-auto card-input",value:e,placeholder:"Enter a title for this card...","aria-label":"empty textarea",onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(fe.jsxs)("div",{className:"add-card-actions flex align-center",children:[Object(fe.jsx)("button",{onClick:this.onAddCard,className:"add-card-btn",children:"Add card"}),Object(fe.jsx)("button",{onClick:this.props.onCloseAdding,children:Object(fe.jsx)("img",{src:Oe,alt:"close"})})]})]})}}]),a}(n.a.Component);var me={updateBoard:ce},ge=Object(f.b)((function(e){return{board:e.boardReducer.board}}),me)(xe);function ve(e){var t=e.list,a=e.board,r=e.onUpdateBoard;return Object(fe.jsx)("div",{children:Object(fe.jsx)("p",{onClick:function(){var e=a.lists.findIndex((function(e){return e.listId===t.listId}));a.lists.splice(e,1),console.log("board from delete",a);var n="Deleted list ".concat(t.listTitle);r(n)},children:"Delete"})})}var Ce=a(591),ye=a(76),ke=a.n(ye),Ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,inputTxt:"",filteredMembers:[]},e.toggleMember=function(t){var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=e.props,c=s.loggedInUser,i=s.board,o=i.lists[r].cards[n];if(e.isMemberOnCard(o,t._id)){var d=o.cardMembers.findIndex((function(e){return e._id===t._id}));o.cardMembers.splice(d,1);var l=c._id===t._id?"Left":"Removed"}else{o.cardMembers.push(t);l=c._id===t._id?"Join":"Added"}e.props.updateBoard(i,l,o)},e.isMemberOnCard=function(e,t){return e.cardMembers.some((function(e){return e._id===t}))},e.handleChange=function(t){var a=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{inputTxt:a.value}),(function(){var t=new RegExp(e.state.inputTxt,"i");e.setState(Object(x.a)(Object(x.a)({},e.state),{},{filteredMembers:e.props.board.boardMembers.filter((function(e){return t.test(e.fullname)}))}))}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{board:t,currListIdx:a,currCardIdx:r,filteredMembers:t.boardMembers}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,r=t.currListIdx,n=t.currCardIdx,s=t.filteredMembers,c=t.inputTxt;if(!a||null===n||null===r)return Object(fe.jsx)(fe.Fragment,{});var i=a.lists[r].cards[n];return Object(fe.jsxs)("section",{className:"members-popover",children:[Object(fe.jsx)(pe.a,{className:"search-members text-area-auto",placeholder:"Search members",type:"text",onChange:this.handleChange,value:c}),Object(fe.jsx)("h3",{children:"Board Members"}),s.length?s.map((function(t){return Object(fe.jsxs)("div",{className:"member-preview flex direction-row space-between ",onClick:function(){return e.toggleMember(t)},children:[Object(fe.jsxs)("div",{className:"flex direction-row ",children:[Object(fe.jsx)(Ce.a,{className:"card-details-avatar",alt:t.fullname,src:t.imgUrl},t._id),Object(fe.jsxs)("div",{className:"flex align-center",children:[t.fullname," (",t.username,")"]})]}),e.isMemberOnCard(i,t._id)&&Object(fe.jsx)(ke.a,{})]})})):Object(fe.jsxs)(fe.Fragment,{children:["Looks like that person isn't a member yet. ",Object(fe.jsx)("br",{}),"Enter their email address to ",Object(fe.jsx)("br",{}),"add them to the card and board."]})]})}}]),a}(n.a.Component);var Ie={updateBoard:ce},Be=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Ie)(Ne),we=a(41),Te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={labelName:"",labelColor:"",isDelete:!1,labelsColor:[]},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onSaveLabel();var a=t.target.value;e.setState({labelName:a})},e.onSaveLabel=function(){var t=e.state,a=t.labelName,r=t.labelColor,n=e.props,s=n.labelsProps,c=n.board,i=s.label;i?(i.title=a||i.title,i.color=r||i.color):c.labels.push({id:V.makeId(),title:a,color:r}),s.label={},e.props.setUpdateLabel(s),e.props.updateBoard(c),e.props.changeTitle(!1,"labels-preview")},e.labelChoose=function(t){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{labelColor:t}))},e.deleteLabel=function(){var t=e.props,a=t.labelsProps,r=t.board,n=a.label,s=r.labels.findIndex((function(e){return e.id===n.id}));r.labels.splice(s,1),e.props.updateBoard(r),e.props.changeTitle(!1,"labels-preview")},e.confirmDeleteLabel=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isDelete:!e.state.isDelete}))},e.createLabelsArr=function(){for(var t=[],a=1,r=0;r<11;r++)t.push("clr"+a++);e.setState(Object(x.a)(Object(x.a)({},e.state),{},{labelsColor:t}))},e.isLabelChoosen=function(t){return t===e.state.labelColor},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.labelsProps.label;this.createLabelsArr(),e&&this.setState({labelName:e.title})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isDelete,r=t.labelsColor,n=t.labelName,s=this.props.labelsProps;return Object(fe.jsxs)("div",{className:"labels-board",children:[!a&&Object(fe.jsxs)("div",{children:[Object(fe.jsx)("label",{className:"edit-labels-label",children:"Name"}),Object(fe.jsx)(pe.a,{className:"text-area-auto label-input",value:n,"aria-label":"empty textarea",onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(fe.jsx)("label",{className:"edit-labels-label",children:"Select a color"}),Object(fe.jsxs)("div",{className:"color-plate",children:[r.map((function(t){return Object(fe.jsx)("div",{className:"color-sqr pointer + ".concat(t),onClick:function(){return e.labelChoose(t)},children:e.isLabelChoosen(t)&&Object(fe.jsx)(ke.a,{})},t.id)})),Object(fe.jsx)("p",{className:"label-no-color",children:"No color"})]}),Object(fe.jsxs)("div",{className:"edit-labels-actions flex space-between",children:[Object(fe.jsx)("div",{className:"edit-labels-btn save pointer",onClick:this.onSaveLabel,children:"Save"}),s.label&&Object(fe.jsx)("div",{className:"edit-labels-btn delete pointer",onClick:this.confirmDeleteLabel,children:"Delete"})]})]}),a&&Object(fe.jsxs)("div",{children:[Object(fe.jsx)("p",{className:"edit-label-delete",children:"There is no undo. This will remove this label from all cards and destroy its history."}),Object(fe.jsx)("div",{className:"edit-labels-btn delete deleted pointer",onClick:this.deleteLabel,children:"Delete"})]})]})}}]),a}(n.a.Component);var Se={updateBoard:ce,setUpdateLabel:de},De=Object(f.b)((function(e){return{boards:e.boardReducer.boards,labelsProps:e.boardReducer.labelsProps}}),Se)(Te),Le=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,currLabel:"",filteredLabels:[],inputTxt:""},e.toggleLabel=function(t){var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=Object(x.a)({},e.state.board),c=s.lists[r].cards[n];if(e.isLabelOnCard(c,t.id)){var i=c.cardLabelIds.findIndex((function(e){return e===t.id}));s.lists[r].cards[n].cardLabelIds.splice(i,1)}else s.lists[r].cards[n].cardLabelIds.push(t.id);e.props.updateBoard(s)},e.isLabelOnCard=function(e,t){return e.cardLabelIds.some((function(e){return e===t}))},e.editLabel=function(t){return function(a){a.stopPropagation();var r=e.props,n=r.changeTitle;(0,r.setUpdateLabel)({label:t,isCreat:!0}),n(!0,"Change label",t)}},e.createLabel=function(){e.props.changeTitle(!0,"Create label")},e.handleChange=function(t){var a=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{inputTxt:a.value}),(function(){var t=new RegExp(e.state.inputTxt,"i");e.setState(Object(x.a)(Object(x.a)({},e.state),{},{filteredLabels:e.props.board.labels.filter((function(e){return t.test(e.title)}))}))}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{board:t,currListIdx:a,currCardIdx:r,filteredLabels:t.labels}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,r=t.currListIdx,n=t.currCardIdx,s=(t.isCreate,t.currLabel,t.filteredLabels),c=t.inputTxt,i=this.props.labelsProps;if(!a||null===n||null===r)return Object(fe.jsx)(fe.Fragment,{});var o=a.lists[r].cards[n];return Object(fe.jsx)("section",{className:"label-popover",children:!i.isCreate&&Object(fe.jsxs)("div",{children:[Object(fe.jsx)(pe.a,{className:"search-labels text-area-auto",placeholder:"Search labels...",type:"text",onChange:this.handleChange,value:c}),Object(fe.jsx)("h4",{children:"Labels"}),s.length?s.map((function(t){return Object(fe.jsxs)("div",{className:"edit-label-popover flex",onClick:function(){return e.toggleLabel(t)},children:[Object(fe.jsxs)("div",{className:"edit-label-color "+t.color,children:[Object(fe.jsx)("span",{children:t.title}),e.isLabelOnCard(o,t.id)&&Object(fe.jsx)(ke.a,{})]}),Object(fe.jsx)("div",{onClick:e.editLabel(t),className:"edit-label-icon pointer",children:Object(fe.jsx)(we.c,{})})]},t.id)})):Object(fe.jsxs)(fe.Fragment,{children:["Sorry no results... ",Object(fe.jsx)("br",{}),"Maybe try to create a new label"]}),Object(fe.jsx)("div",{className:"create-label pointer",onClick:this.createLabel,children:"Create a new label"})]})})}}]),a}(n.a.Component);var Ae={loadBoards:$,removeBoard:re,addBoard:ae,updateBoard:ce,setUpdateLabel:de},Me=Object(f.b)((function(e){return{board:e.boardReducer.board,labelsProps:e.boardReducer.labelsProps}}),Ae)(Le),Ee=a(274),Ue=a.n(Ee),Fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={date:null},e.handleDateSelect=function(t){var a=t.toString(),r=a.substring(8,10),n=a.substring(4,7),s=a.substring(11,15),c=a.substring(17,28),i="".concat(r," ").concat(n," ").concat(s," ").concat(c);e.setState(Object(x.a)(Object(x.a)({},e.state),{},{date:Date.parse(i)}))},e.onSaveDate=function(t){var a=e.props,r=a.board,n=a.currListIdx,s=a.currCardIdx,c=r.lists[n].cards[s];if(t)if(t&&c.duedate&&!c.duedate.date)i="Set due date";else i="Changed due date";else var i="Removed due date";c.dueDate={date:t,isDone:!1},e.props.updateBoard(r,i,c),e.props.handleClose()},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx,n=t.lists[a].cards[r],s=n.dueDate&&n.dueDate.date?n.dueDate.date:Date.now();console.log("date",s),this.setState({date:s})}},{key:"render",value:function(){var e=this,t=this.state.date;return t?Object(fe.jsxs)("div",{className:"dates-popover",children:[Object(fe.jsx)(Ue.a,{onSelect:this.handleDateSelect,startDate:Date.now(),openToDate:t,inline:!0,formatWeekDay:function(e){return e.substr(0,3)}}),Object(fe.jsxs)("div",{className:" flex direction-col",children:[Object(fe.jsx)("button",{className:"btn-date-save",onClick:function(){return e.onSaveDate(e.state.date)},children:"Save"}),Object(fe.jsx)("button",{className:"btn-date-remove",onClick:function(){return e.onSaveDate(null)},children:"Remove"})]})]}):Object(fe.jsx)(fe.Fragment,{})}}]),a}(n.a.Component);var _e={loadBoards:$,removeBoard:re,addBoard:ae,updateBoard:ce},Re=Object(f.b)((function(e){return{boards:e.boardReducer.boards}}),_e)(Fe),Pe=a(597),Ge=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,title:"Checklist"},e.handleChange=function(t){var a=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{title:a.value}))},e.onAddChecklist=function(t){t.preventDefault();var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=a.title,c=a.board.lists[r].cards[n],i='Added checklist "'.concat(s,'"'),o=Object(x.a)({},e.state.board);o.lists[r].cards[n].checklists.push({checklistId:V.makeId(),title:s,tasks:[]}),e.props.updateBoard(o,i,c),e.props.handleClose()},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{board:t,currListIdx:a,currCardIdx:r}))}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.title;return t&&null!==r&&null!==a?Object(fe.jsxs)("section",{className:"popover-checklist",children:[Object(fe.jsx)("label",{children:"Title"}),Object(fe.jsxs)("form",{onSubmit:this.onAddChecklist,children:[Object(fe.jsx)("input",{className:"popover-checklist-input",name:"cardTitle",type:"text",onChange:this.handleChange,value:n}),Object(fe.jsx)(Pe.a,{onClick:this.onAddChecklist,variant:"contained",className:"add-btn",children:"Add"})]})]}):Object(fe.jsx)(fe.Fragment,{})}}]),a}(n.a.Component);var qe={updateBoard:ce},He=Object(f.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),qe)(Ge),ze="dXZ90rFg6fkomwI0ttsljiR3C_o35DBKwIhHcoX6oow",Ke={getImgs:function(e){return We.apply(this,arguments)}};function We(){return We=Object(p.a)(h.a.mark((function e(t){var a,r,n,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:10,t||(t="scenery",a++),e.next=4,g.a.get("https://api.unsplash.com/search/photos?query=".concat(t,"&per_page=").concat(a,"&orientation=landscape&client_id=").concat(ze));case 4:return r=e.sent,n=r.data.results.map((function(e){return{id:e.id,small:e.urls.small,full:"".concat(e.urls.full,"&auto=format&fit=crop&w=1920"),link:e.links.html,name:e.user.name}})),"scenery"===t&&n.shift(),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}var Je=a(105),Ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.getImgForCover(9)}},{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.searchCover,r=e.getImgForCover;return Object(fe.jsxs)("div",{className:"search-cover",children:[Object(fe.jsx)("div",{className:"search-cover-input",children:Object(fe.jsx)(Je.DebounceInput,{minLength:2,debounceTimeout:400,className:"search-cover-img text-area-auto",placeholder:"Search unsplash photo...",type:"text",onChange:t,value:a})}),Object(fe.jsx)("h4",{children:"Suggested searches"}),Object(fe.jsx)("div",{className:"suggested-keywords",children:["Animals","Business","Nature","Organization","Colorful","Minimal","Space","Perspective"].map((function(e,t){return Object(fe.jsx)("button",{className:"suggested-search-btn",onClick:function(){r(12,e)},children:e},t)}))})]})}}]),a}(n.a.Component),Xe={uploadFile:function(e){var t="https://api.cloudinary.com/v1_1/".concat("looply","/image/upload"),a=new FormData;return a.append("file",e.target.files[0]),a.append("upload_preset","oxageyls"),fetch(t,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return{id:V.makeId(),fileName:e.original_filename,url:e.secure_url,createdAt:Date.now()}})).catch((function(e){return console.error(e)}))}};var Qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isCoverSelected:"selected",coverImgs:[],isSearch:!1,searchCover:""},e.onToggleCover=function(){var t=Object(p.a)(h.a.mark((function t(a){var r,n,s,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.currListIdx,s=r.currCardIdx,c=Object(x.a)({},e.state.board),i=c.lists[n].cards[s],e.isCoverOnCard(i,a.id)?c.lists[n].cards[s].cardStyle={}:c.lists[n].cards[s].cardStyle={id:a.id,color:a.color,isCover:!1},t.next=6,e.props.updateBoard(c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isCoverOnCard=function(e,t){return e.cardStyle.id===t},e.handelSize=function(t,a){var r=e.props.board;t.cardStyle.isCover=a,e.props.updateBoard(r)},e.onRemoveCover=function(t){var a=e.props.board;t.cardStyle={},e.props.updateBoard(a)},e.handleChange=function(t){var a=t.target.value;e.setState({searchCover:a},(function(){e.getImgForCover(12)}))},e.getImgForCover=function(){var t=Object(p.a)(h.a.mark((function t(a){var r,n,s,c=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:"",n=e.state.searchCover,r&&(n=r),t.next=5,Ke.getImgs(n,a);case 5:s=t.sent,e.setState(Object(x.a)(Object(x.a)({},e.state),{},{coverImgs:s}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleImgCover=function(t,a){var r=e.props.board;e.isCoverOnCard(t,a.id)?t.cardStyle={}:t.cardStyle={id:a.id,img:a.small,isCover:!1},e.props.updateBoard(r)},e.onAddImage=function(){var t=Object(p.a)(h.a.mark((function t(a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe.uploadFile(a);case 2:r=t.sent,e.onSaveCover(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveCover=function(t){var a=e.props,r=a.board,n=a.currListIdx,s=a.currCardIdx,c=r.lists[n].cards[s];e.isCoverOnCard(c,t.id)?c.cardStyle={}:c.cardStyle={id:t.id,img:t.url,isCover:!1},c.attachments.unshift(t),e.props.updateBoard(r)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState({board:t,currListIdx:a,currCardIdx:r}),this.getImgForCover(6)}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,r=t.currListIdx,n=t.currCardIdx,s=t.coverImgs,c=t.searchCover,i=this.props,o=i.changeTitle,d=i.isSearch;if(!a||null===n||null===r)return Object(fe.jsx)(fe.Fragment,{});var l=a.lists[r].cards[n],u=l.cardStyle.isCover?"":"selected",b=l.cardStyle.isCover?"selected":"";return Object(fe.jsxs)("section",{className:"popover-cover",children:[d&&Object(fe.jsx)(Ve,{searchCover:c,getImgForCover:this.getImgForCover,handleChange:this.handleChange}),!d&&Object(fe.jsx)("h4",{children:"Size"}),!d&&Object(fe.jsxs)("div",{children:[Object(fe.jsxs)("div",{className:"header-cover",children:[Object(fe.jsxs)("div",{onClick:function(){e.handelSize(l,!1)},className:"header-half-cover pointer  ".concat(u),children:[Object(fe.jsx)("div",{className:"paragraph"}),Object(fe.jsx)("div",{className:"row"}),Object(fe.jsx)("div",{className:"row second"})]}),Object(fe.jsxs)("div",{onClick:function(){e.handelSize(l,!0)},className:"header-full-cover pointer ".concat(b),children:[Object(fe.jsx)("div",{className:"row full"}),Object(fe.jsx)("div",{className:"row second full"})]})]}),l.cardStyle.id&&Object(fe.jsx)("div",{className:"remove-cover btn",onClick:function(){e.onRemoveCover(l)},children:"Remove cover"})]}),!d&&Object(fe.jsx)("h4",{className:"color-title",children:"Colors"}),!d&&Object(fe.jsx)("div",{className:"color-plate",children:a.covers.length&&a.covers.map((function(t){return Object(fe.jsx)("div",{onClick:function(){return e.onToggleCover(t)},className:"color-sqr pointer ".concat(t.color," \n                             ").concat(e.isCoverOnCard(l,t.id)?"color-selected":""," ")},t.id)}))}),!d&&Object(fe.jsxs)("div",{children:[Object(fe.jsx)("h4",{children:"Attachment"}),Object(fe.jsx)("label",{htmlFor:"file-input",children:Object(fe.jsx)("div",{className:"uplaod-img btn pointer",children:"Upload a cover image"})}),Object(fe.jsx)("input",{type:"file",className:"file-input",id:"file-input",onChange:this.onAddImage})]}),Object(fe.jsxs)("div",{children:[!d&&Object(fe.jsx)("h4",{children:"Unsplash"}),d&&Object(fe.jsx)("h4",{children:"Top photos"}),Object(fe.jsx)("div",{className:"cover-img-plate ",children:s.map((function(t){return Object(fe.jsx)("div",{onClick:function(){return e.onToggleImgCover(l,t)},className:"img-cover ".concat(e.isCoverOnCard(l,t.id)?"cover-selected":""," "),style:{backgroundImage:"url(".concat(t.small,")")}},t.id)}))})]}),Object(fe.jsx)("div",{className:"search-cover btn pointer",children:!d&&Object(fe.jsx)("span",{onClick:function(){o(!0,"change cover")},children:"Search for photos"})})]})}}]),a}(n.a.Component);var Ye={loadBoards:$,removeBoard:re,addBoard:ae,updateBoard:ce},Ze=Object(f.b)((function(e){return{boards:e.boardReducer.boards}}),Ye)(Qe),$e=a(91),et=a.n($e),tt=a(279),at=a.n(tt),rt=a(156),nt=a.n(rt),st=a(280),ct=a.n(st),it=a(281),ot=a.n(it),dt=a(143),lt=a.n(dt),ut=a(157),bt=a.n(ut),jt=a(283),ht=a.n(jt),pt=a(284),Ot=a.n(pt),ft=a(282),xt=a.n(ft),mt=a.p+"static/media/menu-arrow-icon.1596174c.svg";function gt(e){var t=e.labelId,a=e.boardLabels,r=(e.type,a.find((function(e){return e.id===t})));return Object(fe.jsx)("div",{className:"".concat(r.color," label pointer"),children:r.title})}var vt=a(587),Ct=a(278),yt=a.n(Ct),kt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleDone=function(t){t.stopPropagation(),e.props.onToggleDone()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.dueDate;return Object(fe.jsxs)("div",{className:"due-date-preview",children:[Object(fe.jsx)("h3",{children:"Due Date"}),Object(fe.jsxs)("div",{className:"date-display flex direction-row",children:[Object(fe.jsx)(vt.a,{checked:e.isDone,onClick:this.onToggleDone}),Object(fe.jsxs)("div",{className:" gray hover flex direction-row align-center",children:[Object(fe.jsx)("div",{className:"date",children:new Date(e.date).toString().substring(0,16)}),e.isDone&&Object(fe.jsx)("div",{className:"status done",children:"COMPLETE"}),!e.isDone&&e.date<Date.now()&&Object(fe.jsx)("div",{className:"status overdue",children:"OVERDUE"}),Object(fe.jsx)(yt.a,{})]})]})]})}}]),a}(n.a.Component),Nt=a(206),It=a.n(Nt),Bt=a(207),wt=a.n(Bt),Tt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=t.loggedInUser,n=function(t){switch(t.type){case"members":case"change members":return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(et.a,{}),t.title]});case"add-members":case"add-labels":return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(lt.a,{})});case"list actions":return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(we.d,{})});case"labels":case"edit labels":return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(at.a,{})," ",t.title]});case"labels-preview":return Object(fe.jsx)(gt,Object(x.a)({},t));case"checklist":return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(nt.a,{})," Checklist"]});case"dates":return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ct.a,{}),t.title]});case"dates-edit":case"edit-dates":return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(kt,Object(x.a)({},t))," "]});case"attachments":return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(bt.a,{className:"attachment-icon"})," Attachments"]});case"add-attachments":return Object(fe.jsx)(fe.Fragment,{children:"Add an attachment"});case"cover":case"change cover":return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(ot.a,{})," ",Object(fe.jsx)("span",{children:t.title})]});case"delete-card":return Object(fe.jsxs)(fe.Fragment,{children:[" ",Object(fe.jsx)(xt.a,{})," Delete"]});case"move-card":return Object(fe.jsxs)(fe.Fragment,{children:[" ",Object(fe.jsx)(ht.a,{}),"  Move"]});case"copy-card":return Object(fe.jsxs)(fe.Fragment,{children:[" ",Object(fe.jsx)(Ot.a,{})," Copy"]});case"userMenu":return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(Ce.a,{alt:"",src:r.imgUrl,className:"logged-in-avatar",children:Object(fe.jsx)("p",{children:r.initials})})});case"userBoards":return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)("span",{onClick:function(){return t.onToggle()},children:[Object(fe.jsx)("span",{children:"Boards"}),Object(fe.jsx)("img",{src:mt,alt:""})]})});case"starredBoards":return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)("span",{onClick:function(){return t.onToggle()},children:[Object(fe.jsx)("span",{children:"Starred"}),Object(fe.jsx)("img",{src:mt,alt:""})]})});case"newNotif":return Object(fe.jsxs)(fe.Fragment,{children:[" ",Object(fe.jsx)(It.a,{})," ",Object(fe.jsx)("div",{className:"notif-background",children:Object(fe.jsx)("span",{className:"notif-count",children:e.props.notifCount})})]});case"noNotif":return Object(fe.jsx)(wt.a,{});default:return t.type}};return Object(fe.jsx)(n,Object(x.a)({type:a},this.props))}}]),a}(n.a.Component);var St=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount}}))(Tt),Dt=a(26);var Lt=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}))((function(e){var t=e.user,a=e.loggedInUser;return Object(fe.jsxs)("div",{className:"user-info flex",children:[Object(fe.jsx)(Ce.a,{alt:"",src:t.imgUrl,className:"user-avatar",children:Object(fe.jsx)("p",{children:t.initials})}),Object(fe.jsxs)("div",{className:"user-name-info",children:[Object(fe.jsx)("p",{className:"fullname",children:t.fullname}),Object(fe.jsx)("p",{className:"username",children:t.username}),a._id===t._id&&Object(fe.jsx)(Dt.b,{className:"edit-profile",to:"/boards",onClick:function(){e.handleClose()},children:"Edit profile info"})]})]})})),At=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onLogout=Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onLogout();case 2:e.props.history.push("/");case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.loggedInUser;return e?Object(fe.jsxs)("div",{className:"user-menu popover-content",children:[Object(fe.jsx)(Lt,{user:e,handleClose:this.props.handleClose}),Object(fe.jsx)("div",{children:Object(fe.jsx)("button",{onClick:this.onLogout,children:"Logout"})})]}):Object(fe.jsx)(fe.Fragment,{})}}]),a}(n.a.Component);var Mt={onLogout:function(){return function(e){_.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){console.log("Cannot logout",e)}))}}},Et=Object(b.f)(At),Ut=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Mt)(Et),Ft=a(592),_t=a(594),Rt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.activity,a=e.display;return Object(fe.jsxs)("div",{className:"activity-preview flex direction-row",children:[Object(fe.jsx)(Ce.a,{className:"card-details-avatar",alt:t.byMember.fullname,src:t.byMember.imgUrl},t.byMember._id),Object(fe.jsxs)("div",{children:[Object(fe.jsxs)("h4",{children:[t.byMember.fullname," ",t.action," ",t.txt,"menu"===a&&t.card.cardTitle&&'on card: "'.concat(t.card.cardTitle,'"')]}),Object(fe.jsxs)("small",{children:[" ",new Date(t.createdAt).toString().substring(0,16)]})]})]})}}]),a}(n.a.Component);function Pt(e){var t=e.board;return Object(fe.jsx)(fe.Fragment,{children:t.activities.length&&t.activities.map((function(e){return Object(fe.jsx)(Rt,{activity:e,display:"menu"},e.id)}))})}function Gt(e){var t=e.board,a=e.toggleMenu,n=e.isMenuOpen,s=function(e,t){return function(e){("keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&(a(),console.log("toggle menu"))}},c="right";return Object(fe.jsx)("div",{className:"menu-visible",children:Object(fe.jsxs)(r.Fragment,{children:[Object(fe.jsx)(Pe.a,{onClick:s(),children:c}),Object(fe.jsx)(Ft.a,{anchor:c,open:n,hideBackdrop:!0,children:Object(fe.jsxs)("div",{className:"menu-wrapper",children:[Object(fe.jsx)("div",{className:"menu-screen",onClick:s()}),Object(fe.jsxs)("div",{className:"board-menu-content",children:[Object(fe.jsxs)("div",{className:"board-menu-content-header flex",children:[Object(fe.jsx)("div",{className:"title",children:Object(fe.jsx)("h3",{children:"Menu"})}),Object(fe.jsx)("span",{className:"exit-icon",onClick:s(),children:Object(fe.jsx)("img",{src:Oe,alt:"Close"})})]}),Object(fe.jsx)(_t.a,{}),Object(fe.jsxs)("div",{className:"menu-content fancy-scrollbar",children:[Object(fe.jsx)("div",{className:"board-actions",children:Object(fe.jsx)("button",{className:"menu-action-btn",children:"Change background"})}),Object(fe.jsx)(_t.a,{}),Object(fe.jsx)("div",{className:"activities",children:Object(fe.jsx)(Pt,{board:t})})]})]})]})})]},c)})}var qt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,urlLink:""},e.onAddAttach=function(){var t=Object(p.a)(h.a.mark((function t(a){var r,n,s,c,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Z("Uploading..."),t.next=3,Xe.uploadFile(a);case 3:r=t.sent,n=e.props,s=n.board,c=n.currListIdx,i=n.currCardIdx,(o=s.lists[c].cards[i]).attachments.unshift(r),e.props.updateBoard(s,"Attached",o),e.props.handleClose(),Y("Uploading Complete");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState({board:t,currListIdx:a,currCardIdx:r})}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.currListIdx,r=e.currCardIdx;e.urlLink;return t&&null!==r&&null!==a?Object(fe.jsxs)("section",{className:"popover-attachment flex direction-col",children:[Object(fe.jsx)("label",{htmlFor:"file-upload",children:"Computer"}),Object(fe.jsx)("input",{id:"file-upload",type:"file",onChange:this.onAddAttach})]}):Object(fe.jsx)(fe.Fragment,{})}}]),a}(n.a.Component);var Ht={loadBoards:$,removeBoard:re,addBoard:ae,updateBoard:ce},zt=Object(f.b)((function(e){return{board:e.boardReducer.board}}),Ht)(qt);function Kt(e){var t=e.onDeleteCard;return Object(fe.jsxs)("section",{className:"delete-card-popover",children:[Object(fe.jsxs)("p",{children:["All actions will be removed from the activity ",Object(fe.jsx)("br",{}),"feed and you won\u2019t be able to re-open the ",Object(fe.jsx)("br",{}),"card. There is no undo."]}),Object(fe.jsx)("button",{onClick:t,children:"Delete"})]})}var Wt=a(20),Jt=a(585),Vt=a(598),Xt=a(581),Qt=a(589),Yt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={listIdx:0,cardIdx:0,title:""},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(Wt.a)({},r,n))},e.onMoveCard=function(t){var a,r=e.props.board,n=e.state,s=n.listIdx,c=n.cardIdx,i=n.title,o=r.lists[s].listId;r.lists.forEach((function(e){e.cards.forEach((function(a,r){a.cardId===t.cardId&&e.cards.splice(r,1)})),e.listId===o?(e.cards.splice(c,0,t),a="Moved card ".concat(i)):a="copied card ".concat(i)})),e.props.history.push("/boards/".concat(r._id)),e.props.updateBoard(r,a,t)},e.onCopyCard=function(){var t=e.props.currCard;if(e.state.title){var a=JSON.parse(JSON.stringify(t));a.cardId=V.makeId(),a.cardTitle=e.state.title,e.onMoveCard(a)}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currListIdx,a=e.currCardIdx,r=e.currCard;e.isCopy;this.setState({listIdx:t,cardIdx:a,title:r.cardTitle})}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,r=t.isCopy,n=this.state,s=n.listIdx,c=n.cardIdx,i=n.title,o=a.lists[s].cards;return Object(fe.jsxs)("section",{className:"move-copy-card-popover flex direction-col",children:[Object(fe.jsxs)("div",{className:"board-title",children:[Object(fe.jsx)("h4",{children:"Board:"}),Object(fe.jsx)("h4",{children:a.boardTitle})]}),r&&Object(fe.jsxs)("div",{className:"card-title flex direction-col",children:[Object(fe.jsx)("label",{htmlFor:"title",children:Object(fe.jsx)("h4",{children:"Title:"})}),Object(fe.jsx)(pe.a,{id:"title",name:"title",className:"text-area-auto",type:"text",placeholder:"Title",onChange:this.handleChange,value:i,autoFocus:!0})]}),Object(fe.jsx)("h4",{className:"copy-to",children:"copy to..."}),Object(fe.jsxs)("div",{className:"list-position flex diirection-row space-between",children:[Object(fe.jsxs)(Xt.a,{variant:"standard",children:[Object(fe.jsx)(Vt.a,{id:"list",children:"List"}),Object(fe.jsx)(Jt.a,{label:"List",labelId:"list",id:"select-list",value:s,name:"listIdx",onChange:this.handleChange,children:a.lists.map((function(e,t){return Object(fe.jsx)(Qt.a,{value:t,children:e.listTitle})}))})]}),Object(fe.jsxs)(Xt.a,{variant:"standard",children:[Object(fe.jsx)(Vt.a,{id:"position",children:"Position"}),Object(fe.jsx)(Jt.a,{labelId:"position",id:"select-position",value:c,name:"cardIdx",onChange:this.handleChange,children:o.length?o.map((function(e,t){return Object(fe.jsx)(Qt.a,{value:t,children:t?t+1:1})})):Object(fe.jsx)(Qt.a,{value:0,children:"1"})})]})]}),!r&&Object(fe.jsx)("button",{onClick:function(){return e.onMoveCard(e.props.currCard)},children:"Move"}),r&&Object(fe.jsx)("button",{onClick:this.onCopyCard,children:"Create card"})]})}}]),a}(n.a.Component);var Zt={updateBoard:ce},$t=Object(b.f)(Yt),ea=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Zt)($t),ta=(a(269),a(85)),aa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).toggleStar=function(t,a){t.stopPropagation();var r=e.props,n=r.loggedInUser;(0,r.updateBoard)(_.toggleStarBoard(a,n._id)),console.log("updated star board")},e.getBoardBtns=function(t){return console.log("this.props:",e.props),t.map((function(t){var a=V.getFormattedBgStyle(t.boardStyle);return Object(fe.jsxs)("div",{className:"board-menu-btn flex align-center",children:[Object(fe.jsxs)(Dt.b,{className:"flex align-center",to:"/boards/".concat(t._id),onClick:function(){return e.props.handleClose()},children:[Object(fe.jsx)("span",{className:"board-bg",style:a}),Object(fe.jsx)("p",{children:t.boardTitle})]},t._id),"starredBoards"===e.props.type?Object(fe.jsx)("button",{className:"star-board",onClick:function(a){return e.toggleStar(a,t)},children:Object(fe.jsx)(ta.a,{})}):Object(fe.jsx)(fe.Fragment,{})]},t._id)}))},e.getfilteredBoards=function(t){var a=e.props,r=a.boards,n=a.loggedInUser;return _.filterUserBoards(r,n._id,t)},e.goToBoard=function(t){e.props.handleClose(),e.props.history.push("/boards/".concat(t))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.loggedInUser,r=t.boards,!a||r.length){e.next=4;break}return e.next=4,this.props.loadBoards(a._id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.type,t="userBoards"===e?this.getfilteredBoards("owner"):this.getfilteredBoards("starred"),a="userBoards"===e?this.getfilteredBoards("guest"):[];return t.length||a.length?Object(fe.jsxs)("div",{className:"user-boards-popover",children:["userBoards"===e&&Object(fe.jsxs)(fe.Fragment,{children:[t.length?Object(fe.jsxs)("div",{className:"owner-section",children:[Object(fe.jsx)("h4",{children:"Your Boards"}),Object(fe.jsx)("div",{className:"owned-boards",children:this.getBoardBtns(t)})]}):Object(fe.jsx)(fe.Fragment,{}),a.length?Object(fe.jsxs)("div",{className:"guest-section",children:[Object(fe.jsx)("h4",{children:"Guest Boards"}),Object(fe.jsx)("div",{className:"guest-boards",children:this.getBoardBtns(a)})]}):Object(fe.jsx)(fe.Fragment,{})]}),"starredBoards"===e?Object(fe.jsx)("div",{className:"starred-section",children:Object(fe.jsx)("div",{className:"starred-boards",children:this.getBoardBtns(t)})}):Object(fe.jsx)(fe.Fragment,{})]}):Object(fe.jsx)("div",{className:"no-boards",children:"No".concat("starredBoards"===e?" starred":""," boards yet...")})}}]),a}(n.a.Component);var ra={loadBoards:$,updateBoard:ce},na=Object(f.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),ra)(aa),sa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onNotifClick=function(t){var a=e.props.board,r=a.lists.find((function(e){return e.cards.find((function(e){return e.cardId===t}))}));r?e.props.history.push("/boards/".concat(a._id,"/").concat(r.listId,"/").concat(t)):e.props.history.push("/cardNotFound"),e.props.handleClose()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.board,r=t.notifCount,n=a.activities.filter((function(e){return e.isNotif}));return Object(fe.jsx)("div",{className:"notif-popover",children:n.length?n.map((function(t,a){return Object(fe.jsx)("div",{onClick:function(){return e.onNotifClick(t.card.cardId)},className:"notif ".concat(a<r?"unread":""),children:Object(fe.jsx)(Rt,{activity:t,display:"menu"},t.id)})})):Object(fe.jsx)("div",{children:"Sorry... no new notifications to show"})})}}]),a}(n.a.Component);var ca={setNotif:oe,setNotifCount:function(e){return function(){var t=Object(p.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_NOTIF_COUNT",count:e})}catch(r){console.log("Cannot update notification",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ia=Object(b.f)(sa),oa=Object(f.b)((function(e){return{board:e.boardReducer.board,isNotif:e.boardReducer.isNotif,loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount}}),ca)(ia),da=a(160),la=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={anchorEl:null,isEditLabel:!1,newTitle:"",isChangeTitle:!1,currLabel:"",isSearch:!1},e.handleClick=function(t){t.preventDefault(),e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){"userBoards"!==e.props.type&&"starredBoards"!==e.props.type||e.props.onToggle(),e.setState({anchorEl:null}),e.props.markReadNotif&&e.props.markReadNotif()},e.handleDateChange=function(){console.log("im in DynamicPopover.handleDateChange")},e.changeTitle=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("change cover"===a)var n=!0;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{newTitle:a,isChangeTitle:t,currLabel:r,isSearch:n}))},e.handleBack=function(){if("cover"===e.props.titleModal)var t=!0;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isChangeTitle:!e.state.isChangeTitle,newTitle:e.props.titleModal,isSearch:t}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=(t.title,t.titleModal),s=this.state,c=s.anchorEl,i=s.isChangeTitle,o=s.newTitle,d=s.currLabel,l=s.isSearch,u=Boolean(c),b=i?o:r,j=u?"simple-popover":void 0,h=function(t){switch(t.type){case"members":case"add-members":case"change members":return Object(fe.jsx)(Be,Object(x.a)({},t));case"list actions":return Object(fe.jsx)(ve,Object(x.a)({},t));case"labels":case"edit labels":if(i)return Object(fe.jsx)(De,Object(x.a)({},t));case"add-labels":case"labels-preview":return i?Object(fe.jsx)(De,Object(x.a)({},t)):Object(fe.jsx)(Me,Object(x.a)({},t));case"dates-edit":case"edit-dates":case"dates":return Object(fe.jsx)(Re,Object(x.a)({},t));case"attachments":case"add-attachments":return Object(fe.jsx)(zt,Object(x.a)({},t));case"cover":case"change cover":return Object(fe.jsx)(Ze,Object(x.a)({},t));case"checklist":return Object(fe.jsx)(He,Object(x.a)({},t));case"userMenu":return Object(fe.jsx)(Ut,Object(x.a)({},t));case"userBoards":case"starredBoards":return Object(fe.jsx)(na,Object(x.a)(Object(x.a)({},t),{},{handleClose:e.handleClose}));case"boardMenu":return Object(fe.jsx)(Gt,Object(x.a)({},t));case"delete-card":return Object(fe.jsx)(Kt,Object(x.a)({},t));case"move-card":return Object(fe.jsx)(ea,Object(x.a)({},t));case"copy-card":return Object(fe.jsx)(ea,Object(x.a)(Object(x.a)({},t),{},{isCopy:!0}));case"newNotif":case"noNotif":return Object(fe.jsx)(oa,Object(x.a)({},t))}};return Object(fe.jsxs)(n.a.Fragment,{children:[Object(fe.jsx)("button",{onClick:this.handleClick,children:Object(fe.jsx)(St,Object(x.a)({type:a},this.props))}),Object(fe.jsxs)(he.a,{className:a,id:j,open:u,anchorEl:c,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[Object(fe.jsxs)("div",{className:"popover-header-title flex",children:[i&&Object(fe.jsx)("span",{onClick:this.handleBack,className:"back-icon pointer",children:Object(fe.jsx)(da.a,{})}),Object(fe.jsx)("span",{children:b}),Object(fe.jsx)("button",{className:"close-popover",onClick:this.handleClose})]}),Object(fe.jsx)("div",{className:"popover-content-container",children:Object(fe.jsx)(h,Object(x.a)(Object(x.a)({type:a,currLabel:d,isSearch:l,changeTitle:this.changeTitle},this.props),{},{handleClose:this.handleClose}))})]})]})}}]),a}(n.a.Component),ua=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={anchorEl:null,currListIdx:null,currCardIdx:null},e.handleClick=function(t){t.preventDefault(),t.stopPropagation(),e.setState({anchorEl:t.currentTarget})},e.handleClose=function(t){e.setState({anchorEl:null}),t.stopPropagation()},e.removeMember=function(t){return function(a){a.stopPropagation();var r=e.props.board,n=e.props,s=n.currCard,c=n.loggedInUser,i=s.cardMembers.findIndex((function(e){return e._id===t._id}));s.cardMembers.splice(i,1);var o=c._id===t._id?"Left":"Removed";e.props.updateBoard(r,o,s)}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currListIdx,a=e.currCardIdx;this.setState({currListIdx:t,currCardIdx:a})}},{key:"render",value:function(){var e=this.props,t=(e.type,e.title,e.titleModal,e.member),a=e.loggedInUser,r=this.state.anchorEl,n=Boolean(r),s=n?"simple-popover":void 0;return Object(fe.jsxs)("div",{className:"single-member-popover",children:[Object(fe.jsx)("span",{className:"btn-photo-member",onClick:this.handleClick,children:Object(fe.jsx)(Ce.a,{className:"card-details-avatar hover",alt:t.fullname,src:t.imgUrl})}),Object(fe.jsxs)(he.a,{id:s,open:n,anchorEl:r,onClose:this.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[Object(fe.jsxs)("div",{className:"single-member-popover-header-title flex direction-row",children:[Object(fe.jsxs)("div",{className:"single-member-title flex direction-row",children:[Object(fe.jsx)(Ce.a,{src:t.imgUrl,className:"avatar",children:Object(fe.jsx)("p",{children:t.initials})}),Object(fe.jsxs)("div",{className:"user-name-info",children:[Object(fe.jsx)("h4",{className:"fullname",children:t.fullname}),Object(fe.jsxs)("p",{className:"username",children:["@",t.username]}),a&&a._id===t._id&&Object(fe.jsx)(Dt.b,{className:"edit-profile",to:"/boards",onClick:this.handleClose,children:Object(fe.jsx)("p",{children:"Edit profile info"})})]})]}),Object(fe.jsx)("button",{className:"close-popover",onClick:this.handleClose,children:"X"})]}),Object(fe.jsx)("div",{className:"popover-content-container",children:Object(fe.jsx)("div",{className:"remove-from-card pointer",onClick:this.removeMember(t),children:"Remove from card"})})]})]})}}]),a}(r.Component);var ba={updateBoard:ce},ja=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,board:e.boardReducer.board}}),ba)(ua);function ha(e){var t=e.members,a=e.board,r=e.currListIdx,n=e.currCardIdx,s=e.isCardOpen,c=e.currCard;return Object(fe.jsxs)("div",{className:"members-list flex direction-row",children:[Object(fe.jsx)(je.a,{max:15,className:"members-group",children:t.map((function(e){return Object(fe.jsx)(ja,{member:e,currListIdx:r,currCardIdx:n,currCard:c},e._id)}))}),s&&Object(fe.jsx)(la,{type:"add-members",titleModal:"Members",board:a,currListIdx:r,currCardIdx:n})]})}function pa(e){var t=e.checklists.reduce((function(e,t){return e.taskCount+=t.tasks.length,t.tasks.forEach((function(t){t.isDone&&e.taskCountDone++})),e}),{taskCount:0,taskCountDone:0}),a=t.taskCount,r=t.taskCountDone,n=a===r?"done":"";return Object(fe.jsxs)("div",{className:"badge flex align-center ".concat(n),children:[Object(fe.jsx)("span",{className:"badge-icon checkbox flex align-center  ".concat(n),children:Object(fe.jsx)(we.b,{className:"card-icon"})}),Object(fe.jsxs)("span",{className:"card-txt",children:[" ",r+"/"+a," "]})]})}var Oa=a(286);function fa(e){var t=e.cardComments;return Object(fe.jsxs)("div",{className:"badge flex align-center",children:[Object(fe.jsx)("span",{className:"badge-icon flex align-center",children:Object(fe.jsx)(Oa.a,{})}),Object(fe.jsx)("span",{className:"card-txt",children:t.reduce((function(e,t){return++e}),0)})]})}var xa=a(208),ma=(n.a.Component,a(290)),ga=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleLabel=function(t){t.preventDefault(),t.stopPropagation(),e.props.toggleLabels()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.labelId,a=e.boardLabels,r=this.props.isLabelOpen?" label-preview-open":"",n=a.find((function(e){return e.id===t}));return"clr11"===n.color?Object(fe.jsx)(fe.Fragment,{children:" "}):Object(fe.jsx)("div",{onClick:this.onToggleLabel,className:"".concat(n.color," label-card").concat(r),children:r&&n.title})}}]),a}(n.a.Component);var va={toggleLabels:ne},Ca=Object(f.b)((function(e){return{isLabelOpen:e.boardReducer.isLabelOpen}}),va)(ga),ya=a(289),ka=a.n(ya),Na=a(287),Ia=a(288),Ba=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleDone=function(t){t.stopPropagation(),t.preventDefault();var a=e.props.card;a.dueDate.isDone=!a.dueDate.isDone,e.props.updateBoard(e.props.board)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.dueDate,t=e.isDone?"done":"",a=!e.isDone&&e.date<Date.now()?"overdue":"";return Object(fe.jsxs)("div",{className:"badge due-date flex align-center ".concat(t," ").concat(a),onClick:this.onToggleDone,children:[!e.isDone&&Object(fe.jsx)("span",{className:"check",children:Object(fe.jsx)(Na.a,{})}),e.isDone&&Object(fe.jsxs)("span",{className:"check",children:[" ",Object(fe.jsx)(Ia.a,{})," "]}),Object(fe.jsxs)("span",{className:"clock",children:[Object(fe.jsx)(ka.a,{})," "]}),Object(fe.jsx)("span",{className:"date",children:new Date(e.date).toString().substring(3,10)})]})}}]),a}(n.a.Component);function wa(e){var t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.currCard,s=(e.OnUpdateBoard,e.onArchive);return Object(fe.jsxs)("div",{className:"quick-card-actions fade-in",children:[Object(fe.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(fe.jsx)(la,{type:"edit labels",title:"Edit labels",titleModal:"Labels",board:t,currListIdx:a,currCardIdx:r})]}),Object(fe.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(fe.jsx)(la,{type:"change members",title:"Change members",titleModal:"Members",board:t,currListIdx:a,currCardIdx:r})]}),Object(fe.jsx)("span",{className:"quick-card-actions-btn",children:Object(fe.jsx)(la,{type:"change cover",title:"Change cover",titleModal:"Cover",board:t,currListIdx:a,currCardIdx:r})}),Object(fe.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(fe.jsx)(la,{type:"move-card",titleModal:"Move Card",board:t,currListIdx:a,currCardIdx:r,currCard:n})]}),Object(fe.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(fe.jsx)(la,{type:"copy-card",titleModal:"Copy Card",board:t,currListIdx:a,currCardIdx:r,currCard:n})]}),Object(fe.jsxs)("span",{className:"quick-card-actions-btn",children:[" ",Object(fe.jsxs)("button",{onClick:s,children:[Object(fe.jsx)(we.a,{})," Archive"]})]})]})}var Ta=a.p+"static/media/close-edit-card.56748bb7.svg",Sa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={cardTitle:"",isEditTitle:!1,isEditMode:!1,rect:null},e.toggleEditTitle=function(t){if(t){t.stopPropagation(),t.preventDefault();var a=t.target.getBoundingClientRect();a.x=a.x-256}e.props.onEditMode();var r=e.props.card;e.setState({isEditMode:!e.state.isEditMode,cardTitle:r.cardTitle,rect:a})},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onSaveCardTitle(e.state.cardTitle);var a=t.target.value;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{cardTitle:a}))},e.onSaveCardTitle=function(){var t=e.state.cardTitle;if(t){var a=e.props,r=a.board,n=a.card,s=a.updateBoard;n.cardTitle=t,s(r),e.toggleEditTitle(),e.props.onEditMode()}},e.handleClose=function(t){t.stopPropagation(),t.preventDefault(),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEditTitle:!e.state.isEditTitle}))},e.onArchive=function(){var t=e.props,a=t.card,r=t.board,n=t.updateBoard;a.isArchived=!0;n(Object(x.a)({},r),"Archived card",a),e.toggleEditTitle()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.card,a=e.board,r=e.isDragging,s=e.currListIdx,c=e.currCardIdx,i=e.updateBoard,o=this.state,d=o.isEditMode,l=o.cardTitle,u=o.rect,b=r?"dragged":"not-dragged",j=t.cardStyle.img?"img-cover":t.cardStyle.color,h=d?"quick-card-edit-preview":"",p=t.cardLabelIds?"show-labels":"",O=t.cardStyle.isCover?{fullCover:"full "+j,fullTitle:"full"}:{fullTitle:"half"};return Object(fe.jsxs)(n.a.Fragment,{children:[d&&Object(fe.jsx)("div",{className:"screen-quick-card-edit",onClick:this.toggleEditTitle,children:Object(fe.jsx)("img",{src:Ta,alt:"close"})}),Object(fe.jsxs)("div",{className:h,style:d?{left:"".concat(u.x),top:"".concat(u.y)}:{},children:[Object(fe.jsxs)("div",{className:"card-preview-content pointer ".concat(b),children:[t.cardStyle.id&&Object(fe.jsx)("div",{className:"card-preview-header "+j,style:{backgroundImage:"url(".concat(t.cardStyle.img,")")}}),Object(fe.jsxs)("div",{className:"card-preview-main-content "+O.fullCover,children:["half"===O.fullTitle&&Object(fe.jsxs)("div",{className:"list-card-labels  ".concat(p," flex"),children:[" ",t.cardLabelIds&&t.cardLabelIds.map((function(e){return Object(fe.jsx)(Ca,{labelId:e,boardLabels:a.labels},e)}))]}),!d&&Object(fe.jsx)("span",{className:"card-preview-title  ".concat(O.fullCover),children:t.cardTitle}),d&&Object(fe.jsx)(pe.a,{className:"quick-card-input",value:l,"aria-label":"card title",onChange:this.handleChange,onKeyPress:this.handleChange,style:{height:"90px"},onFocus:function(e){return e.target.select()},autoFocus:!0}),"half"===O.fullTitle&&Object(fe.jsxs)("span",{className:"card-preview-icon flex",children:[Object(fe.jsxs)("div",{className:"icons-preview flex wrap",children:[t.dueDate.date&&Object(fe.jsx)(Ba,{dueDate:t.dueDate,board:a,card:t,updateBoard:i}),t.description&&Object(fe.jsx)("div",{className:"badge flex align-center",children:Object(fe.jsx)(ma.a,{})}),t.comments.length?Object(fe.jsx)(fa,{cardComments:t.comments}):Object(fe.jsx)(fe.Fragment,{children:" "}),Object(fe.jsx)("div",{title:"checklist",children:t.checklists.length?Object(fe.jsx)(pa,{checklists:t.checklists}):Object(fe.jsx)(fe.Fragment,{children:" "})})]}),Object(fe.jsx)("div",{className:"badge-icon members flex",children:t.cardMembers&&Object(fe.jsx)(ha,{members:t.cardMembers,currCard:t,isCardOpen:!1})})]}),!d&&!t.isArchived&&Object(fe.jsx)("button",{className:"quick-card-edit-btn",onClick:this.toggleEditTitle,children:Object(fe.jsx)(we.c,{})})]})]}),d&&Object(fe.jsx)("button",{className:"save-quick-card-btn",onClick:this.onSaveCardTitle,children:"Save"}),d&&Object(fe.jsx)("div",{children:Object(fe.jsx)(wa,{board:a,currListIdx:s,currCardIdx:c,currCard:t,onArchive:this.onArchive})})]})]})}}]),a}(n.a.Component);var Da={updateBoard:ce,loadListAndCard:te,loadBoard:ee},La=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Da)(Sa),Aa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEditMode:!1},e.handleDnd=function(){console.log("is dragging",e.props.draggingOver)},e.onEditMode=function(){e.setState({isEditMode:!e.state.isEditMode})},e.onSelectedCard=function(){var t=e.props,a=t.list,r=t.board,n=t.card;e.props.loadListAndCard(a,n),e.state.isEditMode||e.props.history.push("/boards/".concat(r._id,"/").concat(a.listId,"/").concat(n.cardId))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,r=t.currCardIdx,n=t.currListIdx,s=t.list;return a.isArchived?Object(fe.jsx)(fe.Fragment,{}):Object(fe.jsx)(be.b,{draggableId:a.cardId,index:r,children:function(t,c){return Object(fe.jsx)("div",Object(x.a)(Object(x.a)(Object(x.a)({onClick:e.onSelectedCard},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(fe.jsx)(La,{list:s,card:a,currListIdx:n,currCardIdx:r,onEditMode:e.onEditMode,isDragging:c.isDragging})}))}})}}]),a}(n.a.Component);var Ma={updateBoard:ce,loadListAndCard:te},Ea=Object(b.f)(Aa),Ua=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Ma)(Ea);function Fa(e){var t=e.cards,a=e.list,r=e.onUpdateBoard,n=e.board,s=e.currListIdx;return t?Object(fe.jsx)(be.c,{droppableId:a.listId,type:"card",children:function(e,c){return Object(fe.jsxs)("section",Object(x.a)(Object(x.a)({className:"all-cards",ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){return Object(fe.jsx)(Ua,{board:n,currListIdx:s,list:a,currCardIdx:t,card:e,onUpdateBoard:r},e.cardId)})),e.placeholder]}))}}):Object(fe.jsx)(fe.Fragment,{children:" "})}var _a=a.p+"static/media/plus.57788bd4.svg",Ra=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAdding:!1,listTitle:"",isEditTitle:!1},e.toggleOnAdd=function(){e.setState({isAdding:!e.state.isAdding})},e.onCloseAdding=function(){e.toggleOnAdd()},e.toggleEditTitle=function(){var t=e.props.list;e.setState({isEditTitle:!e.state.isEditTitle,listTitle:t.listTitle})},e.handleChange=function(t){"Enter"===t.key&&(t.preventDefault(),e.onSaveListTitle());var a=t.target.value;e.setState({listTitle:a})},e.onSaveListTitle=function(){var t=e.state.listTitle;if(t){var a=e.props,r=a.onUpdateBoard,n=a.board,s=a.currListIdx;n.lists[s].listTitle=t,r(n),e.toggleEditTitle()}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.list,r=t.onUpdateBoard,n=t.currListIdx,s=t.board,c=this.state,i=c.isAdding,o=c.isEditTitle,d=c.listTitle;return Object(fe.jsx)(be.b,{draggableId:a.listId,index:n,children:function(t){return Object(fe.jsx)("section",Object(x.a)(Object(x.a)(Object(x.a)({className:"list-wrapper"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(fe.jsxs)("div",{className:"list-content flex direction-col",children:[Object(fe.jsxs)("div",{className:"list-header flex",children:[!o&&Object(fe.jsx)("h2",{onClick:e.toggleEditTitle,children:a.listTitle}),o&&Object(fe.jsx)(pe.a,{className:"text-area-auto list-title-input",value:d,"aria-label":"empty textarea",onChange:e.handleChange,onKeyPress:e.handleChange,onBlur:e.onSaveListTitle,onFocus:function(e){e.target.select()},autoFocus:!0}),Object(fe.jsx)("div",{className:"list-header-menu-btn",children:Object(fe.jsx)(la,{type:"list actions",board:s,list:a,onUpdateBoard:r,titleModal:"List actions"})})]}),Object(fe.jsxs)("div",{className:"list-cards fancy-scrollbar",children:[Object(fe.jsx)(Fa,{cards:a.cards,board:s,currListIdx:n,list:a,onUpdateBoard:r},a.listId),i&&Object(fe.jsx)(ge,{list:a,onUpdateBoard:r,onCloseAdding:e.onCloseAdding})]}),!i&&Object(fe.jsxs)("span",{className:"add-card-container",onClick:function(){e.toggleOnAdd()},children:[Object(fe.jsx)("img",{src:_a,alt:""}),"Add a card"]})]})}))}})}}]),a}(n.a.Component);function Pa(e){var t=e.lists,a=e.onUpdateBoard,r=e.board;return Object(fe.jsx)(be.c,{droppableId:"all-lists",direction:"horizontal",type:"list",children:function(e){return Object(fe.jsxs)("div",Object(x.a)(Object(x.a)({className:"all-lists flex"},e.droppableProps),{},{ref:e.innerRef,children:[t.map((function(e,t){return Object(fe.jsx)(Ra,{board:r,list:e,currListIdx:t,onUpdateBoard:a},e.listId)})),e.placeholder]}))}})}var Ga=a(0),qa=a(291),Ha=a.n(qa);function za(e){var t=e.members;return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsx)(je.a,{max:5,spacing:3,children:t.map((function(e){return Object(fe.jsx)(Ce.a,{alt:e.username,src:e.imgUrl},e._id)}))})})}var Ka=a.p+"static/media/bars-loader.8e56973c.svg";function Wa(){return Object(fe.jsx)("div",{className:"loader flex align-center justify-center",children:Object(fe.jsx)("img",{src:Ka,alt:"loading..."})})}var Ja=a(292),Va=a.n(Ja);function Xa(e){var t=e.board,a=e.changeMenu,r=V.getFormattedBgStyle(t.boardStyle);return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("div",{className:"board-actions",children:[Object(fe.jsxs)("button",{className:"menu-action-btn",onClick:function(){return a("Change Background","select-bg-type")},children:[Object(fe.jsx)("span",{className:"change-bg-preview",style:r}),"Change background"]}),Object(fe.jsxs)("button",{className:"menu-action-btn search flex align-center",onClick:function(){return a("Search cards","search")},children:[Object(fe.jsx)("span",{className:"search-cards-icon",children:Object(fe.jsx)(Va.a,{})}),Object(fe.jsx)("span",{className:"search-cards-txt",children:" Search cards "})]}),Object(fe.jsxs)("button",{className:"menu-action-btn archive",onClick:function(){return a("Archived","archive")},children:[Object(fe.jsx)("span",{className:"archive-icon",children:Object(fe.jsx)(we.a,{})}),Object(fe.jsx)("span",{className:"archive-txt",children:"Archived items"})]})]}),Object(fe.jsx)(_t.a,{}),Object(fe.jsx)("div",{className:"activities",children:Object(fe.jsx)(Pt,{board:t})})]})}function Qa(e){return Object(fe.jsxs)("div",{className:"select-bg flex",children:[Object(fe.jsxs)("div",{className:"photos",onClick:function(){e.changeMenu("Photos by Unsplash","photos")},children:[Object(fe.jsx)("img",{src:"https://a.trellocdn.com/prgb/dist/images/photos-thumbnail@3x.8f9c1323c9c16601a9a4.jpg",alt:"Photos"}),Object(fe.jsx)("p",{children:"Photos"})]}),Object(fe.jsxs)("div",{className:"colors",onClick:function(){e.changeMenu("Colors","colors")},children:[Object(fe.jsx)("img",{src:"https://a.trellocdn.com/prgb/dist/images/colors@2x.ec32a2ed8dd8198b8ef0.jpg",alt:"Colors"}),Object(fe.jsx)("p",{children:"Colors"})]})]})}var Ya={updateBoard:ce},Za=Object(f.b)((function(){return{}}),Ya)((function(e){return Object(fe.jsx)("div",{className:"choose-bg-color flex wrap",children:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc","#838c91"].map((function(t,a){return Object(fe.jsx)("div",{className:"bg-color bgclr".concat(a+1),onClick:function(){!function(t){var a=Object(x.a)({},e.board);a.boardStyle=t,e.updateBoard(a,"changed the board background color")}(t)}},t)}))})})),$a=a(293),er=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchStr:"",imgs:[]},e.handleChange=function(t){var a=t.target.value;e.setState({searchStr:a},e.getImgs)},e.getImgs=Object(p.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ke.getImgs(e.state.searchStr,18);case 2:a=t.sent,e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{imgs:a})}));case 4:case"end":return t.stop()}}),t)}))),e.setBgImg=function(t){var a=e.state.imgs[t],r=Object(x.a)({},e.props.board);r.boardStyle={full:a.full,small:a.small},e.props.updateBoard(r,"changed the board background image")},e.openLink=function(e){e.stopPropagation()},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getImgs();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.imgs;return t&&t.length?Object(fe.jsxs)("div",{className:"choose-bg-img",children:[Object(fe.jsxs)("div",{className:"search-photos flex align-center",children:[Object(fe.jsx)($a.a,{}),Object(fe.jsx)(Je.DebounceInput,{minLength:2,debounceTimeout:400,onChange:this.handleChange})]}),Object(fe.jsx)("div",{className:"bg-img-list flex wrap",children:t.map((function(t,a){return Object(fe.jsx)("div",{className:"bg-img",style:{backgroundImage:"url(".concat(t.small,")")},onClick:function(){return e.setBgImg(a)},children:Object(fe.jsx)("a",{href:t.link,target:"_blank",onClick:e.openLink,children:t.name})},t.id)}))})]}):Object(fe.jsx)(Wa,{className:"menu-load"})}}]),a}(n.a.Component);var tr={updateBoard:ce},ar=Object(f.b)((function(){return{}}),tr)(er),rr=a.p+"static/media/checked.440ed774.svg",nr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={filterBy:{searchKey:"",labels:[],members:[],dueDate:[],isFilter:!1}},e.handleChange=function(t){var a=t.target.value,r=e.props.filterBy;r.searchKey=a,r.isFilter=!0,e.props.setFilterBy(r,e.props.board._id)},e.onFilterBy=function(t,a){var r,n=e.props.filterBy[t],s=n.findIndex((function(e){return e===a}));-1!==s?n.splice(s,1):n.push(a),e.setState({filterBy:Object(x.a)(Object(x.a)({},e.state.filterBy),{},(r={},Object(Wt.a)(r,t,n),Object(Wt.a)(r,"isFilter",!0),r))},(function(){e.props.setFilterBy(e.state.filterBy,e.props.board._id)}))},e.onToggleSearch=function(t,a){return e.props.filterBy[t].some((function(e){return e===a}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({filterBy:this.props.filterBy})}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,r=t.filterBy;return Object(fe.jsxs)("div",{className:"search-cards",children:[Object(fe.jsx)(Je.DebounceInput,{minLength:2,debounceTimeout:2e3,className:"search-cards",type:"text",onChange:this.handleChange,forceNotifyByEnter:!1,value:r.searchKey}),Object(fe.jsx)("p",{children:"Search by term, label or member"}),Object(fe.jsx)(_t.a,{}),Object(fe.jsxs)("div",{className:"search-types",children:[Object(fe.jsx)("ul",{className:"clean-list",children:a.labels.map((function(t){return Object(fe.jsx)("li",{className:"labels pointer",onClick:function(){return e.onFilterBy("labels",t.id)},children:Object(fe.jsxs)("div",{className:"label-menu",children:[Object(fe.jsx)("div",{className:"label-list-item",children:Object(fe.jsx)("div",{className:"label-menu-color pointer ".concat(t.color),children:Object(fe.jsx)("span",{})})}),Object(fe.jsx)("span",{children:t.title}),Object(fe.jsxs)("span",{className:"checked-icon labels",children:[" ",e.onToggleSearch("labels",t.id)&&Object(fe.jsx)("img",{src:rr,alt:"checked"})]})]})},t.id)}))}),Object(fe.jsx)(_t.a,{}),Object(fe.jsx)("div",{className:"members-type",children:Object(fe.jsx)("ul",{className:"members-search clean-list",children:a.boardMembers.map((function(t){return Object(fe.jsxs)("li",{className:"members-list flex align-center pointer",onClick:function(){return e.onFilterBy("members",t._id)},children:[Object(fe.jsx)("div",{children:Object(fe.jsx)(Ce.a,{alt:t.username,src:t.imgUrl},t._id)}),Object(fe.jsx)("span",{children:t.username}),Object(fe.jsxs)("span",{className:"checked-icon members",children:[" ",e.onToggleSearch("members",t._id)&&Object(fe.jsx)("img",{src:rr,alt:"checked"})]})]},t._id)}))})})]})]})}}]),a}(n.a.Component);var sr={updateBoard:ce,loadListAndCard:te,loadBoard:ee,setFilterBy:se},cr=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser,filterBy:e.boardReducer.filterBy}}),sr)(nr),ir=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchKey:""},e.handleChange=function(t){var a=t.target.value;e.setState({searchKey:a})},e.onFilterCards=function(){var t=e.props.board;new RegExp(e.state.searchKey,"i").test(t)},e.onSelectedCard=function(t,a){var r=e.props,n=r.board;(0,r.toggleMenu)(),e.props.history.push("/boards/".concat(n._id,"/").concat(t.listId,"/").concat(a.cardId))},e.onDeleteCard=function(t,a,r){return function(n){n.stopPropagation(),n.preventDefault();var s=e.props,c=s.board,i=s.updateBoard;(0,s.toggleMenu)(),c.lists[t].cards.splice(a,1),i(Object(x.a)({},c),"Deleted card",r.tilte)}},e.onSendToBoard=function(t){return function(a){a.stopPropagation(),a.preventDefault();var r=e.props,n=r.board,s=r.updateBoard;(0,r.toggleMenu)(),t.isArchived=!1,s(Object(x.a)({},n))}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props.board;this.state.searchKey;return Object(fe.jsx)("div",{children:t.lists.map((function(t,a){return t.cards.map((function(r,n){return r.isArchived&&Object(fe.jsxs)("div",{className:"archived-list",onClick:function(){e.onSelectedCard(t,r)},children:[Object(fe.jsx)(La,{card:r,currListIdx:a,currCardIdx:n}),Object(fe.jsxs)("div",{className:"archive-actions flex",children:[Object(fe.jsx)("p",{className:"send-to-board pointer",onClick:e.onSendToBoard(r),children:"Send to board "}),Object(fe.jsx)("span",{className:"space",children:"-"}),Object(fe.jsx)("p",{className:"delete-card pointer",onClick:e.onDeleteCard(a,n,r),children:" Delete"})]})]})}))}))})}}]),a}(n.a.Component);var or={updateBoard:ce},dr=Object(b.f)(ir),lr=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),or)(dr);function ur(e){var t=e.board,a=e.toggleMenu,r=e.isMenuOpen,s=e.target,c=e.title,i=e.changeMenu,o=e.onFilterCards,d=function(e){switch(e.target){case"main":return Object(fe.jsx)(Xa,Object(x.a)({},e));case"select-bg-type":return Object(fe.jsx)(Qa,Object(x.a)({},e));case"colors":return Object(fe.jsx)(Za,Object(x.a)({},e));case"photos":return Object(fe.jsx)(ar,Object(x.a)({},e));case"search":return Object(fe.jsx)(cr,Object(x.a)({},e));case"archive":return Object(fe.jsx)(lr,Object(x.a)({},e))}},l="right";return Object(fe.jsx)("div",{className:"menu-visible",children:Object(fe.jsxs)(n.a.Fragment,{children:[Object(fe.jsx)(Pe.a,{onClick:a,children:l}),Object(fe.jsx)(Ft.a,{anchor:l,open:r,hideBackdrop:!0,children:Object(fe.jsxs)("div",{className:"menu-wrapper",children:[Object(fe.jsx)("div",{className:"menu-screen",onClick:a}),Object(fe.jsxs)("div",{className:"board-menu-content",children:[Object(fe.jsxs)("div",{className:"board-menu-content-header flex",children:[Object(fe.jsx)("div",{className:"title",children:Object(fe.jsx)("h3",{children:c})}),Object(fe.jsx)("span",{className:"exit-icon",onClick:a,children:Object(fe.jsx)("img",{src:Oe,alt:"Close"})}),"main"!==s&&Object(fe.jsx)("span",{className:"back-icon",onClick:function(){return i("Menu","main")},children:Object(fe.jsx)(da.a,{})})]}),Object(fe.jsx)(_t.a,{}),Object(fe.jsx)("div",{className:"menu-content fancy-scrollbar",children:Object(fe.jsx)(d,{target:s,board:t,changeMenu:i,toggleMenu:a,onFilterCards:o})})]})]})})]},l)})}var br=a(216),jr=a.n(br),hr=a.p+"static/media/close-filter.aedc814a.svg",pr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEditTitle:!1,title:"",isMenuOpen:!1,menuTitle:"Menu",menuTarget:"main",cardsCount:0},e.handleChange=function(t){var a=t.target.value;e.setState({title:a})},e.toggleChangeTitle=function(){var t=e.state.isEditTitle;e.setState({isEditTitle:!t})},e.saveBoardTitle=function(t){t.preventDefault();var a=e.state.title,r=e.props,n=r.board,s=r.updateBoard;a||(a="Untitled"),a!==n.boardTitle?(n.boardTitle=a,s(n,"changed board title"),e.toggleChangeTitle()):e.toggleChangeTitle()},e.onToggleStarBoard=function(){var t=e.props,a=t.board,r=t.updateBoard,n=t.loggedInUser;r(_.toggleStarBoard(a,n._id))},e.onFilterCards=function(){var t=e.props,a=t.board,r=t.filterBy;r.members.length||r.labels.length||""!==r.searchKey?e.setState(Object(x.a)(Object(x.a)({},e.state),{},{cardsCount:a.cardsCount})):(e.setState(Object(x.a)(Object(x.a)({},e.state),{},{cardsCount:0})),r.isFilter=!1)},e.resetSearch=function(){e.props.setFilterBy({searchKey:"",labels:[],members:[],isFilter:!1},e.props.board._id),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{cardsCount:0}))},e.toggleMenu=function(){var t=e.state.isMenuOpen;e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isMenuOpen:!t,menuTitle:"Menu",menuTarget:"main"})}))},e.changeMenu=function(t,a){e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{menuTitle:t,menuTarget:a})}))},e.cloneTemplate=Object(p.a)(h.a.mark((function t(){var a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(a=Object(x.a)({},e.props.board))._id,a.createdBy=e.props.loggedInUser,a.boardMembers.push(e.props.loggedInUser),t.next=6,e.props.addBoard(a);case 6:r=t.sent,e.props.goToTemplateClone(r._id);case 8:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({title:this.props.board.boardTitle})}},{key:"componentDidUpdate",value:function(e,t){this.props.filterBy&&e.filterBy!==this.props.filterBy&&this.onFilterCards()}},{key:"render",value:function(){var e=this.props,t=e.board,a=e.loggedInUser,r=e.filterBy,n=this.state,s=n.title,c=n.isEditTitle,i=n.isMenuOpen,o=n.menuTarget,d=n.menuTitle,l=(n.notification,!!t.createdBy&&_.isBoardStarred(t,a._id));return Object(fe.jsxs)("div",{className:"board-header flex align-center space-between wrap",children:[Object(fe.jsxs)("div",{className:"header-left flex align-center",children:[!c&&Object(fe.jsx)("h1",{className:"board-btn header-title",onClick:this.toggleChangeTitle,children:t.boardTitle}),c&&Object(fe.jsx)("form",{onSubmit:this.saveBoardTitle,children:Object(fe.jsx)(Ha.a,{className:"header-title-input",autoFocus:!0,name:"boardTitle",type:"text",placeholder:"Enter Title",value:s,inputStyle:{fontSize:18,fontWeight:700,color:"#172b4d"},onChange:this.handleChange,onBlur:this.saveBoardTitle})}),Object(fe.jsx)("button",{className:"board-btn star ".concat(l?" active":""),onClick:this.onToggleStarBoard,children:Object(fe.jsx)(Ga.b.Provider,{value:{className:"star-icon"},children:Object(fe.jsx)(ta.a,{})})}),Object(fe.jsx)("span",{className:"board-header-divider"}),!t.createdBy&&Object(fe.jsx)("button",{className:"board-btn",onClick:this.cloneTemplate,children:"Create board from template"}),Object(fe.jsx)("div",{className:"board-members",children:Object(fe.jsx)(za,{members:t.boardMembers})})]}),Object(fe.jsxs)("div",{className:"header-right flex",children:[r.isFilter&&Object(fe.jsxs)("div",{className:"cards-count pointer",children:[Object(fe.jsxs)("span",{onClick:this.openSearchOnMenu,className:"number-count",children:[t.cardsCount," search results"]}),Object(fe.jsx)("span",{onClick:this.resetSearch,className:"close-filter-btn",children:Object(fe.jsx)("img",{src:hr,alt:"close"})})]}),Object(fe.jsxs)("button",{className:"board-btn flex align-center",onClick:this.props.onOpenDashboard,children:[Object(fe.jsx)(jr.a,{})," Dashboard"]}),r.isFilter&&Object(fe.jsxs)("div",{onClick:this.resetSearch,children:[t.cardsCount," X"]}),t.createdBy?Object(fe.jsxs)("button",{className:"board-btn flex align-center",onClick:this.props.onOpenDashboard,children:[Object(fe.jsx)("span",{className:"icon",children:Object(fe.jsx)(jr.a,{})}),Object(fe.jsx)("span",{className:"title",children:"Dashboard"})]}):Object(fe.jsx)(fe.Fragment,{}),!i&&Object(fe.jsxs)("button",{className:"board-btn show-menu flex align-center",onClick:this.toggleMenu,children:[Object(fe.jsxs)("span",{className:"icon flex justify-center align-center",children:[Object(fe.jsx)(we.d,{})," "]}),Object(fe.jsx)("span",{className:"title",children:"Show menu"})]}),i&&Object(fe.jsx)(ur,{board:t,toggleMenu:this.toggleMenu,onFilterCards:this.onFilterCards,isMenuOpen:i,target:o,title:d,changeMenu:this.changeMenu})]})]})}}]),a}(n.a.Component);var Or={updateBoard:ce,setNotif:oe,setFilterBy:se,addBoard:ae},fr=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser,notifCount:e.boardReducer.notifCount,filterBy:e.boardReducer.filterBy}}),Or)(pr),xr=a.p+"static/media/plus-white.c1dcc11a.svg",mr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={listTitle:"",isAdding:!1},e.handleChange=function(t){if("Enter"===t.key)return t.preventDefault(),void e.onAddList();var a=t.target.value;e.setState({listTitle:a})},e.onAddList=function(){var t=e.state.listTitle;if(t){var a={listId:V.makeId(),listTitle:t,cards:[]},r=e.props.board;r.lists.push(a);var n="Added list ".concat(t);e.setState({listTitle:""}),e.props.onUpdateBoard(r,n),e.onCloseAdding()}else e.onCloseAdding()},e.toggleOnAdd=function(){e.setState({isAdding:!e.state.isAdding})},e.onCloseAdding=function(){e.toggleOnAdd()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.listTitle,r=t.isAdding,n=r?"add-mode":"";return Object(fe.jsxs)("div",{onClick:this.toggleOnAdd,className:"add-list board-btn flex align-center pointer "+n,children:[r&&Object(fe.jsxs)("form",{onSubmit:this.onAddList,children:[Object(fe.jsx)(pe.a,{className:"text-area-auto list-input",value:a,"aria-label":"empty textarea",placeholder:"Enter list title",onChange:this.handleChange,onKeyPress:this.handleChange,onBlur:this.onAddList,autoFocus:!0}),Object(fe.jsxs)("div",{className:"add-list-actions flex align-center",children:[Object(fe.jsx)(Pe.a,{className:"add-list-btn",children:"Add List"}),Object(fe.jsx)("span",{className:"close-add-list-btn",onClick:this.onCloseAdding,children:Object(fe.jsx)("img",{src:Oe,alt:"close"})})]})]}),!r&&Object(fe.jsxs)("span",{className:"plus flex align-center",onClick:function(){e.toggleOnAdd()},children:[" ",Object(fe.jsx)("img",{src:xr,alt:"plus"}),Object(fe.jsx)("span",{className:"add-list-txt",children:"Add another list"})]})]})}}]),a}(n.a.Component),gr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onJoinCard=function(t){var a=e.props,r=a.board,n=a.currListIdx,s=a.currCardIdx,c=r.lists[n].cards[s];r.lists[n].cards[s].cardMembers.push(t);var i="".concat(t," Added to ");e.props.updateBoard(r,i,c)},e.isMemberOnCard=function(e,t){return e.cardMembers.some((function(e){return e._id===t}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currListIdx,r=t.currCardIdx,n=t.loggedInUser,s=t.board;if(!s)return Object(fe.jsx)(fe.Fragment,{});var c=s.lists[a].cards[r];return this.isMemberOnCard(c,n._id)?Object(fe.jsx)(fe.Fragment,{}):Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("h4",{children:"SUGGESTED"}),Object(fe.jsx)("div",{className:"btn-container join-to-card",children:Object(fe.jsxs)("button",{onClick:function(){return e.onJoinCard(n)},children:[Object(fe.jsx)(et.a,{})," Join"]})})]})}}]),a}(n.a.Component);var vr={updateBoard:ce},Cr=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),vr)(gr),yr=a(294),kr=a.n(yr),Nr=a(295),Ir=a.n(Nr),Br=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onToggleArchived=function(){var t=e.props,a=t.board,r=t.currCard;r.isArchived=!r.isArchived,e.props.updateBoard(a,"Archived card ".concat(r.title),r)},e.onDeleteCard=function(){var t=e.props,a=t.board,r=t.currListIdx,n=t.currCardIdx,s=t.currCard;e.props.handleClose(),a.lists[r].cards.splice(n,1),e.props.updateBoard(a,"Deleted card",s)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.currCard;return Object(fe.jsxs)(fe.Fragment,{children:[!e.isArchived&&Object(fe.jsxs)("button",{onClick:this.onToggleArchived,children:[Object(fe.jsx)(kr.a,{}),"Archive"]}),e.isArchived&&Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsxs)("button",{onClick:this.onToggleArchived,children:[Object(fe.jsx)(Ir.a,{}),"Send to board"]}),Object(fe.jsx)(la,{type:"delete-card",titleModal:"Delete card?",onDeleteCard:this.onDeleteCard})]})]})}}]),a}(n.a.Component);var wr={updateBoard:ce},Tr=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),wr)(Br);function Sr(e){var t=e.board,a=e.currListIdx,r=e.currCardIdx,n=(e.OnUpdateBoard,e.handleClose),s=t.lists[a].cards[r];return Object(fe.jsxs)("div",{className:"add-to-card",children:[Object(fe.jsx)(Cr,{board:t,currListIdx:a,currCardIdx:r}),Object(fe.jsx)("h4",{children:"ADD TO CARD"}),Object(fe.jsxs)("div",{className:"btn-container",children:[Object(fe.jsx)(la,{type:"members",title:"Members",titleModal:"Members",board:t,currListIdx:a,currCardIdx:r}),Object(fe.jsx)(la,{type:"labels",title:"Labels",titleModal:"Labels",board:t,currListIdx:a,currCardIdx:r}),Object(fe.jsx)(la,{type:"checklist",title:"Checklist",titleModal:"Add checklist",board:t,currListIdx:a,currCardIdx:r}),Object(fe.jsx)(la,{type:"dates",title:"Dates",titleModal:"Dates",board:t,currListIdx:a,currCardIdx:r}),Object(fe.jsx)(la,{type:"attachments",title:"attachments",titleModal:"Attachments",board:t,currListIdx:a,currCardIdx:r}),!s.cardStyle.id&&Object(fe.jsx)(la,{type:"cover",title:"Cover",titleModal:"Cover",board:t,currListIdx:a,currCardIdx:r}),Object(fe.jsx)("h4",{children:"ACTIONS"}),Object(fe.jsx)(la,{type:"move-card",titleModal:"Move Card",board:t,currListIdx:a,currCardIdx:r,currCard:s}),Object(fe.jsx)(la,{type:"copy-card",titleModal:"Copy Card",board:t,currListIdx:a,currCardIdx:r,currCard:s}),Object(fe.jsx)(Tr,{currCard:s,currListIdx:a,currCardIdx:r,handleClose:n})]})]})}function Dr(e){var t=e.cardLabelIds,a=e.boardLabels,r=e.board,n=e.currCardIdx,s=e.currListIdx;e.changeTitle;return Object(fe.jsxs)("div",{children:[Object(fe.jsx)("h3",{children:"Labels"}),Object(fe.jsxs)("div",{className:"labels-list flex wrap",children:[t.map((function(e){return Object(fe.jsx)(la,{labelId:e,boardLabels:a,type:"labels-preview",titleModal:"Labels",board:r,currListIdx:s,currCardIdx:n},e)})),Object(fe.jsx)(la,{className:"add-labels",type:"add-labels",titleModal:"Labels",board:r,currListIdx:s,currCardIdx:n})]})]})}var Lr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.comment;return Object(fe.jsxs)("div",{className:"card-details-comment flex direction-row",children:[Object(fe.jsx)(Ce.a,{className:"card-details-avatar",alt:e.byMember.fullname,src:e.byMember.imgUrl},e.byMember._id),Object(fe.jsxs)("div",{className:"comment-content",children:[Object(fe.jsxs)("div",{className:"flex direction-row",children:[Object(fe.jsx)("h4",{children:e.byMember.fullname}),Object(fe.jsxs)("small",{children:[" ",new Date(e.createdAt).toString().substring(0,16)]})]}),Object(fe.jsx)("div",{className:"comment-txt",children:Object(fe.jsx)("p",{children:e.txt})})]})]})}}]),a}(n.a.Component);function Ar(e){var t=e.comments;return t?Object(fe.jsx)("div",{children:t.length&&t.map((function(e){return Object(fe.jsx)(Lr,{comment:e},e.id)}))}):Object(fe.jsx)(n.a.Fragment,{})}function Mr(e){var t=e.activities,a=e.currCard;return t?(t=t.filter((function(e){return e.card.cardId===a.cardId})),Object(fe.jsx)("div",{children:t.length?t.map((function(e){return Object(fe.jsx)(Rt,{activity:e},e.id)})):Object(fe.jsx)(fe.Fragment,{})})):Object(fe.jsx)(fe.Fragment,{})}var Er=a(161),Ur=a.n(Er),Fr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEditing:!1,isDetails:!1,newActivityTxt:""},e.onToggleDetails=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isDetails:!e.state.isDetails}))},e.onToggleComment=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEditing:!0}))},e.handleChange=function(t){var a=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{newActivityTxt:a.value}))},e.onSaveActivity=function(t){if(t.stopPropagation(),e.state.newActivityTxt){var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=Object(x.a)({},e.state.board);s.lists[r].cards[n].comments.unshift({byMember:e.props.loggedInUser,createdAt:Date.now(),id:V.makeId(),txt:e.state.newActivityTxt});var c=s.lists[r].cards[n],i=e.state.newActivityTxt.substring(0,20);e.props.OnUpdateBoard(s,"Added comment",c,i),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{newActivityTxt:"",isEditing:!1}))}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{board:t,currListIdx:a,currCardIdx:r})),console.log("loggedin user: ",this.props.loggedInUser)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isEditing,r=t.isDetails,n=t.newActivityTxt,s=t.board,c=t.currListIdx,i=t.currCardIdx,o=this.props.loggedInUser;if(!s||null===i||null===c)return Object(fe.jsx)(Wa,{});s.lists[c].cards[i].comments;var d=s.lists[c].cards[i];return Object(fe.jsxs)("div",{className:"card-activities",children:[Object(fe.jsxs)("div",{className:"flex direction-row space-between ",children:[Object(fe.jsxs)("div",{className:"flex direction-row",children:[Object(fe.jsx)(Ur.a,{className:"card-details-icon"}),Object(fe.jsx)("h3",{className:"card-subtitle",children:"Activity"})]}),!r&&Object(fe.jsx)("button",{className:"show-hide hover",onClick:this.onToggleDetails,children:"Show details"}),r&&Object(fe.jsx)("button",{className:"show-hide hover",onClick:this.onToggleDetails,children:"Hide details"})]}),Object(fe.jsxs)("div",{className:"add-comment-container flex direction-row ",children:[Object(fe.jsx)(Ce.a,{className:"card-details-avatar",alt:o.username,src:o.imgUrl}),Object(fe.jsxs)("div",{className:" comment-container flex direction-col",onClick:this.onToggleComment,children:[Object(fe.jsx)(pe.a,{className:"input-comment text-area-auto",name:"description",type:"text",placeholder:"Write a comment...",onChange:this.handleChange,value:n}),a&&Object(fe.jsx)("button",{className:"comment-save",onClick:function(t){return e.onSaveActivity(t)},children:"Save"})]})]}),d.comments.length?Object(fe.jsx)(Ar,{comments:d.comments}):Object(fe.jsx)(fe.Fragment,{}),r&&Object(fe.jsx)(Mr,{currCard:d,activities:s.activities})]})}}]),a}(n.a.Component);var _r=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),{})(Fr),Rr=a(296),Pr=a.n(Rr),Gr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEdit:!1},e.handleChange=function(t){if("Enter"===t.key)t.preventDefault(),e.onSaveTitle();else{var a=e.state,r=a.currListIdx,n=a.currCardIdx,s=Object(x.a)({},e.state.board);s.lists[r].cards[n][t.target.name]=t.target.value,e.setState(Object(x.a)(Object(x.a)({},e.state),{},{board:s}))}},e.onSaveTitle=function(){e.props.OnUpdateBoard(Object(x.a)({},e.state.board)),e.onToggleEdit()},e.onToggleEdit=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEdit:!e.state.isEdit}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState({board:t,currListIdx:a,currCardIdx:r})}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.isEdit;if(!t||null===r||null===a)return Object(fe.jsx)(Wa,{});var s=t.lists[a].cards[r];return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)("div",{className:"card-details-title flex direction-row",children:[Object(fe.jsx)(Pr.a,{className:"card-details-icon"}),Object(fe.jsxs)("div",{className:"flex direction-col",children:[n&&Object(fe.jsx)(pe.a,{className:"text-area-auto",name:"cardTitle",type:"text",placeholder:"Enter title",onChange:this.handleChange,onKeyPress:this.handleChange,value:s.cardTitle,onBlur:this.onSaveTitle,onFocus:function(e){return e.target.select()},autoFocus:!0}),!n&&Object(fe.jsx)("h2",{onClick:this.onToggleEdit,children:s.cardTitle}),Object(fe.jsxs)("small",{children:["in list ",Object(fe.jsx)("span",{children:t.lists[a].listTitle})]})]})]})})}}]),a}(n.a.Component),qr=a(297),Hr=a.n(qr),zr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={board:null,currListIdx:null,currCardIdx:null,isEditing:!1},e.onToggleEditing=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEditing:!0}))},e.handleChange=function(t){var a=t.target,r=e.state,n=r.currListIdx,s=r.currCardIdx,c=Object(x.a)({},e.state.board);c.lists[n].cards[s][a.name]=a.value,e.setState(Object(x.a)(Object(x.a)({},e.state),{},{board:c}))},e.onSaveDescription=function(t){t.preventDefault(),t.stopPropagation(),e.props.OnUpdateBoard(Object(x.a)({},e.state.board)),e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEditing:!1}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currListIdx,r=e.currCardIdx;this.setState({board:t,currListIdx:a,currCardIdx:r})}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.isEditing;if(!t||null===r||null===a)return Object(fe.jsx)(Wa,{});var s=t.lists[a].cards[r];return Object(fe.jsxs)("div",{className:"card-description",children:[Object(fe.jsxs)("div",{className:"flex direction-row align-center",children:[Object(fe.jsx)(Hr.a,{className:"card-details-icon"}),Object(fe.jsx)("h3",{className:"card-subtitle",children:"Description"}),!n&&s.description&&Object(fe.jsx)("button",{className:"hover btn-edit",onClick:this.onToggleEditing,children:"Edit"})]}),n&&Object(fe.jsx)("div",{className:"edit-container",onClick:this.onToggleEditing,children:Object(fe.jsxs)("form",{onSubmit:this.onSaveDescription,children:[Object(fe.jsx)(pe.a,{name:"description",className:"text-area-auto desc-edit",type:"text",placeholder:"Add a more detailed description...",onChange:this.handleChange,value:s.description,onBlur:this.onSaveDescription,onFocus:function(e){return e.target.select()},autoFocus:!0}),Object(fe.jsxs)("div",{className:"flex direction-row align-center",children:[n&&Object(fe.jsx)("button",{className:"save-desc",onClick:this.onSaveDescription,children:"Save"}),n&&Object(fe.jsx)("button",{className:"discard-desc",onClick:this.onToggleEditing,children:"X"})]})]})}),!n&&s.description&&Object(fe.jsx)("div",{className:"desc-txt pointer",onClick:this.onToggleEditing,children:Object(fe.jsx)("p",{children:s.description})}),!n&&!s.description&&Object(fe.jsx)("div",{className:"desc-txt-placeholder hover",onClick:this.onToggleEditing,children:Object(fe.jsx)("p",{children:"Add a more detailed description..."})})]})}}]),a}(n.a.Component);function Kr(e){var t=e.currChecklist,a={width:s()},r=s(),n="100%"===r?"progressing bar-done":"progressing";function s(){if(!t.tasks.length)return"0%";var e=0;return t.tasks.forEach((function(t){t.isDone&&e++})),"".concat(Math.floor(e/t.tasks.length*100),"%")}return Object(fe.jsxs)("div",{className:"progress-bar flex direction-row align-center",children:[Object(fe.jsx)("p",{children:r}),Object(fe.jsx)("div",{className:"progress-bar-container",children:Object(fe.jsx)("div",{className:n,style:a})})]})}var Wr=a(298),Jr=a.n(Wr),Vr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={newTaskTxt:null,isEdit:!1},e.onToggleEdit=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isEdit:!e.state.isEdit})),e.props.onEditMode()},e.onDiscardChanges=function(){e.setState({newTaskTxt:e.props.task.txt,isEdit:!1}),e.props.onEditMode()},e.handleChange=function(t){var a=t.target;e.setState(Object(x.a)(Object(x.a)({},e.state),{},{newTaskTxt:a.value}))},e.onSaveTask=function(){var t=e.props,a=t.taskIdx,r=t.task;e.props.onEditTask(a,r.isDone,e.state.newTaskTxt),e.onToggleEdit()},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.task;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{newTaskTxt:e.txt}))}},{key:"render",value:function(){var e=this.state,t=e.newTaskTxt,a=e.isEdit,r=this.props.task,n=r.isDone?"task-done":"";return t?Object(fe.jsxs)("div",{className:"task-input",children:[!a&&Object(fe.jsx)("div",{className:n,onClick:this.onToggleEdit,children:r.txt}),a&&Object(fe.jsxs)("div",{className:"task-update",children:[Object(fe.jsx)(pe.a,{className:"text-area-auto task-edit",type:"text",value:t,onChange:this.handleChange,onBlur:this.onDiscardChanges}),Object(fe.jsxs)("div",{className:"flex direction-row align-center",children:[Object(fe.jsx)("button",{className:"save-task",onClick:this.onSaveTask,children:"Save"}),Object(fe.jsx)("button",{className:"discard-task",onClick:this.onDiscardChanges,children:"X"})]})]})]}):Object(fe.jsx)(fe.Fragment,{})}}]),a}(n.a.Component),Xr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isEdit:!1},e.onEditMode=function(){e.setState({isEdit:!e.state.isEdit})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.task,a=e.taskIdx,r=e.onDeleteTask,n=e.onEditTask,s=this.state.isEdit;return Object(fe.jsxs)("div",{className:"task-preview flex direction-row space-between",children:[Object(fe.jsxs)("div",{className:"width-100 flex direction-row align-center",children:[Object(fe.jsx)(vt.a,{className:"checkbox ".concat(s?"edit":""),checked:t.isDone,onChange:function(){return n(a,!t.isDone,t.txt)}}),Object(fe.jsx)(Vr,{onEditMode:this.onEditMode,task:t,taskIdx:a,onEditTask:n})]}),!s&&Object(fe.jsx)(Jr.a,{className:"delete-task pointer",onClick:function(){return r(a)}})]})}}]),a}(n.a.Component),Qr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={txt:""},e.onDiscardChanges=function(){e.setState({txt:""}),e.props.onIsAddItem()},e.handleChange=function(t){"Enter"===t.key?(t.preventDefault(),e.onAddTask()):e.setState({txt:t.target.value})},e.handleKeyPress=function(e){},e.onAddTask=function(){var t=e.state.txt;t&&(e.props.onAddTask(t),e.setState({txt:""}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.txt;return Object(fe.jsxs)("div",{className:"add-new-task",children:[Object(fe.jsx)(pe.a,{type:"text",className:"text-area-auto task-edit",value:e,onChange:this.handleChange,onKeyPress:this.handleChange,autoFocus:!0}),Object(fe.jsxs)("div",{children:[Object(fe.jsx)("button",{className:"save-task",onClick:this.onAddTask,children:"Add"}),Object(fe.jsx)("button",{className:"discard-task",onClick:this.onDiscardChanges,children:"X"})]})]})}}]),a}(n.a.Component),Yr=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isAddItem:!1,currChecklist:null,title:null},e.onDeleteChecklist=function(){e.state.title;var t=e.props,a=t.board,r=t.currCard,n=t.checklistIdx;r.checklists.splice(n,1),e.props.updateBoard(a)},e.onDeleteTask=function(t){var a=e.state,r=a.currChecklist,n=(a.title,e.props),s=n.board;n.currCard;r.tasks.splice(t,1),e.props.updateBoard(s)},e.onEditTask=function(t,a,r){var n=e.state,s=n.currChecklist,c=(n.title,e.props),i=c.board,o=c.currCard;if(s.tasks[t].isDone=a,s.tasks[t].txt=r,s.tasks.every((function(e){return e.isDone}))){e.props.updateBoard(i,"Completed checklist",o)}else e.props.updateBoard(i)},e.onAddTask=function(t){var a=e.state,r=a.currChecklist,n=(a.title,e.props),s=n.board;n.currCard;r.tasks.push({id:V.makeId(),txt:t,isDone:!1}),e.props.updateBoard(s)},e.onIsAddItem=function(){e.setState(Object(x.a)(Object(x.a)({},e.state),{},{isAddItem:!e.state.isAddItem}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currCard,a=e.checklistIdx,r=t.checklists[a],n=r.title;this.setState(Object(x.a)(Object(x.a)({},this.state),{},{currChecklist:r,title:n}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isAddItem,r=t.currChecklist,n=this.props,s=n.board,c=n.checklistIdx;return s&&null!==c&&r?Object(fe.jsxs)("div",{className:"checklist-app",children:[Object(fe.jsxs)("div",{className:"flex direction-row space-between ",children:[Object(fe.jsxs)("div",{className:"flex direction-row",children:[Object(fe.jsx)(nt.a,{className:"card-details-icon"}),Object(fe.jsx)("h3",{className:"card-subtitle",children:r.title})]}),Object(fe.jsx)("button",{className:"delete-checklist hover",onClick:this.onDeleteChecklist,children:"Delete"})]}),Object(fe.jsx)(Kr,{currChecklist:r}),r.tasks.length?r.tasks.map((function(t,a){return Object(fe.jsx)(Xr,{task:t,taskIdx:a,onEditTask:e.onEditTask,onDeleteTask:e.onDeleteTask},t.id)})):Object(fe.jsx)(fe.Fragment,{}),!a&&Object(fe.jsx)("button",{className:"add-item hover",onClick:this.onIsAddItem,children:"Add an item"}),a&&Object(fe.jsx)(Qr,{onIsAddItem:this.onIsAddItem,onAddTask:this.onAddTask})]}):Object(fe.jsx)(fe.Fragment,{})}}]),a}(n.a.Component);var Zr={updateBoard:ce},$r=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Zr)(Yr);function en(e){var t=e.currCard,a=t.checklists;return Object(fe.jsx)(fe.Fragment,{children:a.map((function(e,a){return Object(fe.jsx)($r,{currCard:t,checklistIdx:a},e.checklistId)}))})}function tn(e){var t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.handleClose,s=t.lists[a].cards[r],c=s.cardStyle.id?"cover-mode "+s.cardStyle.color:"",i=s.cardStyle.img?"img-cover cover-mode":c;return console.log("cover img",s.cardStyle),Object(fe.jsxs)("div",{className:i,style:{backgroundImage:"url(".concat(s.cardStyle.img,")")},children:[Object(fe.jsx)("div",{className:"close-window-btn pointer flex align-center justify-center",onClick:n,children:Object(fe.jsx)("img",{src:Oe,alt:"close"})}),c&&Object(fe.jsx)("div",{className:"cover-menu pointer",children:Object(fe.jsx)(la,{type:"cover",title:"Cover",titleModal:"Cover",board:t,currListIdx:a,currCardIdx:r})})]})}var an=a(299),rn=a.n(an),nn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.cardAttachment;return Object(fe.jsxs)("a",{href:e.url,target:"_blank",className:"card-attachment-preview flex direction-row",children:[Object(fe.jsx)("img",{src:e.url}),Object(fe.jsxs)("div",{children:[Object(fe.jsxs)("div",{className:"flex direction-row",children:[Object(fe.jsxs)("h4",{children:[e.fileName," "]}),Object(fe.jsx)(rn.a,{className:"icon"})]}),Object(fe.jsxs)("div",{children:[Object(fe.jsxs)("small",{children:["Added on ",new Date(e.createdAt).toString().substring(0,16)," - "]}),Object(fe.jsx)("small",{className:"delete",onClick:this.props.onDeleteAttach(e.id),children:" Delete "})]})]})]})}}]),a}(n.a.Component);function sn(e){var t=e.board,a=e.currListIdx,r=e.currCardIdx,n=e.OnUpdateBoard,s=t.lists[a].cards[r].attachments,c=function(e){return function(c){c.stopPropagation(),c.preventDefault();var i=s.findIndex((function(t){return t.id===e}));s.splice(i,1);var o=t.lists[a].cards[r];n(t,"Removed attachment",o)}};return s.length?Object(fe.jsxs)("div",{className:"card-attachments",children:[Object(fe.jsxs)("div",{className:"title flex direction-row align-center",children:[Object(fe.jsx)(bt.a,{className:"card-details-icon"}),Object(fe.jsx)("h3",{className:"card-subtitle",children:"Attachments"})]}),Object(fe.jsx)("div",{children:s.map((function(e){return Object(fe.jsx)(nn,{cardAttachment:e,onDeleteAttach:c},e.id)}))}),Object(fe.jsx)(la,{type:"add-attachments",title:"attachments",titleModal:"Attachments",board:t,currListIdx:a,currCardIdx:r})]}):Object(fe.jsx)(fe.Fragment,{})}var cn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={currListIdx:null,currCardIdx:null},e.getCurrCard=function(t){var a=e.props.match.params.listId,r=e.props.match.params.cardId,n=t.lists.findIndex((function(e){return e.listId===a})),s=t.lists[n].cards.findIndex((function(e){return e.cardId===r}));e.setState(Object(x.a)(Object(x.a)({},e.state),{},{currListIdx:n,currCardIdx:s}))},e.onToggleDone=function(){var t=e.state,a=t.currListIdx,r=t.currCardIdx,n=e.props.board,s=n.lists[a].cards[r];s.dueDate.isDone=!s.dueDate.isDone;var c=s.dueDate.isDone?"Marked the due date complete":"Marked the due date incomplete";e.props.updateBoard(n,c,s)},e.OnUpdateBoard=function(t,a,r,n){e.props.updateBoard(t,a,r,n)},e.handleClose=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.board;this.getCurrCard(e)}},{key:"render",value:function(){var e=this.state,t=e.currListIdx,a=e.currCardIdx,r=this.props.board;if(!r||null===a||null===t)return Object(fe.jsx)(Wa,{});var n=r.lists[t].cards[a];return Object(fe.jsxs)("div",{className:"card-details-wrapper",children:[Object(fe.jsx)("div",{className:"screen-card-details",onClick:this.handleClose}),Object(fe.jsxs)("div",{className:"card-details",children:[Object(fe.jsx)(tn,{board:r,currListIdx:t,currCardIdx:a,handleClose:this.handleClose}),Object(fe.jsxs)("div",{className:"card-details-main-content",children:[Object(fe.jsx)(Gr,{board:r,currListIdx:t,currCardIdx:a,OnUpdateBoard:this.OnUpdateBoard}),Object(fe.jsxs)("div",{className:"card-details-content",children:[Object(fe.jsxs)("div",{className:"card-details-main",children:[Object(fe.jsxs)("div",{className:"card-details-items flex direction-row items-flex-start wrap",children:[n.cardMembers.length?Object(fe.jsxs)("div",{children:[Object(fe.jsx)("h3",{children:"Members"}),Object(fe.jsx)(ha,{members:n.cardMembers,board:r,currListIdx:t,currCardIdx:a,currCard:n,isCardOpen:!0})]}):"",n.cardLabelIds.length?Object(fe.jsx)(Dr,{cardLabelIds:n.cardLabelIds,boardLabels:r.labels,board:r,currListIdx:t,currCardIdx:a,isCardOpen:!0}):"",n.dueDate.date&&Object(fe.jsx)("div",{id:"due-date-preview-card",children:Object(fe.jsx)(la,{type:"dates-edit",title:"Dates",titleModal:"Dates",board:r,currListIdx:t,currCardIdx:a,dueDate:n.dueDate,onToggleDone:this.onToggleDone})})]}),Object(fe.jsx)(zr,{board:r,currListIdx:t,currCardIdx:a,OnUpdateBoard:this.OnUpdateBoard}),Object(fe.jsx)(sn,{board:r,currListIdx:t,currCardIdx:a,OnUpdateBoard:this.OnUpdateBoard}),Object(fe.jsx)(en,{currCard:n}),Object(fe.jsx)(_r,{board:r,currListIdx:t,currCardIdx:a,OnUpdateBoard:this.OnUpdateBoard})]}),Object(fe.jsx)("div",{className:"card-details-sidebar",children:Object(fe.jsx)(Sr,{board:r,currListIdx:t,currCardIdx:a,handleClose:this.handleClose})})]})]})]})]})}}]),a}(n.a.Component);var on={loadBoards:$,removeBoard:re,addBoard:ae,updateBoard:ce,loadListAndCard:te},dn=Object(f.b)((function(e){return{board:e.boardReducer.board,currCard:e.boardReducer.currCard}}),on)(cn),ln=a(49),un=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"getValuesDoneOverdue",get:function(){var e=this.props.board,t=[0,0];return e.lists.forEach((function(e){e.cards.forEach((function(e){e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()?t[1]++:e.dueDate&&e.dueDate.isDone&&t[0]++}))})),t}},{key:"getPieData",get:function(){return{labels:["Done","Overdue"],datasets:[{data:this.getValuesDoneOverdue,backgroundColor:["#45cbb2","#0079bf"],borderColor:["black"],borderWidth:.5}]}}},{key:"render",value:function(){var e=this.getPieData;return Object(fe.jsxs)("div",{className:"pie-done-overdue",children:[Object(fe.jsx)("h1",{children:"Done Vs. Overdue"}),Object(fe.jsx)(ln.b,{data:e})]})}}]),a}(n.a.Component),bn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"mapTasksPerLabel",get:function(){var e=this.props.board,t=e.labels.map((function(e,t){return{label:e.title?e.title:"label".concat(t+1," (no title)"),id:e.id,tasks:0}}));return e.lists.forEach((function(e){t.forEach((function(t){e.cards.forEach((function(e){e.cardLabelIds.some((function(e){return e===t.id}))&&t.tasks++}))}))})),t=t.filter((function(e){return 0!==e.tasks}))}},{key:"getPieData",get:function(){var e=this.mapTasksPerLabel;return{labels:e.map((function(e){return e.label})),datasets:[{label:"# of Votes",data:e.map((function(e){return e.tasks})),backgroundColor:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#5ba4cf","#51e898","#2acce5","#ff8ed4"],borderColor:["black"],borderWidth:.5}]}}},{key:"render",value:function(){var e=this.getPieData;return e.datasets[0].data.length?Object(fe.jsxs)("div",{className:"pie-task-per-label",children:[Object(fe.jsx)("h1",{children:"Tasks per label"}),Object(fe.jsx)(ln.b,{data:e})]}):Object(fe.jsx)("div",{children:"there is no tasks tagged to any labels"})}}]),a}(n.a.Component),jn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){ln.d.font.size=16,ln.d.color="#fff",ln.d.plugins.legend.display=!1}},{key:"mapTasksPerMember",get:function(){var e=this.props.board,t=e.boardMembers.map((function(e){return{fullname:e.fullname,tasks:0}}));return e.lists.forEach((function(e){t.forEach((function(t){e.cards.forEach((function(e){e.cardMembers.some((function(e){return e.fullname===t.fullname}))&&t.tasks++}))}))})),t}},{key:"getPieData",get:function(){var e=this.mapTasksPerMember;return{labels:e.map((function(e){return e.fullname})),datasets:[{label:"Tasks",data:e.map((function(e){return e.tasks})),backgroundColor:["#45cbb2","#0079bf"],borderColor:["#45cbb2","#0079bf"],borderWidth:1}]}}},{key:"render",value:function(){var e=this.getPieData;return Object(fe.jsxs)("div",{className:"bar-task-per-member",children:[Object(fe.jsx)("h1",{children:"Tasks per member"}),Object(fe.jsx)(ln.a,{data:e,options:{indexAxis:"y",responsive:!0,scales:{x:{ticks:{stepSize:1}}},tooltips:{},plugins:{legend:{display:!1}}}})]})}}]),a}(n.a.Component),hn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"getMapTasksPerList",get:function(){var e=this.props.board,t=[];return e.lists.forEach((function(e){t.push({list:e.listTitle,tasks:e.cards.length})})),t}},{key:"getBarData",get:function(){var e=this.getMapTasksPerList;return{labels:e.map((function(e){return e.list})),datasets:[{label:"Tasks",data:e.map((function(e){return e.tasks})),backgroundColor:["#45cbb2","#0079bf"],borderColor:["#45cbb2","#0079bf"],borderWidth:1}]}}},{key:"render",value:function(){var e=this.getBarData;return Object(fe.jsxs)("div",{className:"bar-task-per-list",children:[Object(fe.jsx)("h1",{children:"Tasks per list"}),Object(fe.jsx)(ln.a,{data:e,options:{scales:{y:{ticks:{stepSize:1}}},legend:{display:!1},plugins:{legend:{display:!1}}}})]})}}]),a}(n.a.Component),pn=a(302),On=a(303),fn=a.n(On),xn=a(217),mn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"getTasksCount",get:function(){var e=this.props.board,t=0;return e.lists.forEach((function(e){t+=e.cards.length})),t}},{key:"getOverdueCount",get:function(){var e=this.props.board;return e.lists.forEach((function(e){e.cards.forEach((function(e){e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()&&Object(pn.a)("overdueCount")}))})),0}},{key:"render",value:function(){var e=this.props.board;return Object(fe.jsxs)("div",{children:[Object(fe.jsxs)("h1",{children:[Object(fe.jsx)(fn.a,{}),e.boardTitle]}),Object(fe.jsxs)("ul",{className:"dashboard-title clean-list",children:[Object(fe.jsx)("li",{children:Object(fe.jsxs)("h1",{children:[Object(fe.jsx)(Ur.a,{}),this.getTasksCount," Tasks"]})}),Object(fe.jsxs)("li",{children:[Object(fe.jsx)("h1",{}),this.getVerdueCount," Overdue"]}),Object(fe.jsx)("li",{children:Object(fe.jsxs)("h1",{children:[Object(fe.jsx)(et.a,{}),e.boardMembers.length," Members"]})})]}),Object(fe.jsxs)("div",{children:[Object(fe.jsx)("h1",{children:"Overdue"}),Object(fe.jsx)(xn.a,{value:50,text:"".concat(50,"%"),styles:Object(xn.b)({textColor:"white",pathColor:"#0079bf",trailColor:"white",textSize:"18px"})})]})]})}}]),a}(n.a.Component),gn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"getMapTasksOverTime",get:function(){var e=this.props.board,t=[],a={};e.lists.forEach((function(e){e.cards.forEach((function(e){a[e.dueDate.date]?a[e.dueDate.date]++:(a[e.dueDate.date]=1,e.dueDate&&!e.dueDate.isDone&&e.dueDate.date<Date.now()?t.push("#eb5a46"):e.dueDate&&e.dueDate.isDone?t.push("#61bd4f"):t.push("#45cbb2"))}))})),a=Object.entries(a).sort((function(e,t){return e[0].localeCompare(t[0])})),console.log(" mapTasksOverTime",a);var r=a.map((function(e){return{x:e[0],y:e[1]}}));return console.log("data",r),{data:r,backgroundColor:t}}},{key:"getPieData",get:function(){var e=this.mapTasksPerLabel;return{labels:e.map((function(e){return e.label})),datasets:[{label:"# of Votes",data:e.map((function(e){return e.tasks})),backgroundColor:["#61bd4f","#f2d600","#ff9f1a","#eb5a46","#c377e0","#5ba4cf","#51e898","#2acce5","#ff8ed4"],borderColor:["black"],borderWidth:.5}]}}},{key:"render",value:function(){var e=this.getMapTasksOverTime;console.log("mapTasksOverTime",e);var t={scales:{x:{ticks:{callback:function(e,t,a){return new Date(e).toString().substring(0,11)}}},y:{beginAtZero:!0}},plugins:{tooltip:{callbacks:{label:function(e){return"Task"}}}}};return Object(fe.jsxs)("div",{className:"pie-task-per-label",children:[Object(fe.jsx)("h1",{children:"Tasks over time"}),Object(fe.jsx)(ln.c,{data:{datasets:[{label:"Scatter Dataset",data:e.data,backgroundColor:e.backgroundColor,borderColor:"rgb(75, 192, 192)",tension:.5,borderWidth:1.5,showLine:!0,pointRadius:6}]},options:t})]})}}]),a}(n.a.Component),vn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).goBack=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.board,t=e.lists.filter((function(e){return 0!==e.cards.length}));return e.lists.length&&t.length?Object(fe.jsxs)("div",{className:"dashboard-wrapper",children:[Object(fe.jsx)("div",{className:"screen-dashboard"}),Object(fe.jsxs)("section",{className:"dashboard",children:[Object(fe.jsx)("div",{className:"close-window-btn pointer flex align-center justify-center",onClick:this.goBack,children:Object(fe.jsx)("img",{src:Oe,alt:"close"})}),Object(fe.jsx)(mn,{board:e}),Object(fe.jsxs)("div",{className:"charts-container",children:[Object(fe.jsx)(un,{board:e}),Object(fe.jsx)(bn,{board:e}),Object(fe.jsx)(jn,{board:e}),Object(fe.jsx)(hn,{board:e}),Object(fe.jsx)(gn,{board:e})]})]})]}):Object(fe.jsxs)("section",{className:"dashboard",children:["No data to show... ",Object(fe.jsx)("br",{}),"Try adding tasks to your board"]})}}]),a}(n.a.Component);var Cn={loadBoard:ee},yn=Object(f.b)((function(e){return{board:e.boardReducer.board}}),Cn)(vn),kn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isMenuOpen:!1},e.onUpdateBoard=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";e.props.updateBoard(t,a,r,n)},e.onDragEnd=function(t){console.log("res dnd",t);var a=t.destination,r=t.source,n=(t.draggableId,t.type),s=e.props.board;if(a){var c=r.droppableId,i=a.droppableId,o=r.index,d=a.index;if(c!==i||d!==o){if("list"===n){var l,u=s.lists.splice(o,1);return(l=s.lists).splice.apply(l,[d,0].concat(Object(O.a)(u))),void e.props.updateBoard(s)}if(c===i){var b,j=s.lists.find((function(e){return e.listId===c})),h=j.cards.splice(o,1);(b=j.cards).splice.apply(b,[d,0].concat(Object(O.a)(h)))}if(c!==i){var p,f=s.lists.find((function(e){return e.listId===c})),x=f.cards.splice(o,1),m=s.lists.find((function(e){return e.listId===i}));if(!m.cards)return void m.push(x);(p=m.cards).splice.apply(p,[d,0].concat(Object(O.a)(x)))}e.props.updateBoard(s)}}},e.onToggleLabels=function(){e.props.toggleLabels()},e.onOpenDashboard=function(){var t=e.props.board;e.props.history.push("/boards/".concat(t._id,"/dashboard"))},e.goToTemplateClone=function(t){e.props.history.push("/boards/".concat(t))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,r=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedInUser){e.next=6;break}return e.next=3,this.props.loginAsGuest();case 3:return t=e.sent,e.next=6,this.props.loadBoards(t._id);case 6:a=this.props.match.params.boardId,this.props.loadBoard(a),E.emit("boardId",a),E.on("board updated",(function(e){r.props.loadBoard(e._id)})),E.on("sending notification",(function(e){r.props.setNotif(e)}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){E.off("board updated",this.updateSocket),E.off("boardId")}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.match.params.boardId;e.board&&a!==this.props.board._id&&this.props.loadBoard(a)}},{key:"render",value:function(){var e=this.props.board;if(!e||!Object.keys(e).length)return Object(fe.jsx)(Wa,{});var t=V.getFormattedBgStyle(e.boardStyle,"full");return Object(fe.jsxs)("section",{className:"board-app flex direction-col",children:[Object(fe.jsx)(b.a,{exact:!0,component:dn,path:"/boards/:boardId/:listId/:cardId"}),Object(fe.jsx)(b.a,{exact:!0,component:yn,path:"/boards/:boardId/dashboard"}),Object(fe.jsx)(fr,{board:e,onUpdateBoard:this.onUpdateBoard,onOpenDashboard:this.onOpenDashboard,goToTemplateClone:this.goToTemplateClone}),Object(fe.jsx)("div",{className:"board-background",style:t}),Object(fe.jsxs)("div",{className:"board-canvas flex",children:[Object(fe.jsx)(be.a,{onDragEnd:this.onDragEnd,children:Object(fe.jsx)(Pa,{board:e,lists:e.lists,onUpdateBoard:this.onUpdateBoard,className:"board"})}),Object(fe.jsx)(mr,{board:e,onUpdateBoard:this.onUpdateBoard})]})]})}}]),a}(n.a.Component);var Nn={removeBoard:re,loadBoards:$,loadBoard:ee,updateBoard:ce,toggleLabels:ne,setNotif:oe,loginAsGuest:ue},In=Object(f.b)((function(e){return{boards:e.boardReducer.boards,board:e.boardReducer.board,isLabelOpen:e.boardReducer.isLabelOpen,loggedInUser:e.userReducer.loggedInUser}}),Nn)(kn),Bn=a.p+"static/media/trackit-logo.4b8772cc.svg",wn=a.p+"static/media/trackit-logo-white.9c62af35.svg";function Tn(e){var t=e.isLoggedIn,a=t?"/boards":"/",r=t?wn:Bn;return Object(fe.jsx)(Dt.c,{to:a,children:Object(fe.jsxs)("div",{className:"logo-container flex align-center",children:[Object(fe.jsx)("span",{className:"icon-span flex align-center justify-center",children:Object(fe.jsx)("img",{className:"icon",src:r,alt:""})}),Object(fe.jsx)("h1",{className:"logo-name",children:"TrackIt"})]})})}function Sn(){return Object(fe.jsx)("header",{className:"home-header flex",children:Object(fe.jsxs)("nav",{className:"nav-bar flex space-between align-center",children:[Object(fe.jsx)(Tn,{isLoggedIn:!1}),Object(fe.jsxs)("div",{className:"login-signup flex align-center",children:[Object(fe.jsx)(Dt.c,{className:"login",to:"/login",children:"Log in"}),Object(fe.jsx)(Dt.c,{className:"signup home-btn",to:"/signup",children:"Sign up"})]})]})})}var Dn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onStartAsGuest=Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loginAsGuest();case 2:e.props.history.push("/boards");case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){return Object(fe.jsx)(fe.Fragment,{children:Object(fe.jsxs)("section",{className:"home-page main-container",children:[Object(fe.jsx)(Sn,{}),Object(fe.jsxs)("div",{className:"hero flex align-center",children:[Object(fe.jsxs)("div",{className:"info flex direction-col justify-center align-center",children:[Object(fe.jsx)("h1",{children:"TrackIt helps teams to stay on track."}),Object(fe.jsx)("p",{children:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with TrackIt."}),Object(fe.jsx)("button",{onClick:this.onStartAsGuest,className:"start home-btn",children:"Get Started!"})]}),Object(fe.jsx)("img",{src:"https://d2k1ftgv7pobq7.cloudfront.net/meta/p/res/images/spirit/hero/6a3ccd8e5c9a0e8ebea4235d12da6b24/hero.png",alt:""})]})]})})}}]),a}(n.a.Component);var Ln={loginAsGuest:ue},An=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Ln)(Dn),Mn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={credentials:{username:"",password:""},isLoginFailed:!1,isLoading:!1},e.clearForm=function(){var t={username:"",password:""};e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{credentials:t})}))},e.handleChange=function(t){var a=t.target.name,r=t.target.value;e.setState({credentials:Object(x.a)(Object(x.a)({},e.state.credentials),{},Object(Wt.a)({},a,r))})},e.onLogin=Object(p.a)(h.a.mark((function t(){var a,r=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=r.length>0&&void 0!==r[0]?r[0]:null)&&a.preventDefault(),t.prev=2,e.setState({isLoading:!0}),t.next=6,e.props.onLogin(e.state.credentials);case 6:e.props.history.push("/boards"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1,isLoginFailed:!0})})),e.clearForm(),setTimeout(e.clearErrMsg,5e3);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.clearErrMsg=function(){e.setState({isLoginFailed:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.credentials,t=e.username,a=e.password,r=this.state,n=r.isLoginFailed,s=r.isLoading;return Object(fe.jsxs)("div",{className:"login-signup-page",children:[Object(fe.jsx)(Tn,{isLoggedIn:!1}),Object(fe.jsxs)("div",{className:"form-container",children:[s&&Object(fe.jsx)(Wa,{}),n&&Object(fe.jsx)("p",{className:"login-signup-error",children:"Login failed, please check your username and password"}),Object(fe.jsx)("h3",{children:"Log in to TrackIt"}),Object(fe.jsxs)("form",{className:"login-signup-form flex direction-col align-center justify-center",onSubmit:this.onLogin,children:[Object(fe.jsx)("input",{type:"text",name:"username",value:t,placeholder:"Username",onChange:this.handleChange,required:!0,autoFocus:!0}),Object(fe.jsx)("input",{type:"password",name:"password",value:a,placeholder:"Password",onChange:this.handleChange,required:!0}),Object(fe.jsx)("button",{children:"Log in"})]}),Object(fe.jsx)(Dt.b,{className:"to-login-signup",to:"/signup",children:"Sign up for an account"})]})]})}}]),a}(n.a.Component);var En={onLogin:le,loadBoards:$},Un=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),En)(Mn),Fn=a(304),_n=a.n(Fn),Rn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={credentials:{username:"",password:"",fullname:""},isSignupFailed:!1,isLoading:!1},e.clearForm=function(){var t={username:"",password:"",fullname:""};e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{credentials:t})}))},e.handleChange=function(t){var a=t.target.name,r=t.target.value;e.setState({credentials:Object(x.a)(Object(x.a)({},e.state.credentials),{},Object(Wt.a)({},a,r))})},e.onSignup=Object(p.a)(h.a.mark((function t(){var a,r=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=r.length>0&&void 0!==r[0]?r[0]:null)&&a.preventDefault(),t.prev=2,e.setState({isLoading:!0}),t.next=6,e.props.onSignup(e.state.credentials);case 6:e.props.history.push("/boards"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(2),e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1,isSignupFailed:!0})})),e.clearForm(),setTimeout(e.clearErrMsg,5e3);case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.clearErrMsg=function(){e.setState({isSignupFailed:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state.credentials,t=e.username,a=e.password,r=e.fullname,n=this.state,s=n.isSignupFailed,c=n.isLoading;return Object(fe.jsxs)("div",{className:"login-signup-page",children:[Object(fe.jsx)(Tn,{isLoggedIn:!1}),Object(fe.jsxs)("div",{className:"form-container",children:[c&&Object(fe.jsx)(Wa,{}),s&&Object(fe.jsx)("p",{className:"login-signup-error",children:"Username is already in use"}),Object(fe.jsx)("h3",{children:"Sign up for your account"}),Object(fe.jsxs)("form",{className:"login-signup-form flex direction-col align-center justify-center",onSubmit:this.onSignup,children:[Object(fe.jsx)("input",{type:"text",name:"fullname",value:r,placeholder:"Full Name",onChange:this.handleChange,required:!0,autoFocus:!0}),Object(fe.jsx)("input",{type:"text",name:"username",value:t,placeholder:"Username",onChange:this.handleChange,required:!0}),Object(fe.jsx)("input",{type:"password",name:"password",value:a,placeholder:"Password",onChange:this.handleChange,required:!0}),Object(fe.jsx)(_n.a,{buttonText:"Login",cookiePolicy:"single_host_origin"}),Object(fe.jsx)("button",{children:"Sign up"})]}),Object(fe.jsx)(Dt.b,{className:"to-login-signup",to:"/login",children:"Already have an account? Log In"})]})]})}}]),a}(n.a.Component);var Pn={onSignup:function(e){return function(t){_.signup(e).then((function(e){t({type:"SET_USER",user:e})})).catch((function(e){console.log("Cannot signup",e)}))}}},Gn=Object(f.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Pn)(Rn);function qn(e){var t=e.board,a=e.loggedInUser,r=e.toggleStarBoard,n=e.isYellow,s=e.isLarge,c=V.getFormattedBgStyle(t.boardStyle);return Object(fe.jsx)(Dt.b,{to:"/boards/".concat(t._id),children:Object(fe.jsxs)("div",{className:"board-preview",style:c,children:["object"===typeof t.boardStyle?Object(fe.jsx)("div",{className:"darken-image"}):Object(fe.jsx)(fe.Fragment,{}),Object(fe.jsxs)("div",{className:"preview-details flex direction-col space-between",children:[Object(fe.jsx)("h3",{className:"board-title",children:t.boardTitle}),Object(fe.jsx)("div",{className:"board-preview-bottom",children:t.createdBy?Object(fe.jsxs)(fe.Fragment,{children:[t.createdBy._id!==a._id?Object(fe.jsxs)("p",{className:"board-owner",children:[t.createdBy.fullname,"'s board"]}):Object(fe.jsx)(fe.Fragment,{}),Object(fe.jsx)("button",{className:"star-btn ".concat(t.isStarred?"show":""),onClick:function(e){return r(e,t)},children:Object(fe.jsx)(Ga.b.Provider,{value:{className:"star-icon ".concat(n?"yellow":""," ").concat(s?"large":"")},children:Object(fe.jsx)(ta.a,{})})})]}):Object(fe.jsx)(fe.Fragment,{})})]})]})})}var Hn=a(306),zn=a(305);function Kn(e){var t=e.path;return Object(fe.jsxs)("section",{className:"side-nav flex direction-col",children:[Object(fe.jsx)(Dt.c,{to:"/boards",children:Object(fe.jsxs)("div",{className:"nav-item flex align-center".concat("boards"===t?" active":""),children:[Object(fe.jsx)(zn.a,{}),Object(fe.jsx)("h3",{children:"Boards"})]})}),Object(fe.jsx)(Dt.c,{to:"/templates",children:Object(fe.jsxs)("div",{className:"nav-item flex align-center".concat("templates"===t?" active":""),children:[Object(fe.jsx)(Hn.a,{}),Object(fe.jsx)("h3",{children:"Templates"})]})})]})}var Wn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={templateBoards:[]},e.getTemplateBoards=function(){return e.props.boards.filter((function(e){return!e.createdBy}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.loggedInUser){e.next=5;break}return e.next=4,this.props.loginAsGuest();case 4:t=e.sent;case 5:return e.next=7,this.props.loadBoards(t._id);case 7:a=this.getTemplateBoards(),this.setState({templateBoards:a}),this.props.loadBoard(null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.match.path.slice(1),t=this.state.templateBoards;return this.props.loggedInUser&&t.length?Object(fe.jsx)("section",{className:"main-container boards",children:Object(fe.jsxs)("section",{className:"boards-page flex",children:[Object(fe.jsx)(Kn,{path:e}),Object(fe.jsx)("section",{className:"boards-section",children:Object(fe.jsxs)("section",{className:"template-boards",children:[Object(fe.jsx)("h3",{children:"Templates"}),Object(fe.jsx)("div",{className:"boards-preview",children:t.map((function(e){return e.isStarred=!1,Object(fe.jsx)(qn,{board:e},e._id)}))})]})})]})}):Object(fe.jsx)(Wa,{})}}]),a}(n.a.Component);var Jn={loadBoards:$,loadBoard:ee},Vn=Object(f.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),Jn)(Wn),Xn=a.p+"static/media/close-icon-white.c0dcb3ec.svg",Qn=a.p+"static/media/checked-icon-white.b2ad68a5.svg",Yn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={title:"",backgrounds:[{small:"https://images.unsplash.com/photo-1632813101579-7e7d4dd2c69a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQzNDg&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632813101579-7e7d4dd2c69a?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632714394526-1e87d08d56c4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQzODg&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632714394526-1e87d08d56c4?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632829754530-d94a588e2dde?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQ0MTk&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632829754530-d94a588e2dde?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"},{small:"https://images.unsplash.com/photo-1632918425510-c02e76616549?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyNjQ5NjV8MHwxfGFsbHx8fHx8fHx8fDE2MzMzMzQ0NDI&ixlib=rb-1.2.1&q=80&w=400",full:"https://images.unsplash.com/photo-1632918425510-c02e76616549?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1527&q=80"},"linear-gradient(225deg, rgb(255, 60, 172) 0%, rgb(120, 75, 160) 50%, rgb(43, 134, 197) 100%)","#0079bf","#d29034","#519839","#b04632"],selectedBgIdx:0},e.handleChange=function(t){var a=t.target.value;e.setState({title:a})},e.createBoard=function(){var t=Object(p.a)(h.a.mark((function t(a){var r,n,s,c,i,o,d,l,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=e.state,n=r.title,s=r.backgrounds,c=r.selectedBgIdx,n){t.next=4;break}return t.abrupt("return");case 4:return i=e.props.loggedInUser,(o=Object(x.a)({},i)).isStarred=!1,d={boardTitle:n,createdAt:Date.now(),createdBy:i,cardsCount:0,boardStyle:s[c],covers:e.getCovers(),labels:e.getLabels(),boardMembers:[o],lists:[],activities:[],archive:[]},t.next=10,e.props.addBoard(d);case 10:l=e.props,u=l.board,(0,l.onToggleCreateBoard)(),e.props.history.push("/boards/".concat(u._id));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getLabels=function(){for(var e=[],t=1;t<=6;t++){var a={id:V.makeId(),title:"",color:"clr".concat(t)};e.push(a)}return e},e.getCovers=function(){for(var e=[],t=1;t<=10;t++){var a={id:V.makeId(),color:"clr".concat(t)};e.push(a)}return e},e.selectBg=function(t){e.setState({selectedBgIdx:t})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,r=t.backgrounds,n=t.selectedBgIdx,s=r[n],c=V.getFormattedBgStyle(s);return Object(fe.jsxs)("div",{className:"create-board-wrapper",children:[Object(fe.jsx)("div",{className:"screen",onClick:this.props.onToggleCreateBoard}),Object(fe.jsxs)("div",{className:"create-board flex direction-col align-center",children:[Object(fe.jsxs)("div",{className:"board-preview flex",children:[Object(fe.jsxs)("div",{className:"title-section",style:c,children:[n<4&&Object(fe.jsx)("span",{className:"bg-overlay"}),Object(fe.jsx)("button",{className:"close-btn",onClick:this.props.onToggleCreateBoard,children:Object(fe.jsx)("img",{src:Xn,alt:"Close"})}),Object(fe.jsx)("form",{onSubmit:this.createBoard,children:Object(fe.jsx)("input",{type:"text",autoComplete:"off",className:"title-input",name:"title",placeholder:"Add board title",value:a,onChange:this.handleChange})}),Object(fe.jsxs)("p",{className:"user-title",children:[this.props.loggedInUser.fullname,"'s Workspace"]})]}),Object(fe.jsx)("div",{className:"choose-bg flex wrap space-between",children:r.map((function(t,a){var r=V.getFormattedBgStyle(t,"small");return Object(fe.jsx)("div",{className:"bg-color",style:r,onClick:function(){return e.selectBg(a)},children:a===n&&Object(fe.jsx)("span",{className:"selected",children:Object(fe.jsx)("img",{src:Qn,alt:"selected"})})},V.makeId())}))})]}),Object(fe.jsx)("button",{className:"create-btn".concat(a?"":" disabled"),onClick:this.createBoard,children:"Create board"})]})]})}}]),a}(n.a.Component);var Zn={addBoard:ae,loadBoard:ee},$n=Object(b.f)(Yn),es=Object(f.b)((function(e){return{board:e.boardReducer.board,loggedInUser:e.userReducer.loggedInUser}}),Zn)($n),ts=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={userBoards:[],isCreateBoard:!1},e.getBoardsByType=function(t){var a=e.props.loggedInUser;return _.filterUserBoards(e.state.userBoards,a._id,t)},e.getGuestBoards=function(){},e.toggleStarBoard=function(t,a){t.preventDefault();var r=e.props,n=r.loggedInUser;(0,r.updateBoard)(_.toggleStarBoard(a,n._id))},e.onToggleCreateBoard=function(){var t=e.state.isCreateBoard;e.setState({isCreateBoard:!t})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.loggedInUser){e.next=5;break}return e.next=4,this.props.loginAsGuest();case 4:t=e.sent;case 5:return e.next=7,this.props.loadBoards(t._id);case 7:a=_.filterUserBoards(this.props.boards,this.props.loggedInUser._id,"all"),this.setState({userBoards:a}),this.props.loadBoard(null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.match.path.slice(1),a=this.state.userBoards,r=this.props.loggedInUser;if(!r)return Object(fe.jsx)(Wa,{});var n=a.length?this.getBoardsByType("starred"):[],s=a.length?this.getBoardsByType("owner"):[],c=a.length?this.getBoardsByType("guest"):[];return Object(fe.jsxs)("section",{className:"main-container boards",children:[Object(fe.jsxs)("section",{className:"boards-page flex",children:[Object(fe.jsx)(Kn,{path:t}),Object(fe.jsxs)("section",{className:"boards-section",children:[n.length?Object(fe.jsxs)("section",{className:"inner-section starred-boards",children:[Object(fe.jsxs)("div",{className:"star-title flex",children:[Object(fe.jsx)(Ga.b.Provider,{value:{className:"star-icon"},children:Object(fe.jsx)(ta.a,{})}),Object(fe.jsx)("h3",{children:"Starred boards"})]}),Object(fe.jsx)("div",{className:"boards-preview",children:n.map((function(t){return Object(fe.jsx)(qn,{board:t,loggedInUser:r,toggleStarBoard:e.toggleStarBoard,isYellow:!0},t._id)}))})]}):Object(fe.jsx)(fe.Fragment,{}),Object(fe.jsxs)("section",{className:"inner-section user-boards",children:[Object(fe.jsx)("h3",{children:"Your Boards"}),Object(fe.jsxs)("div",{className:"boards-preview",children:[s.map((function(t){return t.isStarred=t.boardMembers.find((function(e){return e._id===r._id})).isStarred,Object(fe.jsx)(qn,{board:t,loggedInUser:r,toggleStarBoard:e.toggleStarBoard,isLarge:t.isStarred},t._id)})),Object(fe.jsx)("div",{className:"board-preview create-board flex align-center justify-center",onClick:this.onToggleCreateBoard,children:"Create new board"})]})]}),c.length?Object(fe.jsxs)("section",{className:"inner-section guest-boards user-boards",children:[Object(fe.jsx)("h3",{children:"Guest Boards"}),Object(fe.jsx)("div",{className:"boards-preview",children:c.map((function(t){return t.isStarred=t.boardMembers.find((function(e){return e._id===r._id})).isStarred,Object(fe.jsx)(qn,{board:t,loggedInUser:r,toggleStarBoard:e.toggleStarBoard,isLarge:t.isStarred},t._id)}))})]}):Object(fe.jsx)(fe.Fragment,{})]})]}),this.state.isCreateBoard&&Object(fe.jsx)(es,{onToggleCreateBoard:this.onToggleCreateBoard})]})}}]),a}(n.a.Component);var as={loadBoard:ee,loadBoards:$,updateBoard:ce,loginAsGuest:ue};var rs=[{path:"/boards/:boardId",component:In},{path:"/boards",component:Object(f.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser}}),as)(ts)},{path:"/cardNotFound",component:function(){return Object(fe.jsxs)("section",{className:"card-not-found",children:[Object(fe.jsx)("h1",{children:"Card not found."}),Object(fe.jsxs)("div",{children:["This card may be deleted or on a private board. ",Object(fe.jsx)("br",{}),"If someone gave you this link, they may need to invite you to one of their boards or Workspaces."]})]})}},{path:"/templates",component:Vn},{path:"/login",component:Un},{path:"/signup",component:Gn},{path:"/",component:An}],ns=a(307),ss=a.p+"static/media/menu-plus-icon.7b919228.svg",cs=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isCreateBoard:!1,isUserBoardsOpen:!1,isStarredBoardsOpen:!1,isNotif:!1},e.onToggleCreateBoard=function(){var t=e.state.isCreateBoard;e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isCreateBoard:!t})}))},e.onToggleUserBoards=function(){var t=e.state.isUserBoardsOpen;e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isUserBoardsOpen:!t})}))},e.onToggleStarredBoards=function(){var t=e.state.isStarredBoardsOpen;e.setState((function(e){return Object(x.a)(Object(x.a)({},e),{},{isStarredBoardsOpen:!t})}))},e.markReadNotif=function(){e.props.setNotif(!1)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){E.setup()}},{key:"render",value:function(){var e=this.props,t=e.loggedInUser,a=e.isNotif;if(Object(ns.a)(this.state),!t)return Object(fe.jsx)(fe.Fragment,{});var r=a?"newNotif":"noNotif";return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)("header",{className:"main-header",children:Object(fe.jsxs)("nav",{className:"nav-bar flex space-between",children:[Object(fe.jsxs)("div",{className:"main-nav-links flex align-center",children:[Object(fe.jsx)(Tn,{isLoggedIn:!0}),Object(fe.jsx)("span",{className:"header-btn".concat(this.state.isUserBoardsOpen?" open":""),children:Object(fe.jsx)(la,{type:"userBoards",titleModal:"Boards",onToggle:this.onToggleUserBoards})}),Object(fe.jsx)("span",{className:"header-btn starred".concat(this.state.isStarredBoardsOpen?" open":""),children:Object(fe.jsx)(la,{type:"starredBoards",titleModal:"Starred boards",onToggle:this.onToggleStarredBoards})}),Object(fe.jsx)("button",{className:"header-btn create",onClick:this.onToggleCreateBoard,children:"Create"}),Object(fe.jsx)("button",{className:"header-btn create-small flex align-center justify-center",onClick:this.onToggleCreateBoard,children:Object(fe.jsx)("img",{src:ss,alt:""})})]}),Object(fe.jsxs)("div",{className:"user-section flex align-center",children:[Object(fe.jsx)("div",{className:"notifications",children:Object(fe.jsx)(la,{type:r,titleModal:"Notifications",markReadNotif:this.markReadNotif})}),Object(fe.jsx)("div",{className:"user-avatar",children:Object(fe.jsx)(la,{type:"userMenu",titleModal:"Account",loggedInUser:t})})]})]})}),this.state.isCreateBoard&&Object(fe.jsx)(es,{onToggleCreateBoard:this.onToggleCreateBoard})]})}}]),a}(n.a.Component);var is={setNotif:oe},os=Object(f.b)((function(e){return{boards:e.boardReducer.boards,loggedInUser:e.userReducer.loggedInUser,isNotif:e.boardReducer.isNotif,notifCount:e.boardReducer.notifCount}}),is)(cs),ds=a(309),ls=a.n(ds),us=a(308),bs=a.n(us),js=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={msg:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.removeEvent=X.on("show-user-msg",(function(t){e.setState({msg:t}),setTimeout((function(){e.setState({msg:null})}),2500)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){var e=this;if(!this.state.msg)return Object(fe.jsx)("span",{});var t=this.state.msg.type||"";return Object(fe.jsxs)("section",{className:"user-msg  flex direction-row align-center",children:[Object(fe.jsxs)("div",{className:" txt-msg flex direction-row align-center",children:["danger"===t&&Object(fe.jsx)(bs.a,{}),"success"===t&&Object(fe.jsx)(ls.a,{}),this.state.msg.txt]}),Object(fe.jsx)("button",{onClick:function(){e.setState({msg:null})},children:"x"})]})}}]),a}(n.a.Component),hs=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(fe.jsxs)(fe.Fragment,{children:[Object(fe.jsx)(os,{}),Object(fe.jsxs)("main",{children:[Object(fe.jsx)(b.c,{children:rs.map((function(e){return Object(fe.jsx)(b.a,{component:e.component,path:e.path},e.path)}))}),Object(fe.jsx)(js,{})]})]})}}]),a}(n.a.Component),ps=(a(517),a(56)),Os=a(310),fs={boards:[],board:null,lastUpdatedBoard:null,isLabelOpen:!1,currCard:null,currList:null,isNotif:!1,notifCount:0,filterBy:{searchKey:"",labels:[],members:[],isFilter:!1,cardsCount:0},labelsProps:{label:{},isCreate:!1}};var xs={loggedInUser:_.getLoggedinUser()};var ms=Object(ps.c)({boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case"SET_BOARDS":return Object(x.a)(Object(x.a)({},e),{},{boards:t.boards});case"SET_BOARD":var a=JSON.parse(JSON.stringify(t.board));return Object(x.a)(Object(x.a)({},e),{},{board:Object(x.a)({},t.board),lastUpdatedBoard:a});case"ADD_BOARD":return Object(x.a)(Object(x.a)({},e),{},{board:t.board,boards:[].concat(Object(O.a)(e.boards),[t.board])});case"REMOVE_BOARD":return Object(x.a)(Object(x.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"UPDATE_BOARD":return Object(x.a)(Object(x.a)({},e),{},{board:t.board,boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"UPDATE_LAST_UPDATED_BOARD":var r=JSON.parse(JSON.stringify(e.board));return Object(x.a)(Object(x.a)({},e),{},{lastUpdatedBoard:r});case"UNDO_UPDATE_BOARD":if(e.lastUpdatedBoard){var n=JSON.parse(JSON.stringify(e.lastUpdatedBoard));return Object(x.a)(Object(x.a)({},e),{},{boards:e.boards.map((function(t){return t._id===e.board._id?e.lastUpdatedBoard:t})),board:n})}return e;case"TOGGLE_LABELS":var s=e.isLabelOpen;return Object(x.a)(Object(x.a)({},e),{},{isLabelOpen:!s});case"SET_LIST":return Object(x.a)(Object(x.a)({},e),{},{currList:t.list});case"SET_CARD":return Object(x.a)(Object(x.a)({},e),{},{currCard:t.card});case"SET_NOTIF":return Object(x.a)(Object(x.a)({},e),{},{isNotif:t.isNotif});case"SET_NOTIF_COUNT":return Object(x.a)(Object(x.a)({},e),{},{notifCount:t.count});case"SET_NOTIF_COUNT++":return Object(x.a)(Object(x.a)({},e),{},{notifCount:e.notifCount+1});case"SET_FILTER":return Object(x.a)(Object(x.a)({},e),{},{filterBy:t.filterBy});case"SET_LABEL":return Object(x.a)(Object(x.a)({},e),{},{labelsProps:t.labelsProps});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs,t=arguments.length>1?arguments[1]:void 0,a=e;if("SET_USER"===t.type)a=Object(x.a)(Object(x.a)({},e),{},{loggedInUser:t.user});return a}}),gs=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ps.d,vs=Object(ps.e)(ms,gs(Object(ps.a)(Os.a)));c.a.render(Object(fe.jsx)(n.a.StrictMode,{children:Object(fe.jsx)(f.a,{store:vs,children:Object(fe.jsx)(Dt.a,{children:Object(fe.jsx)(hs,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),i()}},[[518,1,2]]]);
//# sourceMappingURL=main.d0fe53b1.chunk.js.map